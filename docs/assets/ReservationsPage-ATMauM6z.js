import{t as e}from"./PageHeader-ChlIC0-7.js";import{t}from"./CustomSelect-CwRr9LoD.js";import{t as n}from"./clock-DRg0Opfo.js";import{t as r}from"./file-text-qhBNWj18.js";import{n as i,t as a}from"./CountryFilter-BJLetaIh.js";import"./ThemeToggle-DrE9Nlu4.js";import{t as o}from"./pencil-CFHUH763.js";import{t as s}from"./plus-Prc7ZpI6.js";import{t as c}from"./trash-2-BO20HWdz.js";import{A as l,B as u,J as d,L as f,P as p,R as m,U as h,_ as g,a as _,d as v,f as y,g as b,i as x,j as S,k as C,rt as w,w as T,x as E}from"./index-C69zWTxP.js";import{a as D,i as O,n as k,o as A,r as j,s as M,t as N}from"./ConfirmModal-Dqq7SLmt.js";import{t as P}from"./DateField-DZnMYsUr.js";var F=m(`external-link`,[[`path`,{d:`M15 3h6v6`,key:`1q9fwt`}],[`path`,{d:`M10 14 21 3`,key:`gplh6r`}],[`path`,{d:`M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6`,key:`a6xqqp`}]]),I=m(`file-check`,[[`path`,{d:`M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z`,key:`1oefj6`}],[`path`,{d:`M14 2v5a1 1 0 0 0 1 1h5`,key:`wfsgrz`}],[`path`,{d:`m9 15 2 2 4-4`,key:`1grp1n`}]]),L=m(`file`,[[`path`,{d:`M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z`,key:`1oefj6`}],[`path`,{d:`M14 2v5a1 1 0 0 0 1 1h5`,key:`wfsgrz`}]]),R=m(`hash`,[[`line`,{x1:`4`,x2:`20`,y1:`9`,y2:`9`,key:`4lhtct`}],[`line`,{x1:`4`,x2:`20`,y1:`15`,y2:`15`,key:`vyu0kd`}],[`line`,{x1:`10`,x2:`8`,y1:`3`,y2:`21`,key:`1ggp8o`}],[`line`,{x1:`16`,x2:`14`,y1:`3`,y2:`21`,key:`weycgp`}]]),z=m(`upload`,[[`path`,{d:`M12 3v12`,key:`1x0j5s`}],[`path`,{d:`m17 8-5-5-5 5`,key:`7q97r8`}],[`path`,{d:`M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4`,key:`ih7n3h`}]]),B=w(),V=l();function H({reservation:e,onClick:t}){let a=d[e.type],o=u[e.status];return(0,V.jsxs)(`div`,{role:t?`button`:void 0,tabIndex:t?0:void 0,onClick:()=>t?.(e),onKeyDown:n=>{t&&(n.key===`Enter`||n.key===` `)&&(n.preventDefault(),t(e))},className:`relative bg-white dark:bg-gray-800 rounded-2xl shadow-md overflow-hidden transition-all ${t?`cursor-pointer hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-indigo-500/50`:``}`,children:[(0,V.jsx)(`div`,{className:`h-1`,style:{backgroundColor:a.color}}),(0,V.jsxs)(`div`,{className:`p-4`,children:[(0,V.jsxs)(`div`,{className:`flex items-center justify-between gap-3 mb-1.5`,children:[(0,V.jsxs)(`div`,{className:`flex items-center gap-3 min-w-0`,children:[(0,V.jsx)(`div`,{className:`w-11 h-11 rounded-xl flex items-center justify-center text-xl flex-shrink-0`,style:{backgroundColor:`${a.color}20`},children:a.icon}),(0,V.jsx)(`span`,{className:`text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide`,children:a.label})]}),(0,V.jsx)(`span`,{className:`px-2 py-0.5 rounded-md text-xs font-semibold text-white flex-shrink-0`,style:{backgroundColor:o.color},children:o.label})]}),(0,V.jsx)(`h3`,{className:`font-bold text-gray-900 dark:text-gray-100 text-lg overflow-x-auto whitespace-nowrap mb-3 pr-1`,title:e.title,children:e.title}),e.description&&(0,V.jsx)(`p`,{className:`text-sm text-gray-600 mb-3 line-clamp-2`,children:e.description}),(0,V.jsxs)(`div`,{className:`space-y-1.5`,children:[e.date&&(0,V.jsxs)(`div`,{className:`flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400`,children:[(0,V.jsx)(f,{className:`w-3.5 h-3.5 text-gray-400 flex-shrink-0`}),(0,V.jsx)(`span`,{children:(()=>e.date?e.endDate?`${E(e.date)} â€“ ${E(e.endDate)}`:E(e.date):null)()})]}),e.time&&(0,V.jsxs)(`div`,{className:`flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400`,children:[(0,V.jsx)(n,{className:`w-3.5 h-3.5 text-gray-400 flex-shrink-0`}),(0,V.jsx)(`span`,{children:e.time})]}),(e.location||e.country&&e.country!==`general`)&&(0,V.jsxs)(`div`,{className:`flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400 flex-wrap`,children:[(0,V.jsx)(i,{className:`w-3.5 h-3.5 text-gray-400 flex-shrink-0`}),e.location&&(0,V.jsx)(`span`,{className:`line-clamp-1`,children:e.location}),e.location&&e.country&&e.country!==`general`&&` - `,e.country&&e.country!==`general`&&h[e.country]&&(0,V.jsx)(`span`,{className:`whitespace-nowrap`,children:h[e.country].name})]}),e.provider&&(0,V.jsxs)(`div`,{className:`flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400`,children:[(0,V.jsx)(`span`,{className:`font-medium`,children:`Provedor:`}),(0,V.jsx)(`span`,{children:e.provider})]}),e.confirmationCode&&(0,V.jsxs)(`div`,{className:`flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400`,children:[(0,V.jsx)(R,{className:`w-3.5 h-3.5 flex-shrink-0`}),(0,V.jsx)(`span`,{className:`font-medium`,children:`CÃ³digo:`}),(0,V.jsx)(`span`,{className:`font-mono`,children:e.confirmationCode})]})]}),(e.bookingUrl||e.documentUrl)&&(0,V.jsxs)(`div`,{className:`flex flex-wrap gap-2 mb-3`,children:[e.bookingUrl&&(0,V.jsxs)(`a`,{href:e.bookingUrl,target:`_blank`,rel:`noopener noreferrer`,onClick:e=>e.stopPropagation(),className:`inline-flex items-center gap-1.5 px-2.5 py-1.5 text-xs font-medium text-blue-600 bg-blue-50 rounded-lg hover:bg-blue-100 transition-colors`,children:[(0,V.jsx)(F,{className:`w-3 h-3`}),`Reserva`]}),e.documentUrl&&(0,V.jsxs)(`a`,{href:e.documentUrl,target:`_blank`,rel:`noopener noreferrer`,onClick:e=>e.stopPropagation(),className:`inline-flex items-center gap-1.5 px-2.5 py-1.5 text-xs font-medium text-indigo-600 bg-indigo-50 rounded-lg hover:bg-indigo-100 transition-colors`,children:[(0,V.jsx)(r,{className:`w-3 h-3`}),`Documento`]})]})]})]})}function U({onFileUploaded:e,currentFile:t,currentFileId:n,label:r=`Documento`,accept:i=`.pdf,.jpg,.jpeg,.png,.xls,.xlsx`,maxSizeMB:a=10}){let[o,s]=(0,B.useState)(!1),[c,l]=(0,B.useState)(!1),[u,d]=(0,B.useState)(null),f=async t=>{let n=t.target.files?.[0];if(!n)return;d(null);let r=a*1024*1024;if(n.size>r){d(`Arquivo muito grande. MÃ¡ximo: ${a}MB`);return}if(![`application/pdf`,`image/jpeg`,`image/jpg`,`image/png`,`application/vnd.ms-excel`,`application/vnd.openxmlformats-officedocument.spreadsheetml.sheet`].includes(n.type)){d(`Tipo de arquivo nÃ£o suportado. Use PDF, JPG, PNG ou Excel.`);return}s(!0);try{let t=await m(n),r=await y(n.name,t,n.type);if(r.success&&r.fileUrl&&r.fileId)e(r.fileUrl,r.fileId),d(null);else throw Error(r.message||`Erro ao fazer upload`)}catch(e){console.error(`Upload error:`,e),d(`Erro ao fazer upload do arquivo. Tente novamente.`)}finally{s(!1),t.target.value=``}},m=e=>new Promise((t,n)=>{let r=new FileReader;r.readAsDataURL(e),r.onload=()=>{let e=r.result.split(`,`)[1];t(e)},r.onerror=e=>n(e)});return(0,V.jsxs)(`div`,{className:`space-y-2`,children:[(0,V.jsx)(`label`,{className:`block text-sm font-medium text-gray-700`,children:r}),t?(0,V.jsxs)(`div`,{className:`flex items-center gap-2 p-3 bg-blue-50 border-2 border-blue-200 rounded-lg`,children:[(0,V.jsx)(L,{className:`w-5 h-5 text-blue-600 flex-shrink-0`}),(0,V.jsx)(`a`,{href:t,target:`_blank`,rel:`noopener noreferrer`,className:`flex-1 text-sm text-blue-600 hover:underline truncate`,title:t,children:(e=>{if(!e)return``;if(e.includes(`drive.google.com`))return`Documento no Google Drive`;try{return new URL(e).pathname.split(`/`).pop()||`Documento anexado`}catch{return`Documento anexado`}})(t)}),(0,V.jsx)(`button`,{type:`button`,onClick:async()=>{if(n){l(!0);try{await v(n)}catch(e){console.error(`Error deleting file from Drive:`,e)}finally{l(!1)}}e(``,``),d(null)},disabled:c,className:`p-1 hover:bg-blue-100 rounded transition-colors disabled:opacity-50 disabled:cursor-not-allowed`,title:`Remover arquivo`,children:c?(0,V.jsx)(p,{className:`w-4 h-4 text-blue-600 animate-spin`}):(0,V.jsx)(S,{className:`w-4 h-4 text-blue-600`})})]}):(0,V.jsxs)(`div`,{className:`relative`,children:[(0,V.jsx)(`input`,{type:`file`,autoComplete:`off`,onChange:f,disabled:o,className:`hidden`,id:`file-upload-${r}`,accept:i}),(0,V.jsx)(`label`,{htmlFor:`file-upload-${r}`,className:`
              flex items-center justify-center gap-2 w-full p-4 
              border-2 border-dashed rounded-lg cursor-pointer
              transition-all
              ${o?`border-blue-400 bg-blue-50 cursor-not-allowed`:`border-gray-300 hover:border-blue-400 hover:bg-blue-50`}
            `,children:o?(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(p,{className:`w-5 h-5 text-blue-600 animate-spin`}),(0,V.jsx)(`span`,{className:`text-sm text-blue-600`,children:`Fazendo upload...`})]}):(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(z,{className:`w-5 h-5 text-gray-400`}),(0,V.jsx)(`span`,{className:`text-sm text-gray-600`,children:`Clique para anexar arquivo`})]})})]}),u&&(0,V.jsxs)(`p`,{className:`text-xs text-red-600 flex items-center gap-1`,children:[(0,V.jsx)(`span`,{children:`âš ï¸`}),u]}),!u&&(0,V.jsxs)(`p`,{className:`text-xs text-gray-500`,children:[`PDF, JPG, PNG ou Excel â€¢ MÃ¡ximo: `,a,`MB`]})]})}function W({reservation:e,isOpen:n,onClose:r,onSave:i}){let[a,o]=(0,B.useState)(!1),[s,c]=(0,B.useState)(``),[l,f]=(0,B.useState)(``),{register:p,handleSubmit:m,watch:_,setValue:y,reset:S,control:C}=D({defaultValues:{type:`activity`,title:``,description:``,confirmationCode:``,date:``,endDate:``,time:``,location:``,provider:``,bookingUrl:``,documentUrl:``,status:`pending`,notes:``,country:void 0,attractionId:void 0}}),w=_(),{attractions:E}=x();return(0,B.useEffect)(()=>{if(n)if(e){let t=e.documentFileId||``;S({type:e.type,title:e.title,description:e.description||``,confirmationCode:e.confirmationCode||``,date:e.date?b(e.date):``,endDate:e.endDate?b(e.endDate):``,time:e.time||``,location:e.location||``,provider:e.provider||``,bookingUrl:e.bookingUrl||``,documentUrl:e.documentUrl||``,status:e.status,notes:e.notes||``,country:e.country,attractionId:e.attractionId}),c(t),f(t)}else S({type:`activity`,title:``,description:``,confirmationCode:``,date:``,endDate:``,time:``,location:``,provider:``,bookingUrl:``,documentUrl:``,status:`pending`,notes:``,country:void 0,attractionId:void 0}),c(``),f(``)},[n,e,S]),(0,V.jsx)(k,{isOpen:n,onClose:async()=>{if(s&&s!==l)try{await v(s)}catch(e){console.error(`Error cleaning up unsaved file:`,e)}r()},title:e?`Editar Reserva`:`Nova Reserva`,type:e?`edit`:`create`,onSave:m(async e=>{o(!0);try{await Promise.resolve(i({type:e.type,title:e.title.trim(),description:e.description.trim()||void 0,confirmationCode:e.confirmationCode.trim()||void 0,date:e.date||void 0,endDate:e.endDate||void 0,time:e.time||void 0,location:e.location.trim()||void 0,provider:e.provider.trim()||void 0,bookingUrl:e.bookingUrl.trim()||void 0,documentUrl:e.documentUrl.trim()||void 0,documentFileId:s||void 0,status:e.status,notes:e.notes.trim()||void 0,country:e.country,attractionId:e.attractionId})),r()}finally{o(!1)}}),loading:a,loadingText:`Salvando...`,size:`lg`,children:(0,V.jsxs)(`div`,{className:`space-y-4`,children:[(0,V.jsxs)(`div`,{className:`grid grid-cols-1 md:grid-cols-2 gap-3`,children:[(0,V.jsxs)(`div`,{children:[(0,V.jsx)(`label`,{className:`block text-sm font-bold text-gray-900 dark:text-gray-100 mb-1.5`,children:`Tipo *`}),(0,V.jsx)(t,{value:d[w.type].label,onChange:e=>{let t=Object.entries(d).find(([t,n])=>n.label===e)?.[0];t&&y(`type`,t)},options:Object.values(d).map(e=>e.label)})]}),(0,V.jsxs)(`div`,{children:[(0,V.jsx)(`label`,{className:`block text-sm font-bold text-gray-900 dark:text-gray-100 mb-1.5`,children:`Status *`}),(0,V.jsx)(t,{value:u[w.status].label,onChange:e=>{let t=Object.entries(u).find(([t,n])=>n.label===e)?.[0];t&&y(`status`,t)},options:Object.values(u).map(e=>e.label)})]})]}),(0,V.jsxs)(`div`,{children:[(0,V.jsx)(`label`,{className:`block text-sm font-bold text-gray-900 dark:text-gray-100 mb-1.5`,children:`TÃ­tulo *`}),(0,V.jsx)(`input`,{type:`text`,required:!0,autoComplete:`off`,...p(`title`,{required:!0}),className:`w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 focus:ring-2 focus:ring-gray-300 dark:focus:ring-gray-500 focus:outline-none placeholder:text-gray-400 dark:placeholder:text-gray-500 text-gray-900 dark:text-gray-100`,placeholder:`Ex: Voo SÃ£o Paulo â†’ TÃ³quio`})]}),(0,V.jsxs)(`div`,{children:[(0,V.jsx)(`label`,{className:`block text-sm font-bold text-gray-900 dark:text-gray-100 mb-1.5`,children:`DescriÃ§Ã£o`}),(0,V.jsx)(`input`,{type:`text`,autoComplete:`off`,...p(`description`),className:`w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 focus:ring-2 focus:ring-gray-300 dark:focus:ring-gray-500 focus:outline-none placeholder:text-gray-400 dark:placeholder:text-gray-500 text-gray-900 dark:text-gray-100`,placeholder:`Detalhes adicionais...`})]}),(0,V.jsxs)(`div`,{className:`pt-4 border-t border-gray-200 dark:border-gray-700`,children:[(0,V.jsx)(`h3`,{className:`text-sm font-bold text-gray-900 dark:text-gray-100 mb-2.5`,children:`ðŸ“… Datas e HorÃ¡rio`}),(0,V.jsxs)(`div`,{className:`grid grid-cols-1 md:grid-cols-3 gap-3`,children:[(0,V.jsxs)(`div`,{children:[(0,V.jsx)(`label`,{className:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5`,children:`Data`}),(0,V.jsx)(O,{name:`date`,control:C,render:({field:e})=>(0,V.jsx)(P,{value:e.value?T(e.value):void 0,onChange:t=>e.onChange(t?g(t):``)})})]}),(0,V.jsxs)(`div`,{children:[(0,V.jsx)(`label`,{className:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5`,children:`Data Fim`}),(0,V.jsx)(O,{name:`endDate`,control:C,render:({field:e})=>(0,V.jsx)(P,{value:e.value?T(e.value):void 0,onChange:t=>e.onChange(t?g(t):``)})})]}),(0,V.jsxs)(`div`,{children:[(0,V.jsx)(`label`,{className:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5`,children:`HorÃ¡rio`}),(0,V.jsx)(`input`,{type:`time`,autoComplete:`off`,...p(`time`),className:`w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 focus:ring-2 focus:ring-gray-300 dark:focus:ring-gray-500 focus:outline-none text-gray-900 dark:text-gray-100`})]})]})]}),(0,V.jsxs)(`div`,{className:`pt-4 border-t border-gray-200 dark:border-gray-700`,children:[(0,V.jsx)(`h3`,{className:`text-sm font-bold text-gray-900 dark:text-gray-100 mb-2.5`,children:`ðŸ¢ Provedor e ConfirmaÃ§Ã£o`}),(0,V.jsxs)(`div`,{className:`grid grid-cols-1 md:grid-cols-2 gap-3`,children:[(0,V.jsxs)(`div`,{children:[(0,V.jsx)(`label`,{className:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5`,children:`Provedor`}),(0,V.jsx)(`input`,{type:`text`,autoComplete:`off`,...p(`provider`),className:`w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 focus:ring-2 focus:ring-gray-300 dark:focus:ring-gray-500 focus:outline-none focus:outline-none placeholder:text-gray-400 dark:placeholder:text-gray-500 text-gray-900 dark:text-gray-100`,placeholder:`Ex: LATAM, Booki...`})]}),(0,V.jsxs)(`div`,{children:[(0,V.jsx)(`label`,{className:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5`,children:`CÃ³digo`}),(0,V.jsx)(`input`,{type:`text`,autoComplete:`off`,...p(`confirmationCode`),className:`w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 focus:ring-2 focus:ring-gray-300 dark:focus:ring-gray-500 focus:outline-none focus:outline-none placeholder:text-gray-400 dark:placeholder:text-gray-500 text-gray-900 dark:text-gray-100 font-mono uppercase`,placeholder:`ABC123`})]})]})]}),(0,V.jsxs)(`div`,{className:`pt-4 border-t border-gray-200 dark:border-gray-700`,children:[(0,V.jsx)(`h3`,{className:`text-sm font-bold text-gray-900 dark:text-gray-100 mb-2.5`,children:`ðŸ“ LocalizaÃ§Ã£o`}),(0,V.jsxs)(`div`,{className:`space-y-4`,children:[(0,V.jsxs)(`div`,{children:[(0,V.jsx)(`label`,{className:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5`,children:`Local`}),(0,V.jsx)(`input`,{type:`text`,autoComplete:`off`,...p(`location`),className:`w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 focus:ring-2 focus:ring-gray-300 dark:focus:ring-gray-500 focus:outline-none focus:outline-none placeholder:text-gray-400 dark:placeholder:text-gray-500 text-gray-900 dark:text-gray-100`,placeholder:`Ex: Aeroporto de Narita`})]}),(0,V.jsxs)(`div`,{className:`grid grid-cols-1 md:grid-cols-2 gap-3`,children:[(0,V.jsxs)(`div`,{children:[(0,V.jsx)(`label`,{className:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5`,children:`PaÃ­s`}),(0,V.jsx)(t,{value:w.country?`${h[w.country].flag} ${h[w.country].name}`:``,onChange:e=>{if(!e){y(`country`,void 0);return}let t=Object.entries(h).find(([t,n])=>`${n.flag} ${n.name}`===e)?.[0];t&&y(`country`,t)},options:[``,...Object.entries(h).map(([e,t])=>`${t.flag} ${t.name}`)].filter(Boolean),placeholder:`Selecione...`})]}),(0,V.jsxs)(`div`,{children:[(0,V.jsxs)(`label`,{className:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5`,children:[`Vincular AtraÃ§Ã£o `,(0,V.jsx)(`span`,{className:`text-xs text-gray-500`,children:`(opcional)`})]}),(0,V.jsx)(O,{name:`attractionId`,control:C,render:({field:e})=>(0,V.jsx)(t,{value:w.attractionId&&E.find(e=>e.id===w.attractionId)?.name||``,onChange:t=>{if(!t){e.onChange(void 0);return}let n=E.find(e=>e.name===t);n&&e.onChange(n.id)},options:[``,...E.map(e=>e.name)],placeholder:`Nenhuma...`})})]})]})]})]}),(0,V.jsxs)(`div`,{className:`pt-4 border-t border-gray-200 dark:border-gray-700`,children:[(0,V.jsx)(`h3`,{className:`text-sm font-bold text-gray-900 dark:text-gray-100 mb-2.5`,children:`ðŸ”— Links`}),(0,V.jsxs)(`div`,{children:[(0,V.jsx)(`label`,{className:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5`,children:`Link da Reserva`}),(0,V.jsx)(`input`,{type:`url`,autoComplete:`off`,...p(`bookingUrl`),className:`w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 focus:ring-2 focus:ring-gray-300 dark:focus:ring-gray-500 focus:outline-none focus:outline-none placeholder:text-gray-400 dark:placeholder:text-gray-500 text-gray-900 dark:text-gray-100`,placeholder:`https://booking.com/...`})]})]}),(0,V.jsxs)(`div`,{className:`pt-4 border-t border-gray-200 dark:border-gray-700`,children:[(0,V.jsx)(`h3`,{className:`text-sm font-bold text-gray-900 dark:text-gray-100 mb-2.5`,children:`ðŸ“„ Documento`}),(0,V.jsxs)(`div`,{className:`space-y-4`,children:[(0,V.jsx)(U,{label:`Comprovante ou documento`,currentFile:w.documentUrl,currentFileId:s,onFileUploaded:(e,t)=>{y(`documentUrl`,e),c(t)}}),(0,V.jsxs)(`div`,{className:`relative`,children:[(0,V.jsx)(`div`,{className:`absolute inset-0 flex items-center`,children:(0,V.jsx)(`div`,{className:`w-full border-t border-gray-200 dark:border-gray-700`})}),(0,V.jsx)(`div`,{className:`relative flex justify-center text-xs`,children:(0,V.jsx)(`span`,{className:`px-2 bg-white dark:bg-gray-800 text-gray-500 dark:text-gray-400`,children:`ou cole um link`})})]}),(0,V.jsx)(`input`,{type:`url`,autoComplete:`off`,value:w.documentUrl,onChange:e=>y(`documentUrl`,e.target.value),className:`w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 focus:ring-2 focus:ring-gray-300 dark:focus:ring-gray-500 focus:outline-none focus:outline-none placeholder:text-gray-400 dark:placeholder:text-gray-500 text-gray-900 dark:text-gray-100 text-sm`,placeholder:`https://drive.google.com/...`})]})]}),(0,V.jsxs)(`div`,{className:`pt-4 border-t border-gray-200 dark:border-gray-700`,children:[(0,V.jsx)(`label`,{className:`block text-sm font-bold text-gray-900 dark:text-gray-100 mb-1.5`,children:`ðŸ“ ObservaÃ§Ãµes`}),(0,V.jsx)(`textarea`,{...p(`notes`),rows:3,autoComplete:`off`,className:`w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 focus:ring-2 focus:ring-gray-300 dark:focus:ring-gray-500 focus:outline-none focus:outline-none placeholder:text-gray-400 dark:placeholder:text-gray-500 text-gray-900 dark:text-gray-100 resize-none`,placeholder:`InformaÃ§Ãµes adicionais importantes...`})]})]})})}function G({reservation:e,isOpen:t,onClose:n,onEdit:r,onDelete:i}){let a=j(t);if((0,B.useEffect)(()=>{if(!t)return;function e(e){e.key===`Escape`&&n()}return document.addEventListener(`keydown`,e),()=>document.removeEventListener(`keydown`,e)},[t,n]),!t||!e)return null;let s=d[e.type],l=u[e.status],f=()=>{n(),r(e)},p=()=>{n(),i(e)};return(0,V.jsxs)(`div`,{className:`fixed inset-0 z-[600] flex justify-center items-end md:items-center`,role:`dialog`,"aria-modal":`true`,"aria-labelledby":`reservation-actions-title`,children:[(0,V.jsx)(`div`,{className:`absolute inset-0 bg-black/40 backdrop-blur-sm`,onClick:n,"aria-hidden":`true`}),(0,V.jsxs)(`div`,{ref:a,className:`relative w-full max-w-sm bg-white dark:bg-gray-800 rounded-t-2xl md:rounded-2xl shadow-2xl flex flex-col`,children:[(0,V.jsxs)(`div`,{className:`flex items-center justify-between px-4 py-3 border-b border-gray-200 dark:border-gray-700`,children:[(0,V.jsx)(`h2`,{id:`reservation-actions-title`,className:`text-lg font-semibold text-gray-900 dark:text-gray-100 truncate pr-2`,children:e.title}),(0,V.jsx)(`button`,{type:`button`,onClick:n,"aria-label":`Fechar`,className:`p-2 rounded-lg text-gray-500 hover:text-gray-700 dark:hover:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700`,children:(0,V.jsx)(S,{className:`w-5 h-5`})})]}),(0,V.jsxs)(`div`,{className:`px-4 py-3 flex items-center gap-2 text-sm text-gray-500 dark:text-gray-400`,children:[(0,V.jsx)(`span`,{style:{color:s.color},children:s.icon}),(0,V.jsx)(`span`,{children:s.label}),(0,V.jsx)(`span`,{className:`px-2 py-0.5 rounded-md text-xs font-semibold text-white`,style:{backgroundColor:l.color},children:l.label})]}),(0,V.jsxs)(`div`,{className:`flex gap-3 px-4 py-4 border-t border-gray-200 dark:border-gray-700`,children:[(0,V.jsxs)(`button`,{type:`button`,onClick:f,className:`flex-1 flex items-center justify-center gap-2 px-4 py-2.5 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none`,children:[(0,V.jsx)(o,{className:`w-4 h-4`}),`Editar`]}),(0,V.jsxs)(`button`,{type:`button`,onClick:p,className:`flex-1 flex items-center justify-center gap-2 px-4 py-2.5 text-sm font-medium text-white bg-red-600 hover:bg-red-700 rounded-lg focus:ring-2 focus:ring-red-500 focus:outline-none`,children:[(0,V.jsx)(c,{className:`w-4 h-4`}),`Excluir`]})]})]})]})}function K({reservations:e,onUpdate:t,onCreate:n,onDelete:r,isLoading:i=!1}){let[a,o]=(0,B.useState)(!1),[s,c]=(0,B.useState)(),[l,u]=(0,B.useState)(null),[d,f]=(0,B.useState)(null);function p(e){if(!e||!e.trim())return 1440;let t=e.trim().split(`:`).map(Number),n=t[0]??0,r=t[1]??0,i=t[2]??0;return n*60+r+i/60}let m=(0,B.useMemo)(()=>{let t=[],n={};e.forEach(e=>{if(!e.date)t.push(e);else{let t=b(e.date);n[t]||(n[t]=[]),n[t].push(e)}});let r=Object.keys(n).sort((e,t)=>T(e).getTime()-T(t).getTime());return r.forEach(e=>{n[e].sort((e,t)=>p(e.time)-p(t.time))}),{preTripItems:t,dateGrouped:n,orderedDateKeys:r}},[e]),h=(0,B.useMemo)(()=>({total:e.length,confirmed:e.filter(e=>e.status===`confirmed`).length,pending:e.filter(e=>e.status===`pending`).length,completed:e.filter(e=>e.status===`completed`).length}),[e]),g=()=>{c(void 0),o(!1)},_=async e=>{s?await Promise.resolve(t({...e,id:s.id})):await Promise.resolve(n(e))},v=async()=>{l&&(await r(l.id),u(null))},y=e=>{f(e)};return i?null:(0,V.jsxs)(`div`,{children:[h.total>0&&(0,V.jsxs)(`div`,{className:`mb-6 p-4 rounded-2xl bg-gradient-to-r from-indigo-50 to-purple-50 dark:from-indigo-900/30 dark:to-purple-900/30 border border-indigo-100 dark:border-indigo-800`,children:[(0,V.jsxs)(`div`,{className:`flex items-center gap-3 mb-3`,children:[(0,V.jsx)(`div`,{className:`w-10 h-10 rounded-xl bg-indigo-100 flex items-center justify-center`,children:(0,V.jsx)(I,{className:`w-5 h-5 text-indigo-600`})}),(0,V.jsxs)(`div`,{children:[(0,V.jsx)(`p`,{className:`text-sm font-medium text-gray-600 dark:text-gray-400`,children:`Status`}),(0,V.jsx)(`p`,{className:`text-xs text-gray-500 dark:text-gray-400`,children:`Resumo das reservas`})]})]}),(0,V.jsxs)(`div`,{className:`flex flex-wrap gap-2`,children:[(0,V.jsxs)(`span`,{className:`px-3 py-1.5 rounded-lg bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 text-sm font-medium text-gray-700 dark:text-gray-300 shadow-sm`,children:[`Total `,(0,V.jsx)(`span`,{className:`font-bold text-gray-900 dark:text-gray-100`,children:h.total})]}),(0,V.jsxs)(`span`,{className:`px-3 py-1.5 rounded-lg bg-green-100 text-green-800 text-sm font-medium`,children:[`Confirmado `,(0,V.jsx)(`span`,{className:`font-bold`,children:h.confirmed})]}),(0,V.jsxs)(`span`,{className:`px-3 py-1.5 rounded-lg bg-amber-100 text-amber-800 text-sm font-medium`,children:[`Pendente `,(0,V.jsx)(`span`,{className:`font-bold`,children:h.pending})]}),(0,V.jsxs)(`span`,{className:`px-3 py-1.5 rounded-lg bg-gray-100 text-gray-700 text-sm font-medium`,children:[`ConcluÃ­do `,(0,V.jsx)(`span`,{className:`font-bold`,children:h.completed})]})]})]}),(0,V.jsx)(`div`,{className:`space-y-6`,children:e.length===0?(0,V.jsx)(A,{icon:`ðŸŽ«`,title:`Nenhuma reserva encontrada`,description:`Comece adicionando suas reservas, documentos e ingressos!`}):(0,V.jsxs)(V.Fragment,{children:[m.preTripItems.length>0&&(0,V.jsxs)(`section`,{className:`space-y-3`,children:[(0,V.jsxs)(`div`,{className:`flex items-center gap-2 px-4 py-2 rounded-xl bg-white dark:bg-gray-800 border border-indigo-200 dark:border-indigo-800 shadow-sm w-fit`,children:[(0,V.jsx)(`div`,{className:`w-2 h-2 rounded-full bg-indigo-500`}),(0,V.jsx)(`h3`,{className:`text-base font-semibold text-gray-900 dark:text-gray-100`,children:`PrÃ©-Viagem`}),(0,V.jsxs)(`span`,{className:`text-sm text-gray-500 dark:text-gray-400`,children:[m.preTripItems.length,` `,m.preTripItems.length===1?`item`:`itens`]})]}),(0,V.jsx)(`div`,{className:`grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3`,children:m.preTripItems.map(e=>(0,V.jsx)(H,{reservation:e,onClick:y},e.id))})]}),m.orderedDateKeys.map(e=>{let t=m.dateGrouped[e];return(0,V.jsxs)(`section`,{className:`space-y-3`,children:[(0,V.jsxs)(`div`,{className:`flex items-center gap-2 px-4 py-2 rounded-xl bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 shadow-sm w-fit mb-3`,children:[(0,V.jsx)(`span`,{className:`text-lg`,"aria-hidden":!0,children:`ðŸ“…`}),(0,V.jsx)(`span`,{className:`text-base font-semibold text-gray-900 dark:text-gray-100`,children:E(e)}),(0,V.jsxs)(`span`,{className:`text-sm text-gray-400 dark:text-gray-500`,children:[`Â· `,t.length,` `,t.length===1?`reserva`:`reservas`]})]}),(0,V.jsx)(`div`,{className:`grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3`,children:t.map(e=>(0,V.jsx)(H,{reservation:e,onClick:y},e.id))})]},e)})]})}),(0,V.jsx)(W,{reservation:s,isOpen:a,onClose:g,onSave:_}),(0,V.jsx)(G,{reservation:d,isOpen:!!d,onClose:()=>f(null),onEdit:e=>{f(null),c(e),o(!0)},onDelete:e=>{f(null),u(e)}}),(0,V.jsx)(N,{isOpen:!!l,onClose:()=>u(null),title:`Excluir reserva`,message:l?(0,V.jsxs)(V.Fragment,{children:[`Tem certeza que deseja excluir "`,l.title,`"?`]}):null,onConfirm:v})]})}function q(){let[t,n]=(0,B.useState)(!1),{country:r,reservations:i,isReady:o}=x(),c=(0,B.useMemo)(()=>r===`all`?i:i.filter(e=>e.country===r),[i,r]),{createReservation:l,updateReservation:u,deleteReservation:d}=_(),f=C(),p=async e=>{try{await l(e),f.success(`Reserva criada com sucesso!`)}catch(e){console.error(`Error creating reservation:`,e),f.error(`Erro ao criar reserva`)}};return(0,V.jsxs)(`div`,{className:`min-h-screen bg-gray-50 dark:bg-gray-900 pb-20 md:pb-6`,children:[(0,V.jsx)(e,{title:`Reservas`,subtitle:`Gerencie suas reservas e documentos`,filter:(0,V.jsx)(a,{showDayFilter:!1})}),(0,V.jsx)(`main`,{className:`max-w-6xl mx-auto px-4 md:px-6 py-6 mb-12`,children:(0,V.jsx)(K,{reservations:c,onCreate:p,onUpdate:async e=>{try{await u(e),f.success(`Reserva atualizada com sucesso!`)}catch(e){console.error(`Error updating reservation:`,e),f.error(`Erro ao atualizar reserva`)}},onDelete:async e=>{try{await d(e),f.success(`Reserva excluÃ­da com sucesso!`)}catch(e){console.error(`Error deleting reservation:`,e),f.error(`Erro ao excluir reserva`)}},isLoading:!o})}),(0,V.jsx)(M,{onClick:()=>n(!0),icon:(0,V.jsx)(s,{className:`w-6 h-6`}),label:`Adicionar`}),t&&(0,V.jsx)(W,{isOpen:t,onClose:()=>n(!1),onSave:async e=>{await p(e),n(!1)}})]})}export{q as default};