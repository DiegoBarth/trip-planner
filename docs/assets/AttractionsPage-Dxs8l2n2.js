const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ModalAttraction-xunBW8ar.js","assets/index-Ck6pwFcT.js","assets/router-BfVF4rnG.js","assets/dnd-kit-DVJe_fUm.js","assets/rolldown-runtime-CWU8vmCm.js","assets/google-oauth-CCECc3rE.js","assets/recharts-CxBv7Za6.js","assets/react-query-NYR1e9Ja.js","assets/react-ClFNaAWa.js","assets/lucide-DbbAxtoz.js","assets/index-T_OXkQgP.css","assets/DateField-DITZzuhH.js","assets/DateField-Chw94eNX.css","assets/ModalBase-B22Jo3QI.js","assets/useFocusTrap-YsrMhjmb.js","assets/CustomSelect-BsRsG-eJ.js","assets/AttractionsGridWithDnD-283pw_6c.js","assets/AttractionCard-DCt0C7ap.js","assets/EmptyState-OSQ5STw6.js","assets/useAttractionsGrouped-DXVnuaK_.js","assets/useMediaQuery-ByOPuZXL.js"])))=>i.map(i=>d[i]);
import{p as e}from"./dnd-kit-DVJe_fUm.js";import{t}from"./react-ClFNaAWa.js";import{s as n}from"./router-BfVF4rnG.js";import{h as r,k as i}from"./lucide-DbbAxtoz.js";import"./react-query-NYR1e9Ja.js";import"./recharts-CxBv7Za6.js";import{D as a,_ as o,c as s,h as c,l,r as u,s as d}from"./index-Ck6pwFcT.js";import{t as f}from"./EmptyState-OSQ5STw6.js";import{t as p}from"./AttractionCard-DCt0C7ap.js";import"./useMediaQuery-ByOPuZXL.js";import{t as m}from"./useAttractionsGrouped-DXVnuaK_.js";import"./useFocusTrap-YsrMhjmb.js";import"./CustomSelect-BsRsG-eJ.js";import"./FilterSheetContext-CG7OZ106.js";import{t as h}from"./PageHeader-DZr-5pOf.js";import{t as g}from"./CountryFilter-1U0cjIaQ.js";import{n as _,t as v}from"./ConfirmModal-C65sF53Z.js";var y=e(),b=t();function x({attractions:e,emptyTitle:t,emptyDescription:n,onToggleVisited:r,onDelete:i,onEdit:a}){let{displayAttractions:o,isAllDaysView:s,isReadyForTotals:c,getCountryTotalCouplePrice:l,getCountryTotalPriceBrl:u,getDayTotalCouplePrice:d,getDayTotalPriceBrl:h,sortedCountryEntries:g,COUNTRIES:_,formatDate:v,formatCurrency:y}=m(e);return o.length===0?(0,b.jsx)(f,{icon:`ðŸ—ºï¸`,title:t,description:n}):(0,b.jsx)(`div`,{className:`space-y-10`,children:g.map(([e,t])=>{let n=l(t),o=u(t);return(0,b.jsxs)(`section`,{className:`space-y-6`,children:[(0,b.jsxs)(`div`,{className:`flex items-center gap-3 flex-wrap`,children:[(0,b.jsxs)(`div`,{className:`flex items-center gap-2 px-4 py-2.5 rounded-xl bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 shadow-sm w-fit`,children:[(0,b.jsx)(`span`,{className:`text-xl`,"aria-hidden":!0,children:_[e]?.flag??`ðŸŒ`}),(0,b.jsx)(`h2`,{className:`text-base font-semibold text-gray-900 dark:text-gray-100`,children:_[e]?.name??e})]}),s&&c&&n&&(0,b.jsxs)(`div`,{className:`flex flex-col`,children:[(0,b.jsx)(`span`,{className:`text-md font-semibold text-emerald-600 dark:text-emerald-400`,children:n}),(0,b.jsxs)(`span`,{className:`text-sm font-medium text-gray-500 dark:text-gray-400`,children:[`(`,y(o),`)`]})]})]}),Object.entries(t).sort(([e],[t])=>Number(e)-Number(t)).map(([t,n])=>{let o=d(n),s=h(n);return(0,b.jsxs)(`section`,{children:[(0,b.jsxs)(`div`,{className:`flex items-center justify-between gap-3 flex-wrap`,children:[(0,b.jsxs)(`div`,{className:`flex items-center gap-2 px-4 py-2 rounded-xl bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 shadow-sm mb-3 w-fit`,children:[(0,b.jsx)(`span`,{className:`text-lg`,"aria-hidden":!0,children:`ðŸ“…`}),(0,b.jsxs)(`h3`,{className:`text-base font-semibold text-gray-900 dark:text-gray-100`,children:[`Dia `,t]}),n[0]?.date&&(0,b.jsx)(`span`,{className:`text-sm text-gray-500 dark:text-gray-400`,children:v(n[0].date)}),(0,b.jsxs)(`span`,{className:`text-sm text-gray-400 dark:text-gray-500`,children:[`Â· `,n.length,` `,n.length===1?`atraÃ§Ã£o`:`atraÃ§Ãµes`]})]}),o&&(0,b.jsxs)(`div`,{className:`flex flex-col h-[58px]`,children:[(0,b.jsx)(`span`,{className:`text-md font-medium text-emerald-600 dark:text-emerald-400`,children:o}),(0,b.jsxs)(`span`,{className:`text-sm font-medium`,children:[`(`,y(s),`)`]})]})]}),(0,b.jsx)(`div`,{className:`grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3`,children:n.map((e,t)=>(0,b.jsx)(p,{attraction:e,priority:t===0,onCheckVisited:r,onDelete:i,onClick:()=>a?.(e)},e.id))})]},`${e}-${t}`)})]},e)})})}var S=(0,y.lazy)(()=>n(()=>import(`./ModalAttraction-xunBW8ar.js`),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15])).then(e=>({default:e.ModalAttraction}))),C=(0,y.lazy)(()=>n(()=>import(`./AttractionsGridWithDnD-283pw_6c.js`),__vite__mapDeps([16,1,2,3,4,5,6,7,8,9,10,17,18,19,20])).then(e=>({default:e.AttractionsGridWithDnD})));function w({attractions:e,isLoading:t,onUpdate:n,onCreate:r,onDelete:a,onToggleVisited:u,onBulkUpdate:d}){let[f,p]=(0,y.useState)(!1),[m,h]=(0,y.useState)(),[g,_]=(0,y.useState)(null),[w,T]=(0,y.useState)(!1),E=async t=>{let i=s(e,t.country,t.date,m?.id),a=m&&m.country===t.country&&c(m.date)===c(t.date)?m?.order??1:l(e,t.country,t.date,m?.id),o={...t,day:i,order:a};m?await n({...o,id:m.id}):await r(o),p(!1),h(void 0)},D=async t=>{if(!d)return;let n=t.filter(t=>{let n=e.find(e=>e.id===t.id);return n&&(n.day!==t.day||n.order!==t.order)});n.length>0&&await d(n)},O=t=>{let n=e.find(e=>e.id===t);n&&_(n)},k=async()=>{g&&(await a(g.id),_(null))},A=(0,y.useMemo)(()=>new Set(e.map(e=>e.country??`outros`)).size,[e])>1,j=(0,y.useMemo)(()=>{if(!e.length)return 0;let t=0;for(let n of e)t+=Number(n.priceInBRL)||0;return t},[e]);return(0,b.jsxs)(`div`,{children:[(0,b.jsxs)(`div`,{className:`flex items-center justify-between gap-4 mb-5 flex-wrap`,children:[(0,b.jsxs)(`div`,{className:`flex items-center justify-between gap-4 flex-wrap w-full`,children:[(0,b.jsxs)(`div`,{className:`flex items-center gap-2 flex-wrap`,children:[(0,b.jsx)(`h2`,{className:`text-lg font-semibold text-gray-900 dark:text-gray-100`,children:`Todas as AtraÃ§Ãµes`}),(0,b.jsxs)(`span`,{className:`text-sm text-gray-500 dark:text-gray-400 font-medium`,children:[e.length,` `,e.length===1?`item`:`itens`]})]}),A&&j&&(0,b.jsx)(`div`,{className:`flex flex-col text-right`,children:(0,b.jsx)(`span`,{className:`text-lg font-semibold text-emerald-600 dark:text-emerald-400`,children:o(j)})})]}),d&&(0,b.jsxs)(`button`,{onClick:()=>T(!w),className:`flex items-center gap-2 px-4 py-2 rounded-xl text-sm font-medium transition-colors ${w?`bg-blue-600 text-white hover:bg-blue-700 shadow-sm`:`bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600`}`,title:w?`Desabilitar reordenaÃ§Ã£o`:`Habilitar reordenaÃ§Ã£o`,"aria-pressed":w,children:[(0,b.jsx)(i,{className:`w-4 h-4`}),w?`ReordenaÃ§Ã£o ativa`:`Reordenar`]})]}),t&&(0,b.jsxs)(`div`,{className:`space-y-6 animate-pulse`,"aria-hidden":!0,children:[(0,b.jsx)(`div`,{className:`h-8 bg-gray-200 dark:bg-gray-700 rounded-lg w-64`}),(0,b.jsx)(`div`,{className:`grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3`,children:[1,2,3,4,5,6].map(e=>(0,b.jsx)(`div`,{className:`aspect-[3/2] rounded-2xl bg-gray-200 dark:bg-gray-700 min-h-[120px]`},e))})]}),!t&&(w&&d?(0,b.jsx)(y.Suspense,{fallback:(0,b.jsxs)(`div`,{className:`space-y-6 animate-pulse`,children:[(0,b.jsx)(`div`,{className:`h-10 bg-gray-200 dark:bg-gray-700 rounded-xl w-48`}),(0,b.jsx)(`div`,{className:`grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3`,children:[1,2,3].map(e=>(0,b.jsx)(`div`,{className:`aspect-[3/2] rounded-2xl bg-gray-200 dark:bg-gray-700`},e))})]}),children:(0,b.jsx)(C,{attractions:e,onToggleVisited:u,onDelete:O,onEdit:e=>{h(e),p(!0)},emptyTitle:`Nenhuma atraÃ§Ã£o encontrada`,emptyDescription:`Comece adicionando sua primeira atraÃ§Ã£o!`,onReorder:D})}):(0,b.jsx)(x,{attractions:e,onToggleVisited:u,onDelete:O,onEdit:e=>{h(e),p(!0)},emptyTitle:`Nenhuma atraÃ§Ã£o encontrada`,emptyDescription:`Comece adicionando sua primeira atraÃ§Ã£o!`})),f&&(0,b.jsx)(y.Suspense,{fallback:null,children:(0,b.jsx)(S,{attraction:m,isOpen:f,onClose:()=>{p(!1),h(void 0)},onSave:E})}),(0,b.jsx)(v,{isOpen:!!g,onClose:()=>_(null),title:`Excluir atraÃ§Ã£o`,message:g?(0,b.jsxs)(b.Fragment,{children:[`Tem certeza que deseja excluir "`,g.name,`"?`]}):null,onConfirm:k})]})}var T=(0,y.lazy)(()=>n(()=>import(`./ModalAttraction-xunBW8ar.js`),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15])).then(e=>({default:e.ModalAttraction})));function E(){let[e,t]=(0,y.useState)(!1),{country:n,day:i,attractions:o,isReady:s}=u(),c=(0,y.useMemo)(()=>i===`all`?o:o.filter(e=>e.day===i),[o,i]),{createAttraction:l,updateAttraction:f,deleteAttraction:p,toggleVisited:m,bulkUpdate:v}=d(n),{success:x,error:S}=a(),C=async e=>{try{await l(e),x(`AtraÃ§Ã£o criada com sucesso!`)}catch(e){S(`Erro ao criar atraÃ§Ã£o`),console.error(e)}};return(0,b.jsxs)(`div`,{className:`min-h-screen bg-gray-50 dark:bg-gray-900 pb-20 md:pb-6`,children:[(0,b.jsx)(h,{title:`AtraÃ§Ãµes`,subtitle:`Planeje seus pontos turÃ­sticos`,filter:(0,b.jsx)(g,{hideGeneralOption:!0})}),(0,b.jsx)(`main`,{className:`max-w-6xl mx-auto px-4 md:px-6 py-6 mb-12`,children:(0,b.jsx)(w,{attractions:c,isLoading:!s,onCreate:C,onUpdate:async e=>{try{await f(e),x(`AtraÃ§Ã£o atualizada com sucesso!`)}catch(e){S(`Erro ao atualizar atraÃ§Ã£o`),console.error(e)}},onDelete:async e=>{try{await p(e),x(`AtraÃ§Ã£o excluÃ­da com sucesso!`)}catch(e){S(`Erro ao excluir atraÃ§Ã£o`),console.error(e)}},onToggleVisited:async e=>{try{await m(e),x(`Status da atraÃ§Ã£o atualizado`)}catch(e){S(`Erro ao atualizar atraÃ§Ã£o`),console.error(e)}},onBulkUpdate:async e=>{try{await v(e),x(`AtraÃ§Ãµes reordenadas com sucesso!`)}catch(e){S(`Erro ao reordenar atraÃ§Ãµes`),console.error(e)}}})}),(0,b.jsx)(_,{onClick:()=>t(!0),icon:(0,b.jsx)(r,{className:`w-6 h-6`}),label:`Adicionar`}),e&&(0,b.jsx)(y.Suspense,{fallback:null,children:(0,b.jsx)(T,{isOpen:e,onClose:()=>t(!1),onSave:async e=>{await C(e),t(!1)}})})]})}export{E as default};