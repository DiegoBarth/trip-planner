import{C as e,S as t,o as n}from"./google-login-button-CK2bO50y.js";import{a as r,n as i,o as a,s as o,t as s}from"./zod-BU_exWGf.js";import{I as c,J as l,M as u,N as d,P as f,V as p}from"./index-DaH4c_0S.js";import{i as m,n as h,r as g,t as _}from"./validateWithToast-X2WZfQ0M.js";import{t as v}from"./DateField-BP8CCOyG.js";const y=a({origin:i([`Diego`,`Pamela`,`Casal`,`Alimentação`,`Atrações`,`Transporte`],{message:`Origem do orçamento é obrigatória`}),description:o().trim().min(1,`A Descrição é obrigatória`),amount:r().positive(`O Valor é obrigatório`),date:s({message:`A Data é obrigatória`})});y.extend({id:r({message:`ID é obrigatório.`})});var b=e(),x=t(),S={origin:`Diego`,description:``,amount:``,date:new Date().toISOString().split(`T`)[0]};function C({budget:e,isOpen:t,onClose:r,onSave:i}){let a=l(),[o,s]=(0,b.useState)(!1),{control:C,register:w,handleSubmit:T,reset:E,setValue:D,watch:O}=m({defaultValues:S}),k=O(`origin`);return(0,b.useEffect)(()=>{if(t)if(e){let t=Math.round(e.amount*100);E({origin:e.origin,description:e.description,amount:c(t.toString()),date:d(e.date)})}else E(S)},[t,e,E]),(0,x.jsx)(h,{isOpen:t,onClose:r,title:e?`Editar Orçamento`:`Novo Orçamento`,type:e?`edit`:`create`,onSave:T(async e=>{let t=typeof e.amount==`string`?u(e.amount):e.amount,n={origin:e.origin,description:e.description,amount:t||0,date:e.date};if(_(n,y,a)){s(!0);try{await Promise.resolve(i(n)),E(S),r()}finally{s(!1)}}}),loading:o,loadingText:`Salvando...`,size:`md`,children:(0,x.jsxs)(`div`,{className:`space-y-4`,children:[(0,x.jsxs)(`div`,{children:[(0,x.jsx)(`label`,{className:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5`,children:`Origem do Orçamento *`}),(0,x.jsx)(`div`,{className:`grid grid-cols-3 gap-2`,children:Object.entries(n).map(([e,t])=>(0,x.jsxs)(`button`,{type:`button`,onClick:()=>D(`origin`,e),className:`p-3 rounded-lg border-2 transition-all focus:ring-2 focus:ring-gray-300 dark:focus:ring-gray-500 focus:outline-none  ${k===e?`border-current shadow-md`:`border-gray-200 dark:border-gray-600 hover:border-gray-300 dark:hover:border-gray-500`}`,style:{borderColor:k===e?t.color:void 0,backgroundColor:k===e?`${t.color}10`:void 0},children:[(0,x.jsx)(`div`,{className:`text-2xl mb-1`,children:t.icon}),(0,x.jsx)(`div`,{className:`font-semibold text-sm text-gray-500 dark:text-gray-400`,style:{color:k===e?t.color:void 0},children:t.label})]},e))})]}),(0,x.jsxs)(`div`,{children:[(0,x.jsx)(`label`,{htmlFor:`budget-description`,className:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5`,children:`Descrição *`}),(0,x.jsx)(`input`,{id:`budget-description`,type:`text`,required:!0,"aria-required":`true`,autoComplete:`off`,className:`w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder:text-gray-400 dark:placeholder:text-gray-500 focus:ring-2 focus:ring-gray-300 dark:focus:ring-gray-500 focus:outline-none`,placeholder:`Ex: Orçamento inicial da viagem`,...w(`description`)})]}),(0,x.jsxs)(`div`,{children:[(0,x.jsx)(`label`,{htmlFor:`budget-amount`,className:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5`,children:`Valor (R$) *`}),(0,x.jsx)(g,{name:`amount`,control:C,render:({field:e})=>(0,x.jsx)(`input`,{id:`budget-amount`,type:`text`,required:!0,"aria-required":`true`,"aria-label":`Valor do or\\u00e7amento em reais`,autoComplete:`off`,className:`w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder:text-gray-400 dark:placeholder:text-gray-500 focus:ring-2 focus:ring-gray-300 dark:focus:ring-gray-500 focus:outline-none`,placeholder:`0,00`,value:e.value,onChange:t=>e.onChange(c(t.target.value))})})]}),(0,x.jsxs)(`div`,{children:[(0,x.jsx)(`label`,{htmlFor:`budget-date`,className:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5`,children:`Data *`}),(0,x.jsx)(g,{name:`date`,control:C,render:({field:e})=>(0,x.jsx)(v,{value:e.value?p(e.value):void 0,onChange:t=>e.onChange(t?f(t):``),required:!0})})]})]})})}export{C as t};