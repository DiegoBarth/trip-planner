import"./router-Di_NAznc.js";import{N as e,R as t}from"./index-C_ascuSl.js";import"./typeof-_tCs8JoZ.js";import{t as n}from"./jspdf.es.min-CpzH9KGI.js";var r=18,i=210,a=297,o=5,s=8;function c(e){return e.duration===0?0:e.duration??60}function l(e,t,n){let i=t;return i+n>a-r+20&&(e.addPage(),i=r),i}function u(u){let d=new n,f=r;d.setFillColor(51,65,85),d.rect(0,0,i,36,`F`),d.setFontSize(22),d.setFont(`helvetica`,`bold`),d.setTextColor(255,255,255),d.text(`Timeline do Roteiro`,i/2,22,{align:`center`}),d.setFontSize(10),d.setFont(`helvetica`,`normal`),d.setTextColor(226,232,240);let p=u.length===1?`Dia ${u[0].dayNumber} · ${t(u[0].date)}`:`${u.length} dias · ${t(u[0].date)} – ${t(u[u.length-1].date)}`;d.text(p,i/2,30,{align:`center`}),f=42,d.setFontSize(8),d.setTextColor(100,116,139),d.setFont(`helvetica`,`normal`);let m=new Date().toLocaleDateString(`pt-BR`,{day:`2-digit`,month:`long`,year:`numeric`,hour:`2-digit`,minute:`2-digit`});d.text(`Gerado em ${m}`,i/2,f,{align:`center`}),f+=8,d.setDrawColor(226,232,240),d.line(r,f,i-r,f),f+=6;for(let e=0;e<u.length;e++){let n=u[e];f=l(d,f,50),d.setFillColor(71,85,105),d.rect(r,f,i-r*2,20,`F`),d.setFontSize(12),d.setFont(`helvetica`,`bold`),d.setTextColor(255,255,255),d.text(`Dia ${n.dayNumber}`,r+5,f+8),d.setFontSize(9),d.setFont(`helvetica`,`normal`),d.setTextColor(226,232,240),d.text(t(n.date),r+5,f+14),d.setFontSize(9),d.text(`${n.startTime} - ${n.endTime}`,i-r-6,f+11,{align:`right`}),f+=24,d.setFontSize(8),d.setTextColor(100,116,139),d.setFont(`helvetica`,`normal`),d.text(`${n.attractions.length} locais`,r,f),d.text(`${n.totalDistance.toFixed(1)} km`,r+40,f),d.text(`${n.totalTravelTime} min viagem`,r+75,f),f+=o+2,d.setFont(`helvetica`,`bold`),d.setFontSize(9),d.setTextColor(30,41,59),d.text(`Roteiro`,r,f),f+=o+1;for(let e=0;e<n.attractions.length;e++){if(f=l(d,f,o*4),e>0&&n.segments[e-1]){let t=n.segments[e-1];d.setFontSize(7),d.setFont(`helvetica`,`normal`),d.setTextColor(148,163,184),d.text(`${t.distanceKm.toFixed(1)} km, ~${t.durationMinutes} min ate ${t.to.name}`,r+8,f),f+=o+1}let t=n.attractions[e],a=t.arrivalTime??n.startTime,s=t.departureTime??n.startTime,u=c(t),p=t.id===-999;f=l(d,f,o*2+6);let m=o+5;d.setFillColor(248,250,252),d.rect(r,f-3,i-r*2,m,`F`),d.setFontSize(9),d.setFont(`helvetica`,`bold`),d.setTextColor(51,65,85),d.text(`${e+1}. ${t.name}`,r+5,f+1.5),d.setFont(`helvetica`,`normal`),d.setFontSize(8),d.setTextColor(100,116,139),d.text(`${a} - ${s}`,i-r-5,f+1.5,{align:`right`}),t.city&&d.text(t.city,r+5,f+1.5+o),!p&&u>0&&d.text(`${u} min`,i-r-5,f+1.5+o,{align:`right`}),f+=m+2}if(n.conflicts.length>0){let e=5+n.conflicts.length*(o+.5);f=l(d,f,e+4),d.setFillColor(254,226,226),d.roundedRect(r,f,i-r*2,e,1.5,1.5,`F`),d.setFontSize(8),d.setFont(`helvetica`,`bold`),d.setTextColor(185,28,28),d.text(`Atenção: ${n.conflicts.length} conflito(s)`,r+5,f+4),d.setFont(`helvetica`,`normal`),d.setFontSize(7),d.setTextColor(127,29,29),n.conflicts.forEach((e,t)=>{d.text(`• ${e.message}`,r+5,f+4+(t+1)*(o+.5))}),f+=e+2}f+=s}let h=a-12;d.setFontSize(8),d.setTextColor(148,163,184),d.text(`Trip Planner · Timeline do Roteiro`,i/2,h,{align:`center`});let g=u.length===1?`timeline-dia-${u[0].dayNumber}-${e(u[0].date)}.pdf`:`timeline-roteiro-${new Date().toISOString().split(`T`)[0]}.pdf`;d.save(g)}export{u as exportTimelineToPDF};