import{p as e}from"./google-login-button-CK2bO50y.js";import{i as t,o as n,t as r}from"./react-query-BB-sDLdC.js";import{W as i,X as a,Z as o}from"./index-DbQZMLb9.js";async function s(e){let t=await o({action:`createChecklistItem`,data:e});if(!t.success||!t.data)throw Error(t.message||`Failed to create checklist item`);return t.data}async function c(e){let t=await o({action:`updateChecklistItem`,data:e});if(!t.success||!t.data)throw Error(t.message||`Failed to update checklist item`);return t.data}async function l(e){let t=await o({action:`deleteChecklistItem`,id:e});if(!t.success)throw Error(t.message||`Failed to delete checklist item`)}async function u(){let e=await a({action:`getChecklistItems`});return!e.success||!e.data?[]:i(e.data)}async function d(e,t){let n=await o({action:`toggleChecklistItemPacked`,data:{id:e,isPacked:t}});if(!n.success||!n.data)throw Error(n.message||`Failed to toggle checklist item`);return n.data}var f=[`checklist`];function p(e,t){e.setQueryData(f,(e=[])=>[...e,t])}function m(e,t){e.setQueryData(f,(e=[])=>e.map(e=>e.id===t.id?t:e))}function h(e,t){e.setQueryData(f,(e=[])=>e.filter(e=>e.id!==t).map(e=>e.id>t?{...e,id:e.id-1}:e))}function g(e,t){e.setQueryData(f,(e=[])=>e.map(e=>e.id===t.id?{...e,isPacked:t.isPacked}:e))}var _=[`checklist`];function v(){let i=n(),{data:a=[],isLoading:o,error:f}=t({queryKey:_,queryFn:u,staleTime:e}),v=r({mutationFn:e=>s(e),onSuccess:e=>{p(i,e)}}),y=r({mutationFn:e=>c(e),onSuccess:e=>{m(i,e)}}),b=r({mutationFn:e=>l(e),onSuccess:(e,t)=>{h(i,t)}}),x=r({mutationFn:({id:e,isPacked:t})=>d(e,t),onSuccess:e=>{g(i,e)}});return{items:a,isLoading:o,error:f,createItem:v.mutateAsync,updateItem:y.mutateAsync,deleteItem:b.mutateAsync,togglePacked:x.mutateAsync,isCreating:v.isPending,isUpdating:y.isPending,isDeleting:b.isPending,isToggling:x.isPending}}export{v as t};