import{S as e,x as t}from"./google-login-button-DyA0rimH.js";import{n}from"./router-CBHNA5n3.js";import{A as r,I as i,R as a,j as o,k as s,q as c,z as l}from"./ui-icons-B3vgkW9X.js";import"./react-query-DywLgQAp.js";import{n as u,o as d}from"./CountryContext-nFpLVFvs.js";import{i as f}from"./formatters-BV6Uspa7.js";var p=e(),m=t();function h(e,t,n){let r=`https://www.google.com/maps/search/?api=1&query=${e},${t}&query_place_id=${encodeURIComponent(n)}`;window.open(r,`_blank`)}function g(){let{attractions:e,country:t}=u(),{toggleVisited:g}=d(t),_=(0,p.useMemo)(()=>{let t=new Date;t.setHours(0,0,0,0);let n=e.filter(e=>e.date&&e.lat&&e.lng).map(e=>({...e,parsedDate:new Date(f(e.date)+`T12:00:00`)})).sort((e,t)=>e.parsedDate.getTime()-t.parsedDate.getTime());if(n.length===0)return null;let r=n.some(e=>{let n=e.parsedDate;return n.getFullYear()===t.getFullYear()&&n.getMonth()===t.getMonth()&&n.getDate()===t.getDate()}),i=r?t:n.find(e=>e.parsedDate>=t)?.parsedDate??null;if(!i)return null;let a=n.filter(e=>{let t=e.parsedDate;return t.getFullYear()===i.getFullYear()&&t.getMonth()===i.getMonth()&&t.getDate()===i.getDate()});if(a.length===0)return null;let o=[...a].sort((e,t)=>e.order-t.order),s=r?o.find(e=>e.id!==-999&&!e.visited):null;return{date:i,day:a[0].day,isToday:r,attractionsCount:a.length,attractions:a.slice(0,3),attractionsAll:o,nextAttraction:s??null}},[e]);if(!_)return(0,m.jsxs)(`div`,{className:`bg-white dark:bg-gray-800 rounded-2xl shadow-md p-6 text-center`,children:[(0,m.jsx)(c,{className:`w-12 h-12 text-gray-400 mx-auto mb-3`}),(0,m.jsx)(`p`,{className:`text-gray-600 dark:text-gray-400`,children:`Nenhum dia planejado`})]});let v=_.date.toLocaleDateString(`pt-BR`,{weekday:`long`,day:`numeric`,month:`long`}),y=(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)(`div`,{className:`flex items-start justify-between mb-4`,children:[(0,m.jsxs)(`div`,{children:[(0,m.jsxs)(`div`,{className:`flex items-center gap-2 mb-1 opacity-90`,children:[(0,m.jsx)(c,{className:`w-4 h-4`}),(0,m.jsx)(`span`,{className:`text-sm font-medium`,children:_.isToday?`Hoje`:`Próximo Dia`})]}),(0,m.jsx)(`h3`,{className:`text-2xl font-bold capitalize`,children:v}),(0,m.jsxs)(`p`,{className:`text-sm opacity-90 mt-1`,children:[`Dia `,_.day,` da viagem`]})]}),(0,m.jsx)(o,{className:`w-6 h-6 opacity-80`})]}),(0,m.jsxs)(`div`,{className:`flex items-center gap-2 text-sm opacity-90`,children:[(0,m.jsx)(l,{className:`w-4 h-4`}),(0,m.jsxs)(`span`,{children:[_.attractionsCount,` `,_.attractionsCount===1?`local`:`locais`,` planejados`]})]})]}),b=_.isToday&&(_.nextAttraction||_.attractionsAll.length>0);return(0,m.jsxs)(`div`,{className:`bg-gradient-to-br from-blue-500 to-purple-600 text-white rounded-2xl shadow-lg p-6 focus-within:ring-2 focus-within:ring-white/50 focus-within:outline-none`,children:[(0,m.jsx)(n,{to:`/timeline`,className:`block hover:opacity-95 transition-opacity focus:outline-none`,children:y}),b&&(0,m.jsxs)(`div`,{className:`mt-4 pt-4 border-t border-white/20 space-y-3`,children:[_.nextAttraction&&(0,m.jsxs)(`div`,{className:`flex items-center justify-between gap-2 flex-wrap`,children:[(0,m.jsxs)(`div`,{className:`min-w-0`,children:[(0,m.jsx)(`p`,{className:`text-xs font-medium opacity-90`,children:`Próxima parada`}),(0,m.jsx)(`p`,{className:`font-semibold truncate`,children:_.nextAttraction.name})]}),(0,m.jsxs)(`button`,{type:`button`,onClick:e=>{e.preventDefault(),h(_.nextAttraction.lat,_.nextAttraction.lng,_.nextAttraction.name)},className:`flex items-center gap-1.5 px-3 py-2 rounded-lg bg-white/20 hover:bg-white/30 text-sm font-medium transition-colors`,children:[(0,m.jsx)(r,{className:`w-4 h-4`}),`Navegar`]})]}),(0,m.jsxs)(`div`,{className:`space-y-1.5`,children:[(0,m.jsxs)(`p`,{className:`text-xs font-medium opacity-90 flex items-center gap-1.5`,children:[(0,m.jsx)(a,{className:`w-3.5 h-3.5`}),`Toque para marcar visitado`]}),_.attractionsAll.map(e=>(0,m.jsxs)(`button`,{type:`button`,onClick:t=>{t.preventDefault(),e.id!==-999&&g(e.id)},disabled:e.id===-999,className:`w-full flex items-center gap-2 text-left py-2 px-3 rounded-lg bg-white/10 hover:bg-white/20 transition-colors disabled:opacity-60 disabled:cursor-not-allowed`,children:[e.visited?(0,m.jsx)(i,{className:`w-5 h-5 text-green-200 flex-shrink-0`}):(0,m.jsx)(s,{className:`w-5 h-5 opacity-70 flex-shrink-0`}),(0,m.jsx)(`span`,{className:e.visited?`line-through opacity-80`:``,children:e.name})]},e.id))]})]}),!b&&_.attractions.length>0&&(0,m.jsxs)(`div`,{className:`mt-3 pt-3 border-t border-white/20`,children:[(0,m.jsxs)(`div`,{className:`flex items-center gap-2 text-sm opacity-90 mb-2`,children:[(0,m.jsx)(a,{className:`w-4 h-4`}),(0,m.jsx)(`span`,{children:`Primeiros locais:`})]}),(0,m.jsxs)(`ul`,{className:`space-y-1 text-sm`,children:[_.attractions.map((e,t)=>(0,m.jsxs)(`li`,{className:`opacity-90`,children:[t+1,`. `,e.name]},e.id)),_.attractionsCount>3&&(0,m.jsxs)(`li`,{className:`opacity-75 italic`,children:[`+ `,_.attractionsCount-3,` mais...`]})]})]})]})}export{g as default};