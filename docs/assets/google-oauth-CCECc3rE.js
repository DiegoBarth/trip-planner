import{i as e}from"./rolldown-runtime-CWU8vmCm.js";import{p as t}from"./dnd-kit-DVJe_fUm.js";var n=e(t());function r(e={}){let{nonce:t,locale:r,onScriptLoadSuccess:i,onScriptLoadError:a}=e,[o,s]=(0,n.useState)(!1),c=(0,n.useRef)(i);c.current=i;let l=(0,n.useRef)(a);return l.current=a,(0,n.useEffect)(()=>{let e=document.createElement(`script`);return e.src=`https://accounts.google.com/gsi/client`,r&&(e.src+=`?hl=${r}`),e.async=!0,e.defer=!0,e.nonce=t,e.onload=()=>{var e;s(!0),(e=c.current)==null||e.call(c)},e.onerror=()=>{var e;s(!1),(e=l.current)==null||e.call(l)},document.body.appendChild(e),()=>{document.body.removeChild(e)}},[t]),o}var i=(0,n.createContext)(null);function a({clientId:e,nonce:t,locale:a,onScriptLoadSuccess:o,onScriptLoadError:s,children:c}){let l=r({nonce:t,onScriptLoadSuccess:o,onScriptLoadError:s,locale:a}),u=(0,n.useMemo)(()=>({locale:a,clientId:e,scriptLoadedSuccessfully:l}),[e,l]);return n.createElement(i.Provider,{value:u},c)}function o(){let e=(0,n.useContext)(i);if(!e)throw Error(`Google OAuth components must be used within GoogleOAuthProvider`);return e}function s(e){return e?.clientId??e?.client_id}var c={large:40,medium:32,small:20};function l({onSuccess:e,onError:t,useOneTap:r,promptMomentNotification:i,type:a=`standard`,theme:l=`outline`,size:u=`large`,text:d,shape:f,logo_alignment:p,width:m,click_listener:h,state:g,containerProps:_,...v}){let y=(0,n.useRef)(null),{clientId:b,locale:x,scriptLoadedSuccessfully:S}=o(),C=(0,n.useRef)(e);C.current=e;let w=(0,n.useRef)(t);w.current=t;let T=(0,n.useRef)(i);return T.current=i,(0,n.useEffect)(()=>{var e,t,n;if(S)return(e=(window==null?void 0:window.google)?.accounts?.id)==null||e.initialize({client_id:b,callback:e=>{if(!e?.credential)return w.current?.call(w);let{credential:t,select_by:n}=e;C.current({credential:t,clientId:s(e),select_by:n})},...v}),(t=(window==null?void 0:window.google)?.accounts?.id)==null||t.renderButton(y.current,{type:a,theme:l,size:u,text:d,shape:f,logo_alignment:p,width:m,locale:x,click_listener:h,state:g}),r&&((n=(window==null?void 0:window.google)?.accounts?.id)==null||n.prompt(T.current)),()=>{var e;r&&((e=(window==null?void 0:window.google)?.accounts?.id)==null||e.cancel())}},[b,S,r,a,l,u,d,f,p,m,x]),n.createElement(`div`,{..._,ref:y,style:{height:c[u],..._?.style}})}function u(){var e;(e=(window==null?void 0:window.google)?.accounts?.id)==null||e.disableAutoSelect()}export{a as n,u as r,l as t};