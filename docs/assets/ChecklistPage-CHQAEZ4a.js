const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/exportChecklistToPDF-Dqp08Ksp.js","assets/router-BCc6NGaV.js","assets/google-login-button-BZ5FbxrR.js","assets/rolldown-runtime-CWU8vmCm.js","assets/jspdf.es.min-_OpYnJ-y.js","assets/typeof-_tCs8JoZ.js"])))=>i.map(i=>d[i]);
import{b as e,s as t,y as n}from"./google-login-button-BZ5FbxrR.js";import{s as r}from"./router-BCc6NGaV.js";import"./react-query-D7qSFt80.js";import{C as i,P as a,V as o,X as s,c,l,q as u,s as d,u as f}from"./ui-icons-DZI1O9wh.js";import{a as p,i as m,n as h,o as g,s as _}from"./zod-BU_exWGf.js";import{c as v,d as y,l as b,s as x}from"./index-rMeLVRfY.js";import{t as S}from"./EmptyState-Bk31O1a1.js";import"./useMediaQuery-mMPbHttp.js";import{i as C,n as w,t as T}from"./validateWithToast-HWIyayqh.js";import{t as E}from"./useFocusTrap-DwXhJ8g-.js";import{t as D}from"./PageHeader-C3LD77XA.js";import{n as O,t as k}from"./ConfirmModal-DP6sMrZ6.js";var A=e(),j=n(),M={documents:`bg-blue-100 dark:bg-blue-900/50 text-blue-800 dark:text-blue-300`,clothes:`bg-pink-100 dark:bg-pink-900/50 text-pink-800 dark:text-pink-300`,electronics:`bg-indigo-100 dark:bg-indigo-900/50 text-indigo-800 dark:text-indigo-300`,hygiene:`bg-teal-100 dark:bg-teal-900/50 text-teal-800 dark:text-teal-300`,medicines:`bg-red-100 dark:bg-red-900/50 text-red-800 dark:text-red-300`,accessories:`bg-amber-100 dark:bg-amber-900/50 text-amber-800 dark:text-amber-300`,entertainment:`bg-violet-100 dark:bg-violet-900/50 text-violet-800 dark:text-violet-300`,other:`bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300`},N={documents:`bg-blue-100 dark:bg-blue-900/50`,clothes:`bg-pink-100 dark:bg-pink-900/50`,electronics:`bg-indigo-100 dark:bg-indigo-900/50`,hygiene:`bg-teal-100 dark:bg-teal-900/50`,medicines:`bg-red-100 dark:bg-red-900/50`,accessories:`bg-amber-100 dark:bg-amber-900/50`,entertainment:`bg-violet-100 dark:bg-violet-900/50`,other:`bg-gray-100 dark:bg-gray-700`};function P({item:e,onClick:n,onTogglePacked:r}){let i=t[e.category],a=i?.color??`#6b7280`;return(0,j.jsx)(`div`,{role:n?`button`:void 0,tabIndex:n?0:void 0,onClick:()=>n?.(e),onKeyDown:t=>{n&&(t.key===`Enter`||t.key===` `)&&(t.preventDefault(),n(e))},className:`group bg-white dark:bg-gray-800 rounded-2xl shadow-md overflow-hidden border-l-4 transition-all ${n?`cursor-pointer hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-emerald-500/50`:``} ${e.isPacked?`bg-emerald-50/50 dark:bg-emerald-900/30 border-emerald-400`:``}`,style:e.isPacked?void 0:{borderLeftColor:a},children:(0,j.jsxs)(`div`,{className:`p-4`,children:[(0,j.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,j.jsx)(`button`,{onClick:t=>{t.stopPropagation();try{r(e.id,!e.isPacked)}catch(e){console.error(`Error toggling item:`,e)}},type:`button`,className:`flex-shrink-0 w-6 h-6 rounded-md border-2 flex items-center justify-center transition-all focus:ring-2 focus:ring-gray-300 dark:focus:ring-gray-500 focus:outline-none ${e.isPacked?`bg-emerald-700 border-emerald-700`:`border-gray-300 hover:border-emerald-400`}`,"aria-label":e.isPacked?`Desmarcar empacotado`:`Marcar como empacotado`,children:e.isPacked&&(0,j.jsx)(`svg`,{className:`w-3.5 h-3.5 text-white`,fill:`none`,strokeLinecap:`round`,strokeLinejoin:`round`,strokeWidth:`2`,viewBox:`0 0 24 24`,stroke:`currentColor`,children:(0,j.jsx)(`path`,{d:`M5 13l4 4L19 7`})})}),(0,j.jsx)(`div`,{className:x(`w-10 h-10 rounded-xl flex items-center justify-center text-lg flex-shrink-0`,N[e.category]??N.other),children:i?.icon??`ðŸ“¦`}),(0,j.jsx)(`span`,{className:x(`text-xs font-medium px-2 py-0.5 rounded-md flex-shrink-0`,M[e.category]??M.other),children:i?.label??e.category}),(0,j.jsx)(`div`,{className:`flex-1 min-w-0`,"aria-hidden":!0}),e.isPacked&&(0,j.jsx)(`span`,{className:`px-2 py-0.5 rounded-md text-xs font-semibold text-white bg-emerald-700 flex-shrink-0`,children:`âœ“ Empacotado`})]}),(0,j.jsx)(`div`,{className:`flex items-center gap-2 mt-2 min-w-0`,children:(0,j.jsx)(`h3`,{className:`font-semibold text-gray-900 dark:text-gray-100 truncate min-w-0 flex-1 ${e.isPacked?`text-gray-500 dark:text-gray-400 line-through`:``}`,title:e.description,children:e.description})}),e.quantity&&e.quantity>1||e.notes?(0,j.jsxs)(`div`,{className:`flex flex-wrap items-center gap-x-4 gap-y-1 mt-2 pt-2 border-t border-gray-100 dark:border-gray-700 text-sm text-gray-600 dark:text-gray-400`,children:[e.quantity&&e.quantity>1&&(0,j.jsxs)(`div`,{className:`flex items-center gap-1.5`,children:[(0,j.jsx)(d,{className:`w-3.5 h-3.5 text-gray-400`}),(0,j.jsxs)(`span`,{children:[`Quantidade: `,e.quantity]})]}),e.notes&&(0,j.jsx)(`p`,{className:`line-clamp-2 min-w-0`,children:e.notes})]}):null]})})}const F=g({category:h([`documents`,`clothes`,`electronics`,`hygiene`,`medicines`,`accessories`,`entertainment`,`other`],{message:`A Categoria Ã© obrigatÃ³ria.`}),description:_().trim().min(1,`A DescriÃ§Ã£o Ã© obrigatÃ³ria.`),isPacked:m(),quantity:p().min(1,`A Quantidade deve ser pelo menos 1.`),notes:_().optional()});F.extend({id:p({message:`O ID Ã© obrigatÃ³rio.`})});function I({item:e,isOpen:n,onClose:r,onSave:i}){let a=v(),[o,s]=(0,A.useState)(!1),{register:c,handleSubmit:l,watch:u,setValue:d,reset:f}=C({defaultValues:{category:`other`,description:``,isPacked:!1,quantity:`1`,notes:``}}),p=u();return(0,A.useEffect)(()=>{n&&f(e?{category:e.category,description:e.description,isPacked:e.isPacked,quantity:e.quantity?.toString()||`1`,notes:e.notes||``}:{category:`other`,description:``,isPacked:!1,quantity:`1`,notes:``})},[n,e,f]),(0,j.jsx)(w,{isOpen:n,onClose:r,title:e?`Editar Item`:`Novo Item`,type:e?`edit`:`create`,onSave:l(async e=>{let t=parseInt(e.quantity)||1,n={category:e.category,description:e.description.trim(),isPacked:e.isPacked,quantity:t>1?t:1,notes:e.notes.trim()||``};if(T(n,F,a)){s(!0);try{await Promise.resolve(i(n)),r()}finally{s(!1)}}}),loading:o,loadingText:`Salvando...`,size:`md`,children:(0,j.jsxs)(`div`,{className:`space-y-4`,children:[(0,j.jsxs)(`div`,{children:[(0,j.jsx)(`label`,{htmlFor:`checklist-category`,className:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5`,children:`Categoria *`}),(0,j.jsx)(`div`,{className:`grid grid-cols-3 md:grid-cols-4 gap-2`,children:Object.entries(t).map(([e,t])=>(0,j.jsxs)(`button`,{type:`button`,onClick:()=>d(`category`,e),className:`p-3 rounded-lg border-2 transition-all focus:ring-2 focus:ring-gray-300 dark:focus:ring-gray-500 focus:outline-none ${p.category===e?`border-blue-500 bg-blue-50 dark:bg-blue-900/40 shadow-md`:`border-gray-200 dark:border-gray-600 hover:border-gray-300 dark:hover:border-gray-500`}`,children:[(0,j.jsx)(`div`,{className:`text-2xl mb-1`,children:t.icon}),(0,j.jsx)(`div`,{className:`font-medium text-xs ${p.category===e?`text-blue-700 dark:text-blue-300`:`text-gray-700 dark:text-gray-300`}`,children:t.label})]},e))})]}),(0,j.jsxs)(`div`,{children:[(0,j.jsx)(`label`,{htmlFor:`checklist-description`,className:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5`,children:`DescriÃ§Ã£o *`}),(0,j.jsx)(`input`,{id:`checklist-description`,type:`text`,required:!0,autoComplete:`off`,...c(`description`),className:`w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder:text-gray-400 dark:placeholder:text-gray-500 focus:ring-2 focus:ring-gray-300 dark:focus:ring-gray-500 focus:outline-none`,placeholder:`Ex: Passaporte, Adaptador de tomada, etc.`})]}),(0,j.jsxs)(`div`,{children:[(0,j.jsx)(`label`,{htmlFor:`checklist-quantity`,className:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5`,children:`Quantidade`}),(0,j.jsx)(`input`,{id:`checklist-quantity`,type:`number`,min:`1`,autoComplete:`off`,...c(`quantity`),className:`w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-gray-300 dark:focus:ring-gray-500 focus:outline-none`}),(0,j.jsx)(`p`,{className:`text-xs text-gray-500 dark:text-gray-400 mt-1`,children:`Deixe em 1 se for um item Ãºnico`})]}),(0,j.jsxs)(`div`,{className:`flex items-center gap-3`,children:[(0,j.jsx)(`input`,{id:`checklist-packed`,type:`checkbox`,...c(`isPacked`),className:`w-5 h-5 rounded border-gray-300 dark:border-gray-600 text-green-600 focus:ring-gray-300 dark:focus:ring-gray-500 bg-white dark:bg-gray-700`}),(0,j.jsx)(`label`,{htmlFor:`checklist-packed`,className:`text-sm font-medium text-gray-700 dark:text-gray-300`,children:`Item jÃ¡ estÃ¡ empacotado`})]}),(0,j.jsxs)(`div`,{children:[(0,j.jsx)(`label`,{htmlFor:`checklist-notes`,className:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5`,children:`ObservaÃ§Ãµes`}),(0,j.jsx)(`textarea`,{id:`checklist-notes`,...c(`notes`),rows:3,autoComplete:`off`,className:`w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder:text-gray-400 dark:placeholder:text-gray-500 focus:ring-2 focus:ring-gray-300 dark:focus:ring-gray-500 focus:outline-none`,placeholder:`Detalhes adicionais sobre este item...`})]})]})})}function L({item:e,isOpen:n,onClose:r,onEdit:a,onDelete:o}){let s=E(n);if((0,A.useEffect)(()=>{if(!n)return;function e(e){e.key===`Escape`&&r()}return document.addEventListener(`keydown`,e),()=>document.removeEventListener(`keydown`,e)},[n,r]),!n||!e)return null;let c=t[e.category],l=()=>{r(),a(e)},d=()=>{r(),o(e)};return(0,j.jsxs)(`div`,{className:`fixed inset-0 z-[600] flex justify-center items-end md:items-center`,role:`dialog`,"aria-modal":`true`,"aria-labelledby":`checklist-actions-title`,children:[(0,j.jsx)(`div`,{className:`absolute inset-0 bg-black/40 backdrop-blur-sm`,onClick:r,"aria-hidden":`true`}),(0,j.jsxs)(`div`,{ref:s,className:`relative w-full max-w-sm bg-white dark:bg-gray-800 rounded-t-2xl md:rounded-2xl shadow-2xl flex flex-col`,children:[(0,j.jsxs)(`div`,{className:`flex items-center justify-between px-4 py-3 border-b border-gray-200 dark:border-gray-700`,children:[(0,j.jsx)(`h2`,{id:`checklist-actions-title`,className:`text-lg font-semibold text-gray-900 dark:text-gray-100 truncate pr-2`,children:e.description}),(0,j.jsx)(`button`,{type:`button`,onClick:r,"aria-label":`Fechar`,className:`p-2 rounded-lg text-gray-500 hover:text-gray-700 dark:hover:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700`,children:(0,j.jsx)(u,{className:`w-5 h-5`})})]}),c&&(0,j.jsxs)(`div`,{className:`px-4 py-3 text-sm text-gray-500 dark:text-gray-400 flex items-center gap-2`,children:[(0,j.jsx)(`span`,{children:c.icon}),(0,j.jsx)(`span`,{children:c.label})]}),(0,j.jsxs)(`div`,{className:`flex gap-3 px-4 py-4 border-t border-gray-200 dark:border-gray-700`,children:[(0,j.jsxs)(`button`,{type:`button`,onClick:l,className:`flex-1 flex items-center justify-center gap-2 px-4 py-2.5 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none`,children:[(0,j.jsx)(f,{className:`w-4 h-4`}),`Editar`]}),(0,j.jsxs)(`button`,{type:`button`,onClick:d,className:`flex-1 flex items-center justify-center gap-2 px-4 py-2.5 text-sm font-medium text-white bg-red-600 hover:bg-red-700 rounded-lg focus:ring-2 focus:ring-red-500 focus:outline-none`,children:[(0,j.jsx)(i,{className:`w-4 h-4`}),`Excluir`]})]})]})]})}function R({items:e,onUpdate:n,onCreate:i,onDelete:a,onTogglePacked:u,isLoading:d=!1}){let[f,p]=(0,A.useState)(!1),[m,h]=(0,A.useState)(),[g,_]=(0,A.useState)(null),[v,y]=(0,A.useState)(null),[b,x]=(0,A.useState)(!1),C=(0,A.useMemo)(()=>{let t=e.reduce((e,t)=>{let n=t.category;return e[n]||(e[n]=[]),e[n].push(t),e},{});return Object.values(t).forEach(e=>{e.sort((e,t)=>e.description.localeCompare(t.description,`pt-BR`))}),t},[e]),w=(0,A.useMemo)(()=>{let t=e.length,n=e.filter(e=>e.isPacked).length,r=t>0?Math.round(n/t*100):0;return{total:t,packed:n,unpacked:t-n,percentage:r}},[e]),T=()=>{h(void 0),p(!1)},E=async e=>{m?await Promise.resolve(n({...e,id:m.id})):await Promise.resolve(i(e))},D=async()=>{x(!0);try{let{exportChecklistToPDF:t}=await r(async()=>{let{exportChecklistToPDF:e}=await import(`./exportChecklistToPDF-Dqp08Ksp.js`);return{exportChecklistToPDF:e}},__vite__mapDeps([0,1,2,3,4,5]));t({items:e})}finally{x(!1)}},O=async()=>{g&&(await a(g.id),_(null))},M=e=>{y(e)};return d?null:(0,j.jsxs)(`div`,{children:[(0,j.jsx)(`div`,{className:`mb-8`,children:(0,j.jsx)(`div`,{className:`rounded-2xl shadow-lg overflow-hidden bg-gradient-to-br from-emerald-500 to-teal-600 text-white mb-4`,children:(0,j.jsxs)(`div`,{className:`p-5 md:p-6`,children:[(0,j.jsxs)(`div`,{className:`flex items-center justify-between gap-4 flex-wrap`,children:[(0,j.jsxs)(`div`,{className:`flex items-center gap-3`,children:[(0,j.jsx)(`div`,{className:`w-12 h-12 rounded-xl bg-white/20 flex items-center justify-center`,children:(0,j.jsx)(o,{className:`w-7 h-7`})}),(0,j.jsxs)(`div`,{children:[(0,j.jsx)(`h2`,{className:`text-xl font-bold tracking-tight`,children:`Checklist de Viagem`}),(0,j.jsxs)(`p`,{className:`text-sm opacity-90 mt-0.5`,children:[w.total,` `,w.total===1?`item`:`itens`,` no total`]})]})]}),w.total>0&&(0,j.jsxs)(`button`,{type:`button`,onClick:D,disabled:b,className:`flex items-center gap-2 px-4 py-2.5 bg-white text-emerald-700 rounded-xl font-semibold hover:bg-white/90 transition-colors shadow-md focus:ring-2 focus:ring-gray-300 dark:focus:ring-gray-500 focus:outline-none disabled:opacity-70 disabled:cursor-wait`,title:`Exportar para PDF`,children:[(0,j.jsx)(l,{className:`w-5 h-5`}),b?`Preparandoâ€¦`:`Exportar PDF`]})]}),w.total>0&&(0,j.jsxs)(`div`,{className:`mt-5 pt-5 border-t border-white/25`,children:[(0,j.jsxs)(`div`,{className:`flex items-center justify-between mb-2`,children:[(0,j.jsx)(`span`,{className:`text-sm font-medium opacity-90`,children:`Progresso da mala`}),(0,j.jsxs)(`span`,{className:`text-sm font-bold`,children:[w.packed,` de `,w.total,` (`,w.percentage,`%)`]})]}),(0,j.jsx)(`div`,{className:`h-2.5 bg-white/25 rounded-full overflow-hidden`,children:(0,j.jsx)(`div`,{className:`h-full bg-white rounded-full transition-all duration-500`,style:{width:`${w.percentage}%`}})}),(0,j.jsxs)(`div`,{className:`flex items-center justify-between mt-2.5 text-xs opacity-90`,children:[(0,j.jsxs)(`span`,{className:`flex items-center gap-1.5`,children:[(0,j.jsx)(c,{className:`w-4 h-4`}),w.unpacked,` faltando`]}),(0,j.jsxs)(`span`,{className:`flex items-center gap-1.5`,children:[(0,j.jsx)(s,{className:`w-4 h-4`}),w.packed,` empacotado`,w.packed===1?``:`s`]})]})]})]})})}),(0,j.jsx)(`div`,{className:`space-y-8`,children:Object.keys(C).length===0?(0,j.jsx)(S,{icon:`ðŸ“‹`,title:`Nenhum item no checklist`,description:`Comece adicionando itens que vocÃª precisa levar na viagem!`}):Object.entries(C).sort(([e],[n])=>{let r=t[e]?.label||e,i=t[n]?.label||n;return r.localeCompare(i,`pt-BR`)}).map(([e,n])=>{let r=t[e],i=n.filter(e=>e.isPacked).length,a=n.length;return(0,j.jsxs)(`section`,{className:`space-y-4`,children:[(0,j.jsxs)(`div`,{className:`flex items-center gap-2 px-4 py-2.5 rounded-xl bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 shadow-sm w-fit`,children:[(0,j.jsx)(`span`,{className:`text-xl`,children:r?.icon??`ðŸ“¦`}),(0,j.jsx)(`h3`,{className:`text-base font-semibold text-gray-900 dark:text-gray-100`,children:r?.label??e}),(0,j.jsxs)(`span`,{className:`text-sm text-gray-500 dark:text-gray-400`,children:[i,`/`,a]}),i===a&&a>0&&(0,j.jsxs)(`span`,{className:`text-xs font-semibold text-emerald-600 flex items-center gap-1`,children:[(0,j.jsx)(s,{className:`w-3.5 h-3.5`}),`Completo`]})]}),(0,j.jsx)(`div`,{className:`grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4`,children:n.map(e=>(0,j.jsx)(P,{item:e,onClick:M,onTogglePacked:u},e.id))})]},e)})}),(0,j.jsx)(I,{item:m,isOpen:f,onClose:T,onSave:E}),(0,j.jsx)(L,{item:v,isOpen:!!v,onClose:()=>y(null),onEdit:e=>{y(null),h(e),p(!0)},onDelete:e=>{y(null),_(e)}}),(0,j.jsx)(k,{isOpen:!!g,onClose:()=>_(null),title:`Excluir item`,message:g?(0,j.jsxs)(j.Fragment,{children:[`Tem certeza que deseja excluir "`,g.description,`"?`]}):null,onConfirm:O})]})}function z(){let[e,t]=(0,A.useState)(!1),{checklistItems:n,isReady:r}=b(),{createItem:i,updateItem:o,deleteItem:s,togglePacked:c}=y(),l=v(),u=async e=>{try{await i(e),l.success(`Item adicionado com sucesso!`)}catch(e){console.error(`Error creating checklist item:`,e),l.error(`Erro ao adicionar item`)}};return(0,j.jsxs)(`div`,{className:`min-h-screen bg-gray-50 dark:bg-gray-900 pb-20 md:pb-6`,children:[(0,j.jsx)(D,{title:`Checklist`}),(0,j.jsx)(`main`,{className:`max-w-6xl mx-auto px-4 md:px-6 py-6 mb-12`,children:(0,j.jsx)(R,{items:n,onCreate:u,onUpdate:async e=>{try{await o(e),l.success(`Item atualizado com sucesso!`)}catch(e){console.error(`Error updating checklist item:`,e),l.error(`Erro ao atualizar item`)}},onDelete:async e=>{try{await s(e),l.success(`Item excluÃ­do com sucesso!`)}catch(e){console.error(`Error deleting checklist item:`,e),l.error(`Erro ao excluir item`)}},onTogglePacked:async(e,t)=>{try{await c({id:e,isPacked:t}),t?l.success(`Item marcado como empacotado!`):l.success(`Item desmarcado!`)}catch(e){console.error(`Error toggling checklist item:`,e),l.error(`Erro ao atualizar item`)}},isLoading:!r})}),(0,j.jsx)(O,{onClick:()=>t(!0),icon:(0,j.jsx)(a,{className:`w-6 h-6`}),label:`Adicionar`}),e&&(0,j.jsx)(I,{isOpen:e,onClose:()=>t(!1),onSave:async e=>{await u(e),t(!1)}})]})}export{z as default};