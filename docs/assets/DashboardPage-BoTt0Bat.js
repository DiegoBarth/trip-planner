const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ExpensesByCategoryChart-CtaSVhEq.js","assets/index-DtIXB3hz.js","assets/router-DLfkpT9n.js","assets/google-login-button-CK2bO50y.js","assets/rolldown-runtime-CWU8vmCm.js","assets/react-query-BB-sDLdC.js","assets/ui-icons-BBIUuva6.js","assets/react-vendor-B0_zmQzX.js","assets/zod-BU_exWGf.js","assets/index-NS-hxyis.css","assets/BudgetByOriginChart-BtIp9O2Z.js"])))=>i.map(i=>d[i]);
import{C as e,S as t}from"./google-login-button-CK2bO50y.js";import{c as n}from"./router-DLfkpT9n.js";import"./react-query-BB-sDLdC.js";import"./ui-icons-BBIUuva6.js";import"./zod-BU_exWGf.js";import{F as r,N as i,Y as a,_ as o,d as s}from"./index-DtIXB3hz.js";import{t as c}from"./useBudget-BuLnfe95.js";import{t as l}from"./useExpense-DrDeHINN.js";import{t as u}from"./PageHeader-soEjodt_.js";var d=t();function f({label:e,value:t,subValue:n,icon:r,iconClass:i}){return(0,d.jsxs)(`div`,{className:`bg-white dark:bg-gray-800 p-5 rounded-2xl shadow-sm border border-gray-100 dark:border-gray-700 flex items-center gap-4 min-h-[100px]`,children:[(0,d.jsx)(`div`,{className:`flex-shrink-0 w-14 h-14 rounded-xl flex items-center justify-center text-2xl ${i}`,children:r}),(0,d.jsxs)(`div`,{className:`min-w-0 flex-1`,children:[(0,d.jsx)(`p`,{className:`text-gray-500 dark:text-gray-400 text-sm font-medium`,children:e}),(0,d.jsx)(`p`,{className:`text-xl md:text-2xl font-bold text-gray-800 dark:text-gray-100 truncate`,children:t}),n&&(0,d.jsx)(`p`,{className:`text-xs text-gray-600 dark:text-gray-400 mt-0.5`,children:n})]})]})}function p({status:e}){let t=e.visitedPercentage;return(0,d.jsxs)(`div`,{className:`bg-white dark:bg-gray-800 p-6 rounded-2xl shadow-sm border border-gray-100 dark:border-gray-700`,children:[(0,d.jsxs)(`div`,{className:`flex justify-between mb-4`,children:[(0,d.jsx)(`h2`,{className:`font-bold text-gray-700 dark:text-gray-200 text-lg`,children:`üé¢ Progresso da Viagem`}),(0,d.jsxs)(`span`,{className:`text-purple-600 dark:text-purple-400 font-semibold`,children:[Math.round(t),`%`]})]}),(0,d.jsx)(`div`,{className:`w-full bg-gray-100 dark:bg-gray-700 rounded-full h-4 mb-6`,children:(0,d.jsx)(`div`,{className:`bg-gradient-to-r from-purple-500 to-indigo-500 h-4 rounded-full transition-all`,style:{width:`${t}%`}})}),(0,d.jsxs)(`div`,{className:`grid grid-cols-3 text-center gap-4`,children:[(0,d.jsxs)(`div`,{children:[(0,d.jsx)(`p`,{className:`text-xs text-gray-600 dark:text-gray-400`,children:`Total`}),(0,d.jsx)(`p`,{className:`font-bold text-gray-900 dark:text-gray-100`,children:e.total})]}),(0,d.jsxs)(`div`,{children:[(0,d.jsx)(`p`,{className:`text-xs text-emerald-700 dark:text-emerald-300`,children:`Visitados`}),(0,d.jsx)(`p`,{className:`font-bold text-gray-900 dark:text-gray-100`,children:e.visited})]}),(0,d.jsxs)(`div`,{children:[(0,d.jsx)(`p`,{className:`text-xs text-amber-700 dark:text-amber-300`,children:`Pendentes`}),(0,d.jsx)(`p`,{className:`font-bold text-gray-900 dark:text-gray-100`,children:e.total-e.visited})]})]})]})}function m(e){return e.reduce((e,t)=>e+t.amountInBRL,0)}function h(e){let t=new Map;return e.forEach(e=>{t.set(e.category,(t.get(e.category)||0)+e.amountInBRL)}),Array.from(t).map(([e,t])=>({category:e,total:t}))}function g(e,t){let n=new Map,r=new Map;return e.forEach(e=>{n.set(e.origin,(n.get(e.origin)||0)+e.amount)}),t.forEach(e=>{r.set(e.budgetOrigin,(r.get(e.budgetOrigin)||0)+e.amountInBRL)}),Array.from(n).map(([e,t])=>{let n=r.get(e)||0;return{origin:e,totalBudget:t,spent:n,remaining:t-n}})}function _(e){return{total:e.length,visited:e.filter(e=>e.visited).length,pendingReservation:e.filter(e=>e.needsReservation&&e.reservationStatus!==`confirmed`).length}}function v(e){let t=e.map(e=>e.date).filter(Boolean).map(e=>{let t=new Date(i(e));return new Date(t.getFullYear(),t.getMonth(),t.getDate())});if(t.length===0)return 0;let n=new Date(Math.min(...t.map(e=>e.getTime()))),r=new Date(Math.max(...t.map(e=>e.getTime()))).getTime()-n.getTime();return Math.floor(r/(1e3*60*60*24))+1}function y({budgets:e,expenses:t,attractions:n}){let r=v(n),i=_(n),a=i.total>0?i.visited/i.total*100:0,o=e.reduce((e,t)=>e+t.amount,0),s=m(t);return{stats:{totalSpent:m(t),expensesByCategory:h(t),budgetByOrigin:g(e,t),attractionStatus:{...i,visitedPercentage:a},totalBudget:o,remaining:o-s,daysOfTrip:r}}}var b=e(),x=(0,b.lazy)(()=>n(()=>import(`./ExpensesByCategoryChart-CtaSVhEq.js`),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]))),S=(0,b.lazy)(()=>n(()=>import(`./BudgetByOriginChart-BtIp9O2Z.js`),__vite__mapDeps([10,1,2,3,4,5,6,7,8,9])));function C(){let{country:e}=a(),{attractions:t,isLoading:n}=o(e),{budgets:i}=c(),{expenses:m}=l(e),h=y({budgets:i,expenses:m,attractions:t});if(n||!h)return(0,d.jsxs)(`div`,{className:`min-h-screen bg-gray-50 dark:bg-gray-900 pb-20 md:pb-6`,children:[(0,d.jsx)(u,{title:`Dashboard`,subtitle:`Resumo da sua viagem`}),(0,d.jsxs)(`div`,{className:`flex flex-col items-center justify-center h-[60vh] space-y-4`,children:[(0,d.jsx)(`div`,{className:`animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600`}),(0,d.jsx)(`p`,{className:`text-gray-500 font-medium animate-pulse`,children:`Carregando dados da viagem...`})]})]});let g=h.stats;if(g)return(0,d.jsxs)(`div`,{className:`min-h-screen bg-gray-50 dark:bg-gray-900 pb-20 md:pb-6`,children:[(0,d.jsx)(u,{title:`Dashboard`,subtitle:`Resumo completo da sua viagem`}),(0,d.jsxs)(`main`,{className:`max-w-7xl mx-auto px-4 md:px-6 py-6 space-y-6`,children:[(0,d.jsxs)(`div`,{className:`grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4`,children:[(0,d.jsx)(f,{label:`Total Gasto`,value:r(g.totalSpent),subValue:`de ${r(g.totalBudget)} or√ßados`,icon:`üí∏`,iconClass:`bg-rose-100 text-rose-600 dark:bg-rose-950/50 dark:text-rose-400`}),(0,d.jsx)(f,{label:`Saldo Restante`,value:r(g.remaining),icon:`üí∞`,iconClass:`bg-emerald-100 text-emerald-600 dark:bg-emerald-950/50 dark:text-emerald-400`}),(0,d.jsx)(f,{label:`Dura√ß√£o da Viagem`,value:`${g.daysOfTrip} Dias`,icon:`üóìÔ∏è`,iconClass:`bg-blue-100 text-blue-600 dark:bg-blue-950/50 dark:text-blue-400`}),(0,d.jsx)(f,{label:`Atra√ß√µes Pendentes`,value:g.attractionStatus.pendingReservation.toString(),subValue:`Necessitam reserva`,icon:`‚ö†Ô∏è`,iconClass:`bg-amber-100 text-amber-600 dark:bg-amber-950/50 dark:text-amber-400`})]}),(0,d.jsxs)(`div`,{className:`grid grid-cols-1 lg:grid-cols-2 gap-4`,children:[(0,d.jsx)(s,{height:320,children:(0,d.jsx)(x,{data:g.expensesByCategory})}),(0,d.jsx)(s,{height:320,children:(0,d.jsx)(S,{data:g.budgetByOrigin})})]}),(0,d.jsxs)(`div`,{className:`grid grid-cols-1 lg:grid-cols-3 gap-4`,children:[(0,d.jsx)(`div`,{className:`lg:col-span-2`,children:(0,d.jsx)(p,{status:g.attractionStatus})}),(0,d.jsx)(`div`,{className:`bg-gradient-to-br from-blue-600 to-purple-600 rounded-2xl p-6 text-white shadow-lg flex flex-col justify-between`,children:(0,d.jsxs)(`div`,{children:[(0,d.jsx)(`h2`,{className:`font-bold text-lg mb-2`,children:`Pr√≥xima Parada?`}),(0,d.jsxs)(`p`,{className:`text-white/90 text-sm`,children:[`Voc√™ tem`,` `,g.attractionStatus.total-g.attractionStatus.visited,` `,`atra√ß√µes restantes no seu roteiro.`]})]})})]})]})]})}export{C as default};