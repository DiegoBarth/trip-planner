import{_ as e,b as t,c as n,l as r,o as i,v as a,y as o}from"./google-login-button-BZ5FbxrR.js";import"./react-vendor-EEmDTsrY.js";import"./router-BCc6NGaV.js";import"./react-query-D7qSFt80.js";import{C as s,H as c,P as l,o as u,q as d,u as f}from"./ui-icons-DZI1O9wh.js";import{a as p,n as m,o as h,s as g,t as _}from"./zod-BU_exWGf.js";import{A as v,C as y,E as b,S as x,T as S,b as C,c as w,f as T,k as E,l as D,n as O,r as k,s as A,v as ee,x as j,y as M}from"./index-rMeLVRfY.js";import{t as N}from"./EmptyState-Bk31O1a1.js";import"./useMediaQuery-mMPbHttp.js";import{i as te,n as ne,r as P,t as F}from"./validateWithToast-HWIyayqh.js";import{t as I}from"./useFocusTrap-DwXhJ8g-.js";import{t as L}from"./DateField-DYtJHpE1.js";import"./date-fns-CiRkYnQv.js";import{t as R}from"./PageHeader-C3LD77XA.js";import{n as z,t as B}from"./ConfirmModal-DP6sMrZ6.js";import{t as V}from"./BudgetOriginFilter-Cgc34QWI.js";var H=t(),U=o(),W={food:`bg-amber-500`,attraction:`bg-violet-500`,shopping:`bg-emerald-500`,cosmetics:`bg-pink-500`,electronics:`bg-blue-500`,accommodation:`bg-indigo-500`,transport:`bg-cyan-500`,other:`bg-slate-500`},G={food:`bg-amber-100`,attraction:`bg-violet-100`,shopping:`bg-emerald-100`,cosmetics:`bg-pink-100`,electronics:`bg-blue-100`,accommodation:`bg-indigo-100`,transport:`bg-cyan-100`,other:`bg-slate-100`},K={Diego:`bg-blue-100 dark:bg-blue-900/50 text-blue-800 dark:text-blue-300`,Pamela:`bg-pink-100 dark:bg-pink-900/50 text-pink-800 dark:text-pink-300`,Casal:`bg-violet-100 dark:bg-violet-900/50 text-violet-800 dark:text-violet-300`,AlimentaÃ§Ã£o:`bg-red-100 dark:bg-red-900/50 text-red-800 dark:text-red-300`,AtraÃ§Ãµes:`bg-cyan-100 dark:bg-cyan-900/50 text-cyan-800 dark:text-cyan-300`,Transporte:`bg-green-100 dark:bg-green-900/50 text-green-800 dark:text-green-300`};function q({expense:t,onClick:n}){let o=r[t.category]?t.category:a(t.category),s=i[t.budgetOrigin]?t.budgetOrigin:e(t.budgetOrigin),l=r[o],u=i[s],d=W[o]??W.other,f=G[o]??G.other;return(0,U.jsxs)(`div`,{role:n?`button`:void 0,tabIndex:n?0:void 0,onClick:()=>n?.(t),onKeyDown:e=>{n&&(e.key===`Enter`||e.key===` `)&&(e.preventDefault(),n(t))},className:`bg-white dark:bg-gray-800 rounded-2xl shadow-md overflow-hidden transition-shadow ${n?`cursor-pointer hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-rose-500/50`:``}`,children:[(0,U.jsx)(`div`,{className:`h-1 ${d}`}),(0,U.jsxs)(`div`,{className:`p-4`,children:[(0,U.jsxs)(`div`,{className:`flex items-start justify-between gap-3`,children:[(0,U.jsxs)(`div`,{className:`flex items-center gap-3 min-w-0 flex-1`,children:[(0,U.jsx)(`div`,{className:`w-11 h-11 rounded-xl flex items-center justify-center text-xl flex-shrink-0 ${f}`,children:l.icon}),(0,U.jsxs)(`div`,{className:`min-w-0`,children:[(0,U.jsx)(`h3`,{className:`font-semibold text-gray-900 dark:text-gray-100 truncate`,children:t.description}),(0,U.jsxs)(`div`,{className:`flex items-center gap-2 mt-1.5 flex-wrap`,children:[(0,U.jsxs)(`span`,{className:`text-xs px-2 py-0.5 rounded-md font-medium bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300`,children:[l.icon,` `,l.label]}),(0,U.jsx)(`span`,{className:A(`text-xs px-2 py-0.5 rounded-md font-medium`,K[s]??`bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300`),children:u.label})]})]})]}),(0,U.jsxs)(`div`,{className:`text-right flex-shrink-0`,children:[(0,U.jsx)(`p`,{className:`text-lg font-bold text-rose-800 dark:text-rose-300 tabular-nums`,children:y(t.amount,t.currency)}),t.currency!==`BRL`&&(0,U.jsx)(`p`,{className:`text-xs text-gray-500 dark:text-gray-400`,children:y(t.amountInBRL)})]})]}),t.notes&&(0,U.jsx)(`p`,{className:`text-sm text-gray-600 dark:text-gray-400 mt-2 line-clamp-2 pl-0`,children:t.notes}),(0,U.jsxs)(`div`,{className:`flex items-center gap-2 pt-3 border-gray-100 dark:border-gray-700 text-sm text-gray-500 dark:text-gray-400`,children:[(0,U.jsx)(c,{className:`w-4 h-4 text-gray-400`}),(0,U.jsx)(`span`,{children:b(t.date)})]})]})]})}var J=m([`accommodation`,`transport`,`food`,`attraction`,`shopping`,`other`],{message:`Categoria Ã© obrigatÃ³ria.`}),Y=m([`JPY`,`KRW`,`BRL`],{message:`Moeda Ã© obrigatÃ³ria.`}),X=m([`Diego`,`Pamela`,`Casal`,`AlimentaÃ§Ã£o`,`AtraÃ§Ãµes`,`Transporte`],{message:`A Origem do pagamento Ã© obrigatÃ³ria.`}),re=m([`japan`,`south-korea`,`general`],{message:`O PaÃ­s Ã© obrigatÃ³rio.`});const Z=h({category:J,description:g().trim().min(1,`A DescriÃ§Ã£o Ã© obrigatÃ³ria`),amount:p().positive(`O Valor Ã© obrigatÃ³rio`),currency:Y,amountInBRL:p().min(0),budgetOrigin:X,date:_({message:`A Data Ã© obrigatÃ³ria`}),country:re,notes:g().optional(),receiptUrl:g().optional()});Z.extend({id:p({message:`ID Ã© obrigatÃ³rio.`})});function ie(e){return e===`BRL`?`general`:Object.entries(n).find(([t,n])=>n.currency===e)?.[0]}function Q({expense:t,isOpen:o,onClose:s,onSave:c}){let l=w(),[u,d]=(0,H.useState)(!1),{register:f,control:p,handleSubmit:m,watch:h,setValue:g,reset:_}=te({defaultValues:{category:`food`,description:``,amount:``,currency:`BRL`,amountInBRL:0,budgetOrigin:`Casal`,date:new Date().toISOString().split(`T`)[0],country:`general`,notes:``,receiptUrl:``}}),v=h(),y=(0,H.useRef)(v.currency),b=(0,H.useRef)(v.country),D=(0,H.useRef)(!0),{rates:O}=T();return(0,H.useEffect)(()=>{if(o)if(D.current=!0,t){let n=r[t.category]?t.category:a(t.category),o=i[t.budgetOrigin]?t.budgetOrigin:e(t.budgetOrigin),s;s=t.currency===`BRL`?S(Math.round(t.amount*100).toString(),t.currency):S(t.amount.toString(),t.currency),_({category:n,description:t.description,amount:s,currency:t.currency,amountInBRL:t.amountInBRL,budgetOrigin:o,date:j(t.date),country:t.country??(t.currency===`BRL`?`general`:void 0),notes:t.notes||``,receiptUrl:t.receiptUrl||``}),y.current=t.currency,b.current=t.country??(t.currency===`BRL`?`general`:void 0)}else _({category:`food`,description:``,amount:``,currency:`BRL`,amountInBRL:0,budgetOrigin:`Casal`,date:new Date().toISOString().split(`T`)[0],country:`general`,notes:``,receiptUrl:``}),y.current=`BRL`,b.current=`general`},[o,t,_]),(0,H.useEffect)(()=>{if(D.current){D.current=!1;return}let e=b.current!==v.country,t=y.current!==v.currency;if(e&&v.country){let e=n[v.country];e?.currency&&v.currency!==e.currency&&g(`currency`,e.currency)}else if(t&&!e){let e=ie(v.currency);v.country!==e&&g(`country`,e)}b.current=v.country},[v.country,v.currency,g]),(0,H.useEffect)(()=>{if(y.current!==v.currency&&v.amount){let e=typeof v.amount==`string`?C(v.amount,y.current):v.amount;if(e>0){let t=ee(e,y.current,v.currency,O),n;n=v.currency===`BRL`?S(Math.round(t*100).toString(),v.currency):S(Math.round(t).toString(),v.currency),g(`amount`,n)}}y.current=v.currency},[v.currency,v.amount,g]),(0,H.useEffect)(()=>{g(`amountInBRL`,M(typeof v.amount==`string`?C(v.amount,v.currency):v.amount,v.currency,O))},[v.amount,v.currency,g]),(0,U.jsx)(ne,{isOpen:o,onClose:s,title:t?`Editar Gasto`:`Novo Gasto`,type:t?`edit`:`create`,onSave:m(async e=>{let t=typeof e.amount==`string`?C(e.amount,e.currency):e.amount,n={...e,amount:t,amountInBRL:e.amountInBRL,country:e.country};if(F(n,Z,l)){d(!0);try{await Promise.resolve(c(n)),s()}finally{d(!1)}}}),loading:u,loadingText:`Salvando...`,size:`lg`,children:(0,U.jsxs)(`div`,{className:`space-y-4`,children:[(0,U.jsxs)(`div`,{children:[(0,U.jsx)(`label`,{htmlFor:`expense-category`,className:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5`,children:`Categoria *`}),(0,U.jsx)(`div`,{className:`grid grid-cols-3 gap-3`,children:Object.entries(r).map(([e,t])=>(0,U.jsxs)(`button`,{type:`button`,onClick:()=>g(`category`,e),className:`p-4 rounded-lg border-2 transition-all focus:ring-2 focus:ring-gray-300 dark:focus:ring-gray-500 focus:outline-none ${v.category===e?`border-red-500 bg-red-50 dark:bg-red-900/40 shadow-md`:`border-gray-200 dark:border-gray-600 hover:border-gray-300 dark:hover:border-gray-500`}`,children:[(0,U.jsx)(`div`,{className:`text-2xl mb-1`,children:t.icon}),(0,U.jsx)(`div`,{className:`font-semibold text-sm ${v.category===e?`text-red-700 dark:text-red-300`:`text-gray-700 dark:text-gray-300`}`,children:t.label})]},e))})]}),(0,U.jsxs)(`div`,{children:[(0,U.jsx)(`label`,{htmlFor:`expense-description`,className:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5`,children:`DescriÃ§Ã£o *`}),(0,U.jsx)(`input`,{id:`expense-description`,type:`text`,autoComplete:`off`,...f(`description`),className:`w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 focus:ring-2 focus:ring-gray-300 dark:focus:ring-gray-500 focus:outline-none placeholder:text-gray-400 dark:placeholder:text-gray-500 text-gray-900 dark:text-gray-100`,placeholder:`Ex: AlmoÃ§o no restaurante`})]}),(0,U.jsxs)(`div`,{className:`grid grid-cols-2 gap-3`,children:[(0,U.jsxs)(`div`,{children:[(0,U.jsx)(`label`,{htmlFor:`expense-country`,className:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5`,children:`PaÃ­s *`}),(0,U.jsx)(k,{value:v.country?`${n[v.country].flag} ${n[v.country].name}`:``,onChange:e=>{if(!e){g(`country`,void 0);return}let t=Object.entries(n).find(([t,n])=>`${n.flag} ${n.name}`===e)?.[0];t&&g(`country`,t)},options:[``,...Object.entries(n).map(([e,t])=>`${t.flag} ${t.name}`)].filter(Boolean),placeholder:`Selecione o paÃ­s`})]}),(0,U.jsxs)(`div`,{children:[(0,U.jsx)(`label`,{htmlFor:`expense-currency`,className:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5`,children:`Moeda *`}),(0,U.jsx)(k,{value:v.currency===`BRL`?`R$ Real (BRL)`:v.currency===`JPY`?`Â¥ Iene (JPY)`:`â‚© Won (KRW)`,onChange:e=>{g(`currency`,{"R$ Real (BRL)":`BRL`,"Â¥ Iene (JPY)":`JPY`,"â‚© Won (KRW)":`KRW`}[e])},options:[`R$ Real (BRL)`,`Â¥ Iene (JPY)`,`â‚© Won (KRW)`]})]})]}),(0,U.jsxs)(`div`,{children:[(0,U.jsx)(`label`,{htmlFor:`expense-amount`,className:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5`,children:`Valor *`}),(0,U.jsx)(P,{name:`amount`,control:p,render:({field:e})=>(0,U.jsx)(`input`,{id:`expense-amount`,type:`text`,autoComplete:`off`,value:typeof e.value==`number`?S(e.value.toString(),v.currency):e.value,onChange:t=>{let n=S(t.target.value,v.currency);e.onChange(n)},className:`w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 focus:ring-2 focus:ring-gray-300 dark:focus:ring-gray-500 focus:outline-none placeholder:text-gray-400 dark:placeholder:text-gray-500 text-gray-900 dark:text-gray-100`,placeholder:v.currency===`BRL`?`R$ 0,00`:v.currency===`JPY`?`Â¥ 0`:`â‚© 0`})})]}),(0,U.jsxs)(`div`,{children:[(0,U.jsx)(`label`,{htmlFor:`expense-date`,className:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5`,children:`Data *`}),(0,U.jsx)(P,{name:`date`,control:p,render:({field:e})=>(0,U.jsx)(L,{value:e.value?E(e.value):void 0,onChange:t=>e.onChange(t?x(t):``)})})]}),v.currency!==`BRL`&&v.amount&&(typeof v.amount==`string`?C(v.amount,v.currency)>0:v.amount>0)&&(0,U.jsxs)(`div`,{className:`bg-blue-50 dark:bg-blue-900/30 p-3 rounded-lg border border-blue-200 dark:border-blue-700`,children:[(0,U.jsx)(`span`,{className:`text-sm text-blue-700 dark:text-blue-200`,children:`Valor em reais: `}),(0,U.jsx)(`span`,{className:`font-bold text-blue-900 dark:text-blue-100`,children:new Intl.NumberFormat(`pt-BR`,{style:`currency`,currency:`BRL`}).format(v.amountInBRL||0)})]}),(0,U.jsxs)(`div`,{children:[(0,U.jsx)(`label`,{htmlFor:`expense-budget-origin`,className:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5`,children:`Origem do Pagamento *`}),(0,U.jsx)(`div`,{className:`grid grid-cols-3 gap-3`,children:Object.entries(i).map(([e,t])=>(0,U.jsxs)(`button`,{type:`button`,onClick:()=>g(`budgetOrigin`,e),className:`p-4 rounded-lg border-2 transition-all focus:ring-2 focus:ring-gray-300 dark:focus:ring-gray-500 focus:outline-none ${v.budgetOrigin===e?`border-current shadow-md`:`border-gray-200 dark:border-gray-600 hover:border-gray-300 dark:hover:border-gray-500 bg-white dark:bg-gray-800`}`,style:{borderColor:v.budgetOrigin===e?t.color:void 0,backgroundColor:v.budgetOrigin===e?`${t.color}10`:void 0},children:[(0,U.jsx)(`div`,{className:`text-2xl mb-1`,children:t.icon}),(0,U.jsx)(`div`,{className:`font-semibold text-gray-500 dark:text-gray-300`,style:{color:v.budgetOrigin===e?t.color:void 0},children:t.label})]},e))})]}),(0,U.jsxs)(`div`,{children:[(0,U.jsx)(`label`,{htmlFor:`expense-notes`,className:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5`,children:`ObservaÃ§Ãµes`}),(0,U.jsx)(`textarea`,{id:`expense-notes`,...f(`notes`),rows:3,autoComplete:`off`,className:`w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 focus:ring-2 focus:ring-gray-300 dark:focus:ring-gray-500 focus:outline-none placeholder:text-gray-400 dark:placeholder:text-gray-500 text-gray-900 dark:text-gray-100`,placeholder:`AnotaÃ§Ãµes adicionais sobre este gasto...`})]})]})})}function ae({expense:t,isOpen:r,onClose:a,onEdit:o,onDelete:c}){let l=I(r);if((0,H.useEffect)(()=>{if(!r)return;function e(e){e.key===`Escape`&&a()}return document.addEventListener(`keydown`,e),()=>document.removeEventListener(`keydown`,e)},[r,a]),!r||!t)return null;let u=i[i[t.budgetOrigin]?t.budgetOrigin:e(t.budgetOrigin)],p=t.country&&n[t.country],m=()=>{a(),o(t)},h=()=>{a(),c(t)};return(0,U.jsxs)(`div`,{className:`fixed inset-0 z-[600] flex justify-center items-end md:items-center`,role:`dialog`,"aria-modal":`true`,"aria-labelledby":`expense-actions-title`,children:[(0,U.jsx)(`div`,{className:`absolute inset-0 bg-black/40 backdrop-blur-sm`,onClick:a,"aria-hidden":`true`}),(0,U.jsxs)(`div`,{ref:l,className:`relative w-full max-w-sm bg-white dark:bg-gray-800 rounded-t-2xl md:rounded-2xl shadow-2xl flex flex-col`,children:[(0,U.jsxs)(`div`,{className:`flex items-center justify-between px-4 py-3 border-b border-gray-200 dark:border-gray-700`,children:[(0,U.jsx)(`h2`,{id:`expense-actions-title`,className:`text-lg font-semibold text-gray-900 dark:text-gray-100 truncate pr-2`,children:t.description}),(0,U.jsx)(`button`,{type:`button`,onClick:a,"aria-label":`Fechar`,className:`p-2 rounded-lg text-gray-500 hover:text-gray-700 dark:hover:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700`,children:(0,U.jsx)(d,{className:`w-5 h-5`})})]}),(0,U.jsxs)(`div`,{className:`px-4 py-3 flex items-center justify-center gap-4 text-sm text-gray-500 dark:text-gray-400 flex-wrap`,children:[(0,U.jsx)(`span`,{className:`font-semibold text-gray-700 dark:text-gray-300`,children:y(t.amount,t.currency)}),u&&(0,U.jsxs)(`span`,{className:`flex items-center gap-1.5`,children:[(0,U.jsx)(`span`,{children:u.icon}),(0,U.jsx)(`span`,{children:u.label})]}),p&&(0,U.jsxs)(`span`,{className:`flex items-center gap-1.5`,children:[(0,U.jsx)(`span`,{children:p.flag}),(0,U.jsx)(`span`,{children:p.name})]})]}),(0,U.jsxs)(`div`,{className:`flex gap-3 px-4 py-4 border-t border-gray-200 dark:border-gray-700`,children:[(0,U.jsxs)(`button`,{type:`button`,onClick:m,className:`flex-1 flex items-center justify-center gap-2 px-4 py-2.5 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none`,children:[(0,U.jsx)(f,{className:`w-4 h-4`}),`Editar`]}),(0,U.jsxs)(`button`,{type:`button`,onClick:h,className:`flex-1 flex items-center justify-center gap-2 px-4 py-2.5 text-sm font-medium text-white bg-red-600 hover:bg-red-700 rounded-lg focus:ring-2 focus:ring-red-500 focus:outline-none`,children:[(0,U.jsx)(s,{className:`w-4 h-4`}),`Excluir`]})]})]})]})}var $=[`japan`,`south-korea`,`general`,`outros`];function oe({expenses:e,onUpdate:t,onCreate:r,onDelete:i,isLoading:a=!1}){let[o,s]=(0,H.useState)(!1),[c,l]=(0,H.useState)(),[d,f]=(0,H.useState)(null),[p,m]=(0,H.useState)(null),{groupedByCountry:h,orderedCountryKeys:g}=(0,H.useMemo)(()=>{let t=e.reduce((e,t)=>{let n=t.country??`outros`;return e[n]||(e[n]=[]),e[n].push(t),e},{}),n=e=>{let t=j(e||``);return t?new Date(t).getTime():0};return Object.values(t).forEach(e=>{e.sort((e,t)=>n(e.date)-n(t.date))}),{groupedByCountry:t,orderedCountryKeys:[...$.filter(e=>t[e]),...Object.keys(t).filter(e=>!$.includes(e)).sort()]}},[e]),_=e=>{m(e)},v=e=>{m(null),l(e),s(!0)},b=e=>{m(null),f(e)},x=()=>{l(void 0),s(!1)},S=async()=>{d&&(await i(d.id),f(null))},C=async e=>{c?await Promise.resolve(t({...e,id:c.id})):await Promise.resolve(r(e))};if(a)return null;let w=e.reduce((e,t)=>e+(t.amountInBRL??0),0);return(0,U.jsxs)(`div`,{children:[e.length>0&&(0,U.jsx)(`div`,{className:`mb-6 p-4 rounded-2xl bg-gradient-to-r from-rose-50 to-orange-50 dark:from-rose-900/30 dark:to-orange-900/30 border border-rose-100 dark:border-rose-800`,children:(0,U.jsxs)(`div`,{className:`flex items-center gap-3`,children:[(0,U.jsx)(`div`,{className:`w-10 h-10 rounded-xl bg-rose-100 dark:bg-rose-900/50 flex items-center justify-center`,children:(0,U.jsx)(u,{className:`w-5 h-5 text-rose-700 dark:text-rose-300`})}),(0,U.jsxs)(`div`,{children:[(0,U.jsx)(`p`,{className:`text-sm font-medium text-gray-600 dark:text-gray-400`,children:`Total em gastos`}),(0,U.jsx)(`p`,{className:`text-xl font-bold text-rose-700 tabular-nums`,children:y(w)})]})]})}),(0,U.jsx)(`div`,{className:`space-y-8`,children:g.length===0?(0,U.jsx)(N,{icon:`ðŸ§¾`,title:`Nenhum gasto encontrado`,description:`Comece registrando seu primeiro gasto!`}):g.map(e=>{let t=h[e],r=n[e],i=r?.name??(e===`outros`?`Outros`:e),a=r?.flag??`ðŸŒ`,o=t.reduce((e,t)=>e+(t.amountInBRL??0),0);return t?.length?(0,U.jsxs)(`section`,{className:`space-y-4`,children:[(0,U.jsxs)(`div`,{className:`flex items-center justify-between gap-3 flex-wrap`,children:[(0,U.jsxs)(`div`,{className:`flex items-center gap-2 px-4 py-2 rounded-xl bg-white dark:bg-gray-800 shadow-sm border border-gray-200 dark:border-gray-700`,children:[(0,U.jsx)(`span`,{className:`text-xl`,"aria-hidden":!0,children:a}),(0,U.jsx)(`h2`,{className:`text-base font-semibold text-gray-900 dark:text-gray-100`,children:i}),(0,U.jsxs)(`span`,{className:`text-sm text-gray-500 dark:text-gray-400`,children:[t.length,` `,t.length===1?`gasto`:`gastos`]})]}),(0,U.jsx)(`span`,{className:`text-sm font-semibold text-rose-800 dark:text-rose-300 tabular-nums`,children:y(o)})]}),(0,U.jsx)(`div`,{className:`grid grid-cols-1 md:grid-cols-2 gap-3`,children:t.map(e=>(0,U.jsx)(q,{expense:e,onClick:_},e.id))})]},e):null})}),(0,U.jsx)(Q,{expense:c,isOpen:o,onClose:x,onSave:C}),(0,U.jsx)(ae,{expense:p,isOpen:!!p,onClose:()=>m(null),onEdit:v,onDelete:b}),(0,U.jsx)(B,{isOpen:!!d,onClose:()=>f(null),title:`Excluir gasto`,message:d?(0,U.jsxs)(U.Fragment,{children:[`Tem certeza que deseja excluir este gasto (`,y(d.amount,d.currency),`)?`]}):null,onConfirm:S})]})}function se(){let[e,t]=(0,H.useState)(!1),[n,r]=(0,H.useState)(`all`),{country:i,expenses:a,isReady:o}=D(),s=(0,H.useMemo)(()=>n===`all`?a:a.filter(e=>e.budgetOrigin===n),[a,n]),{createExpense:c,updateExpense:u,deleteExpense:d}=v(i),f=w(),p=async e=>{try{await c(e),f.success(`Gasto criado com sucesso!`)}catch(e){console.error(`Error creating expense:`,e),f.error(`Erro ao criar gasto`)}};return(0,U.jsxs)(`div`,{className:`min-h-screen bg-gray-50 dark:bg-gray-900 pb-20 md:pb-6`,children:[(0,U.jsx)(R,{title:`Gastos`,subtitle:`Registre e acompanhe seus gastos`,filter:(0,U.jsxs)(`div`,{className:`flex gap-2 flex-wrap md:flex-nowrap`,children:[(0,U.jsx)(O,{showDayFilter:!1}),(0,U.jsx)(V,{value:n,onChange:r})]})}),(0,U.jsx)(`main`,{className:`max-w-6xl mx-auto px-4 md:px-6 py-6 mb-12`,children:(0,U.jsx)(oe,{expenses:s,onCreate:p,onUpdate:async e=>{try{await u(e),f.success(`Gasto atualizado com sucesso!`)}catch(e){console.error(`Error updating expense:`,e),f.error(`Erro ao atualizar gasto`)}},onDelete:async e=>{try{await d(e),f.success(`Gasto excluÃ­do com sucesso!`)}catch(e){console.error(`Error deleting expense:`,e),f.error(`Erro ao excluir gasto`)}},isLoading:!o})}),(0,U.jsx)(z,{onClick:()=>t(!0),icon:(0,U.jsx)(l,{className:`w-6 h-6`}),label:`Adicionar`}),e&&(0,U.jsx)(Q,{isOpen:e,onClose:()=>t(!1),onSave:async e=>{await p(e),t(!1)}})]})}export{se as default};