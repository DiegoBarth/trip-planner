import{b as e,y as t}from"./google-login-button-BZ5FbxrR.js";import{s as n}from"./router-BCc6NGaV.js";var r=e(),i=`false`,a=`false`,o=i===`true`,s=a===`true`;function c(e={}){let{immediate:t=!1,onNeedRefresh:r,onOfflineReady:i,onRegistered:a,onRegisteredSW:c,onRegisterError:l}=e,u,d,f,p=async(e=!0)=>{await d,o||f?.()};async function m(){if(`serviceWorker`in navigator){if(u=await n(async()=>{let{Workbox:e}=await import(`./workbox-window.prod.es5-BXSDqsd7.js`);return{Workbox:e}},[]).then(({Workbox:e})=>new e(`/trip-planner/sw.js`,{scope:`/trip-planner/`,type:`classic`})).catch(e=>{l?.(e)}),!u)return;if(f=()=>{u?.messageSkipWaiting()},!s)if(o)u.addEventListener(`activated`,e=>{(e.isUpdate||e.isExternal)&&window.location.reload()}),u.addEventListener(`installed`,e=>{e.isUpdate||i?.()});else{let e=!1,t=()=>{e=!0,u?.addEventListener(`controlling`,e=>{e.isUpdate&&window.location.reload()}),r?.()};u.addEventListener(`installed`,n=>{n.isUpdate===void 0?n.isExternal===void 0?!e&&i?.():n.isExternal?t():!e&&i?.():n.isUpdate||i?.()}),u.addEventListener(`waiting`,t)}u.register({immediate:t}).then(e=>{c?c(`/trip-planner/sw.js`,e):a?.(e)}).catch(e=>{l?.(e)})}}return d=m(),p}function l(e={}){let{immediate:t=!0,onNeedRefresh:n,onOfflineReady:i,onRegistered:a,onRegisteredSW:o,onRegisterError:s}=e,[l,u]=(0,r.useState)(!1),[d,f]=(0,r.useState)(!1),[p]=(0,r.useState)(()=>c({immediate:t,onOfflineReady(){f(!0),i?.()},onNeedRefresh(){u(!0),n?.()},onRegistered:a,onRegisteredSW:o,onRegisterError:s}));return{needRefresh:[l,u],offlineReady:[d,f],updateServiceWorker:p}}var u=t();function d(){let{needRefresh:[e,t],updateServiceWorker:n}=l({onRegistered(e){console.log(`SW registered:`,e?.scope)},onRegisterError(e){console.warn(`SW registration error:`,e)}});return e?(0,u.jsx)(`div`,{className:`fixed bottom-20 left-4 right-4 z-[9999] md:left-auto md:right-4 md:max-w-sm pointer-events-auto`,children:(0,u.jsxs)(`div`,{className:`flex items-center justify-between gap-3 rounded-xl bg-gray-900 dark:bg-gray-700 text-white p-4 shadow-lg border border-gray-700 dark:border-gray-600`,children:[(0,u.jsx)(`span`,{className:`text-sm`,children:`Nova versão disponível!`}),(0,u.jsxs)(`div`,{className:`flex gap-2 flex-shrink-0`,children:[(0,u.jsx)(`button`,{type:`button`,onClick:()=>t(!1),className:`px-3 py-1.5 text-sm rounded-lg bg-gray-700 hover:bg-gray-600`,children:`Depois`}),(0,u.jsx)(`button`,{type:`button`,onClick:()=>n(!0),className:`px-3 py-1.5 text-sm font-medium rounded-lg bg-indigo-500 hover:bg-indigo-600`,children:`Atualizar`})]})]})}):null}export{d as default};