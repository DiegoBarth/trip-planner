import{C as e,S as t,i as n,m as r}from"./google-login-button-CK2bO50y.js";import{i}from"./react-query-BB-sDLdC.js";import{A as a,D as o,F as s,K as c,O as l,P as u,Q as d,R as f,V as p,a as m,j as h,l as g,n as _,v}from"./ui-icons-BBIUuva6.js";import{F as y,N as b,R as x,n as S,r as C,t as w}from"./index-C11sPK8M.js";var T=e(),E=t();function D(e,t){let n=`https://www.google.com/maps/search/?api=1&query=${e},${t}`;window.open(n,`_blank`)}const O=(0,T.memo)(function({attraction:e,arrivalTime:t,departureTime:i,duration:o,conflicts:c,onToggleVisited:u}){let f=n[e.type],m=c.some(e=>e.severity===`error`),h=c.some(e=>e.severity===`warning`),g=e.visited,_=e.id===-999,b=e.lat&&e.lng;return(0,E.jsxs)(`div`,{className:`relative`,children:[(0,E.jsx)(`div`,{className:`
          absolute left-0 top-6 w-3 h-3 md:w-3.5 md:h-3.5 rounded-full border-2 border-white shadow z-20 -translate-x-1/2
          ${g?`bg-emerald-500`:`bg-slate-400`}
        `}),(0,E.jsxs)(`div`,{className:`
          relative ml-4 md:ml-6 rounded-2xl shadow-xl overflow-hidden border-l-4
          min-h-[180px] md:min-h-[200px]
          ${m?`border-l-red-500`:``}
          ${h&&!m?`border-l-amber-500`:``}
          ${g&&!m&&!h?`border-l-emerald-500`:``}
          ${!m&&!h&&!g?`border-l-slate-400`:``}
          ${g?`opacity-95`:``}
        `,children:[(0,E.jsx)(`div`,{className:`absolute inset-0 bg-gradient-to-br from-blue-500 to-purple-600`,children:(e.thumbnailUrl||e.imageUrl)?.trim()?(0,E.jsx)(`img`,{src:(e.thumbnailUrl||e.imageUrl||``).trim(),alt:e.name,referrerPolicy:`no-referrer`,loading:`lazy`,decoding:`async`,width:800,height:400,className:`absolute inset-0 w-full h-full object-cover`}):null}),(0,E.jsx)(`div`,{className:`absolute inset-0 bg-gradient-to-t from-black/90 via-black/60 to-black/50 pointer-events-none`}),(0,E.jsxs)(`div`,{className:`relative z-10 pl-4 pr-5 pt-4 pb-4 text-white`,children:[(0,E.jsxs)(`div`,{className:`flex items-center gap-3 mb-3 pb-2 border-b border-white/20 min-w-0`,children:[(0,E.jsx)(l,{className:`w-4 h-4 text-white/80 flex-shrink-0 self-start mt-0.5`}),(0,E.jsxs)(`div`,{className:`flex flex-wrap items-baseline gap-x-2 gap-y-0.5 text-sm font-medium flex-1 min-w-0 text-shadow`,children:[(0,E.jsx)(`span`,{className:`font-bold`,children:t}),(0,E.jsx)(`span`,{className:`text-white/60`,children:`‚Üí`}),(0,E.jsx)(`span`,{className:`font-bold`,children:i}),(0,E.jsxs)(`span`,{className:`text-xs text-white/70 whitespace-nowrap`,children:[`(`,o,`min)`]})]}),(0,E.jsxs)(`div`,{className:`flex items-center gap-2 flex-shrink-0`,children:[b&&(0,E.jsx)(`button`,{onClick:t=>{t.stopPropagation(),D(e.lat,e.lng)},className:`p-1.5 rounded-full bg-white/20 hover:bg-white/30 backdrop-blur-sm transition-all`,title:`Abrir no Google Maps`,children:(0,E.jsx)(v,{className:`w-5 h-5 text-white`})}),!_&&(0,E.jsx)(`button`,{onClick:t=>{t.stopPropagation(),u?.(e.id)},className:`
                    p-1.5 rounded-full backdrop-blur-sm transition-all
                    ${g?`bg-emerald-500/30 hover:bg-emerald-500/40`:`bg-white/20 hover:bg-white/30`}
                  `,title:g?`Marcar como n√£o visitado`:`Marcar como visitado`,children:(0,E.jsx)(a,{className:`w-5 h-5 ${g?`text-emerald-300`:`text-white`}`})})]})]}),(0,E.jsx)(`h3`,{className:`text-lg font-bold mb-2 line-clamp-2 drop-shadow-md text-shadow`,children:e.name}),(0,E.jsxs)(`div`,{className:`flex items-center gap-2 text-sm text-white/80 mb-2 text-shadow`,children:[(0,E.jsx)(p,{className:`w-3.5 h-3.5 flex-shrink-0`}),(0,E.jsxs)(`span`,{children:[e.region?`${e.region}, `:``,e.city]})]}),!_&&(0,E.jsxs)(`div`,{className:`flex items-center gap-2 text-sm mb-3`,children:[(0,E.jsx)(s,{className:`w-3.5 h-3.5 text-emerald-300 flex-shrink-0`}),e.couplePrice?(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(`span`,{className:`font-semibold text-emerald-300`,children:y(e.couplePrice,e.currency)}),(0,E.jsxs)(`span`,{className:`text-white/70 text-xs`,children:[`(`,y(e.priceInBRL),`)`]})]}):(0,E.jsx)(`span`,{className:`font-semibold text-emerald-300`,children:`Gratuito`})]}),!_&&(0,E.jsxs)(`div`,{className:`flex flex-wrap gap-2 mb-3`,children:[f&&(0,E.jsx)(`span`,{className:`px-2 py-1 bg-white/20 text-white text-xs rounded-md backdrop-blur-sm`,children:f.label}),e.needsReservation&&e.reservationStatus&&(0,E.jsxs)(`span`,{className:`px-2 py-1 bg-white/20 text-white text-xs rounded-md backdrop-blur-sm flex items-center gap-1`,children:[(0,E.jsx)(`span`,{children:r[e.reservationStatus].icon}),(0,E.jsx)(`span`,{children:r[e.reservationStatus].label})]})]}),c.length>0&&(0,E.jsx)(`div`,{className:`space-y-2 mb-3`,children:c.map((e,t)=>(0,E.jsxs)(`div`,{className:`
                    flex items-start gap-2 text-sm p-2.5 rounded-lg backdrop-blur-sm border
                    ${e.severity===`error`?`bg-red-500/20 border-red-400/40 text-red-200`:`bg-amber-500/20 border-amber-400/40 text-amber-200`}
                  `,children:[(0,E.jsx)(d,{className:`w-4 h-4 flex-shrink-0 mt-0.5`}),(0,E.jsx)(`span`,{className:`font-medium`,children:e.message})]},t))}),e.notes&&(0,E.jsxs)(`div`,{className:`text-sm bg-white/10 p-3 rounded-xl backdrop-blur-sm border border-white/20`,children:[(0,E.jsx)(`span`,{className:`font-semibold`,children:`üí°`}),` `,e.notes]})]})]})]})}),k=(0,T.memo)(function({segment:e}){let t=()=>{switch(e.travelMode){case`walking`:return(0,E.jsx)(m,{className:`w-4 h-4`});case`driving`:return(0,E.jsx)(u,{className:`w-4 h-4`});case`transit`:return(0,E.jsx)(u,{className:`w-4 h-4`});default:return(0,E.jsx)(f,{className:`w-4 h-4`})}},n=()=>{switch(e.travelMode){case`walking`:return`A p√©`;case`driving`:return`Carro`;case`transit`:return`Transporte`;default:return`Deslocamento`}};return(0,E.jsxs)(`div`,{className:`relative flex items-center pb-6`,children:[(0,E.jsx)(`div`,{className:`absolute left-0 top-1/2 -translate-y-1/2 w-2 h-2 rounded-full bg-slate-400 dark:bg-slate-500 z-10 -translate-x-1/2`,"aria-hidden":!0}),(0,E.jsxs)(`div`,{className:`ml-4 md:ml-6 flex flex-col md:flex-row md:items-center gap-2 md:gap-4 px-4 py-3 rounded-2xl shadow-md border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 w-full md:w-auto`,children:[(0,E.jsxs)(`div`,{className:`flex items-center gap-2 text-gray-700 dark:text-gray-200`,children:[(0,E.jsx)(`span`,{className:`flex items-center justify-center w-8 h-8 rounded-lg bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300`,children:t()}),(0,E.jsx)(`span`,{className:`text-sm md:text-base font-semibold`,children:n()})]}),(0,E.jsx)(`div`,{className:`hidden md:block h-5 w-px bg-gray-200 dark:bg-gray-600`}),(0,E.jsxs)(`div`,{className:`flex items-center gap-3 md:gap-4 text-sm`,children:[(0,E.jsxs)(`div`,{className:`flex items-center gap-1.5 text-gray-600 dark:text-gray-300`,children:[(0,E.jsx)(l,{className:`w-4 h-4 text-gray-500 dark:text-gray-400`}),(0,E.jsx)(`span`,{className:`font-semibold text-gray-900 dark:text-gray-100`,children:e.durationMinutes}),(0,E.jsx)(`span`,{children:`min`})]}),(0,E.jsx)(`span`,{className:`text-gray-300 dark:text-gray-600`,children:`‚Ä¢`}),(0,E.jsxs)(`div`,{className:`flex items-center gap-1 text-gray-600 dark:text-gray-300`,children:[(0,E.jsx)(`span`,{className:`font-semibold text-gray-900 dark:text-gray-100`,children:e.distanceKm.toFixed(1)}),(0,E.jsx)(`span`,{children:`km`})]})]})]})]})});var A={date:``,temp:0,tempMin:0,tempMax:0,description:`Sem previs√£o dispon√≠vel`,icon:`üå§Ô∏è`,humidity:0,windSpeed:0,pop:0,rain:0,periods:{morning:void 0,afternoon:void 0,evening:void 0}};function j({weather:e}){let t=e??A,n=t.periods??{},r=!e,i=e?C(t):null,a=e&&t.pop>.4,s=n.morning||n.afternoon||n.evening;return(0,E.jsxs)(`div`,{className:`
        border-2 rounded-lg p-3 h-[207px] flex flex-col justify-between
        ${a?`bg-blue-50 dark:bg-blue-900/30 border-blue-300 dark:border-blue-700`:`bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700`}
      `,children:[(0,E.jsxs)(`div`,{children:[(0,E.jsxs)(`div`,{className:`flex items-center justify-between mb-2`,children:[(0,E.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,E.jsx)(`span`,{className:`text-3xl`,children:t.icon}),(0,E.jsxs)(`div`,{children:[(0,E.jsxs)(`div`,{className:`text-2xl font-bold text-gray-900 dark:text-gray-100`,children:[t.tempMin,`¬∞ - `,t.tempMax,`¬∞`]}),(0,E.jsx)(`div`,{className:`text-xs text-gray-600 dark:text-gray-400 capitalize`,children:t.description})]})]}),(0,E.jsx)(`div`,{className:`text-sm text-gray-600 dark:text-gray-400 text-right`,children:(0,E.jsxs)(`div`,{className:`flex items-center gap-1 justify-end`,children:[(0,E.jsx)(g,{className:`w-4 h-4`}),(0,E.jsx)(`span`,{children:`min / max`})]})})]}),(0,E.jsx)(`div`,{className:`min-h-[28px]`,children:s&&(0,E.jsxs)(`div`,{className:`flex flex-wrap items-center gap-x-4 gap-y-1.5 text-sm text-gray-700 dark:text-gray-300 mb-2 pb-2 border-b border-gray-200 dark:border-gray-600`,children:[n.morning&&(0,E.jsxs)(`span`,{className:`flex items-center gap-1.5`,children:[(0,E.jsx)(`span`,{className:`text-xs font-medium text-gray-500 dark:text-gray-400`,children:`Manh√£`}),(0,E.jsx)(`span`,{children:n.morning.icon}),(0,E.jsxs)(`span`,{className:`font-semibold`,children:[n.morning.temp,`¬∞`]}),n.morning.pop>.3&&(0,E.jsxs)(`span`,{className:`text-xs text-blue-600 dark:text-blue-400`,children:[Math.round(n.morning.pop*100),`%`]})]}),n.afternoon&&(0,E.jsxs)(`span`,{className:`flex items-center gap-1.5`,children:[(0,E.jsx)(`span`,{className:`text-xs font-medium text-gray-500 dark:text-gray-400`,children:`Tarde`}),(0,E.jsx)(`span`,{children:n.afternoon.icon}),(0,E.jsxs)(`span`,{className:`font-semibold`,children:[n.afternoon.temp,`¬∞`]}),n.afternoon.pop>.3&&(0,E.jsxs)(`span`,{className:`text-xs text-blue-600 dark:text-blue-400`,children:[Math.round(n.afternoon.pop*100),`%`]})]}),n.evening&&(0,E.jsxs)(`span`,{className:`flex items-center gap-1.5`,children:[(0,E.jsx)(`span`,{className:`text-xs font-medium text-gray-500 dark:text-gray-400`,children:`Noite`}),(0,E.jsx)(`span`,{children:n.evening.icon}),(0,E.jsxs)(`span`,{className:`font-semibold`,children:[n.evening.temp,`¬∞`]}),n.evening.pop>.3&&(0,E.jsxs)(`span`,{className:`text-xs text-blue-600 dark:text-blue-400`,children:[Math.round(n.evening.pop*100),`%`]})]})]})})]}),(0,E.jsxs)(`div`,{children:[r&&(0,E.jsx)(`div`,{className:`mb-2 text-[11px] text-amber-700 dark:text-amber-400`,children:`Previs√£o dispon√≠vel apenas para os pr√≥ximos 5 dias.`}),(0,E.jsxs)(`div`,{className:`flex items-center gap-3 text-xs text-gray-600 dark:text-gray-400 mb-2`,children:[(0,E.jsxs)(`div`,{className:`flex items-center gap-1`,children:[(0,E.jsx)(o,{className:`w-3 h-3`}),(0,E.jsxs)(`span`,{children:[`at√© `,Math.round(t.pop*100),`% chuva`]})]}),(0,E.jsxs)(`div`,{className:`flex items-center gap-1`,children:[(0,E.jsx)(_,{className:`w-3 h-3`}),(0,E.jsxs)(`span`,{children:[t.windSpeed.toFixed(1),` m/s`]})]}),(0,E.jsxs)(`div`,{className:`flex items-center gap-1`,children:[`üíß `,t.humidity,`%`]})]}),e&&(0,E.jsx)(`div`,{className:`
            text-xs font-medium p-2 rounded
            ${a?`bg-blue-100 dark:bg-blue-900/50 text-blue-800 dark:text-blue-200`:`bg-green-100 dark:bg-green-900/50 text-green-800 dark:text-green-200`}
          `,children:i})]})]})}function M(e){let{data:t=[],isLoading:n,error:r}=i(w(e));return{forecast:t,isLoading:n,error:r}}function N({timeline:e,city:t,date:n,onToggleVisited:r}){let i=t??e?.attractions[0]?.city??``,a=n??e?.date??``,{forecast:o}=M(i),s=(0,T.useRef)(null),u=e?(()=>{let t=-1;return e.attractions.forEach((e,n)=>{e.visited&&(t=n)}),t})():-1;(0,T.useEffect)(()=>{u<0||!s.current||s.current.scrollIntoView({behavior:`smooth`,block:`center`})},[u,e?.dayNumber]);let d=a&&o.length>0?S(o,b(a)):null;return e?(0,E.jsxs)(`div`,{className:`space-y-6`,children:[(0,E.jsx)(`div`,{className:`h-[207px] flex items-start`,children:a&&(0,E.jsx)(`div`,{className:`h-full w-full`,children:(0,E.jsx)(j,{weather:d})})}),(0,E.jsx)(`div`,{className:`bg-gradient-to-br from-slate-600 to-slate-700 dark:from-slate-700 dark:to-slate-800 text-white rounded-2xl p-5 md:p-6 shadow-lg`,children:(0,E.jsxs)(`div`,{className:`space-y-4`,children:[(0,E.jsxs)(`div`,{className:`flex items-center justify-between`,children:[(0,E.jsxs)(`div`,{className:`text-sm font-medium opacity-90 mb-1`,children:[`Dia `,e.dayNumber]}),(0,E.jsx)(`h2`,{className:`text-lg md:text-3xl font-bold mb-2 capitalize`,children:x(e.date)})]}),(0,E.jsxs)(`div`,{className:`flex items-center gap-2 text-base md:text-lg opacity-90`,children:[(0,E.jsx)(l,{className:`w-5 h-5`}),(0,E.jsx)(`span`,{className:`font-semibold`,children:e.startTime}),(0,E.jsx)(`span`,{children:`‚Üí`}),(0,E.jsx)(`span`,{className:`font-semibold`,children:e.endTime})]}),(0,E.jsxs)(`div`,{className:`flex items-center gap-6 pt-4 border-t border-white/20 text-sm md:text-base`,children:[(0,E.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,E.jsx)(p,{className:`w-5 h-5 md:w-6 md:h-6`}),(0,E.jsxs)(`div`,{children:[(0,E.jsx)(`div`,{className:`font-bold text-md:text-xl`,children:e.attractions.length}),(0,E.jsx)(`div`,{className:`text-xs opacity-75`,children:`locais`})]})]}),(0,E.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,E.jsx)(m,{className:`w-5 h-5 md:w-6 md:h-6`}),(0,E.jsxs)(`div`,{children:[(0,E.jsxs)(`div`,{className:`font-bold text-md md:text-xl`,children:[e.totalDistance.toFixed(1),` km`]}),(0,E.jsx)(`div`,{className:`text-xs opacity-75`,children:`dist√¢ncia`})]})]}),(0,E.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,E.jsx)(l,{className:`w-5 h-5 md:w-6 md:h-6`}),(0,E.jsxs)(`div`,{children:[(0,E.jsxs)(`div`,{className:`font-bold text-md md:text-xl`,children:[e.totalTravelTime,`min`]}),(0,E.jsx)(`div`,{className:`text-xs opacity-75`,children:`viagem`})]})]})]}),e.conflicts.length>0&&(0,E.jsxs)(`div`,{className:`mt-4 bg-white/10 backdrop-blur rounded-xl p-4 flex items-start gap-3`,children:[(0,E.jsx)(h,{className:`w-6 h-6 flex-shrink-0 mt-0.5`}),(0,E.jsxs)(`div`,{children:[(0,E.jsxs)(`div`,{className:`font-semibold text-base`,children:[e.conflicts.length,` `,e.conflicts.length===1?`conflito detectado`:`conflitos detectados`]}),(0,E.jsx)(`div`,{className:`text-sm opacity-90 mt-1`,children:`Verifique os avisos abaixo`})]})]})]})}),(0,E.jsxs)(`div`,{className:`relative pl-3 md:pl-6 pt-2`,children:[(0,E.jsx)(`div`,{className:`absolute left-0 top-0 bottom-0 w-0.5 bg-gray-200 dark:bg-gray-700 rounded-full`,"aria-hidden":!0}),(0,E.jsx)(`div`,{className:`space-y-6`,children:e.attractions.map((t,n)=>{let i=n>0?e.segments[n-1]:null,a=e.conflicts.filter(e=>e.attractionId===t.id),o=t.arrivalTime||e.startTime,c=t.departureTime||e.startTime,l=t.duration||60;return(0,E.jsxs)(`div`,{ref:n===u?s:void 0,className:`relative`,children:[i&&(0,E.jsx)(k,{segment:i}),(0,E.jsx)(O,{attraction:t,arrivalTime:o,departureTime:c,duration:l,conflicts:a,onToggleVisited:r})]},t.id)})})]})]}):(0,E.jsxs)(`div`,{className:`text-center py-12`,children:[(0,E.jsx)(c,{className:`w-12 h-12 text-gray-400 dark:text-gray-500 mx-auto mb-3`}),(0,E.jsx)(`p`,{className:`text-gray-600 dark:text-gray-400`,children:`Nenhuma atra√ß√£o para mostrar na timeline`}),(0,E.jsx)(`p`,{className:`text-sm text-gray-500 dark:text-gray-400 mt-1`,children:`Adicione atra√ß√µes com coordenadas para visualizar o roteiro`})]})}export{N as default};