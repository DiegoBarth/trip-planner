import{C as e,S as t,o as n}from"./google-login-button-CK2bO50y.js";import"./react-vendor-B0_zmQzX.js";import{Y as r,h as i,s as a,t as o}from"./ui-icons-ZvUVfxiW.js";import"./zod-BU_exWGf.js";import{L as s,P as c,q as l}from"./index-DpljZKJp.js";import{t as u}from"./EmptyState-TiN00nqa.js";import{t as d}from"./useFocusTrap-C4PmKqSe.js";import{t as f}from"./ConfirmModal-BXbTnVXY.js";import"./validateWithToast-CwomA5yc.js";import"./DateField-B33zTQ1P.js";import"./date-fns-C2-phGQM.js";import{t as p}from"./ModalBudget-BpzPYip-.js";var m=e(),h=t();function g({budget:e,onClick:t}){let r=n[e.origin];return(0,h.jsx)(`div`,{role:t?`button`:void 0,tabIndex:t?0:void 0,onClick:()=>t?.(e),onKeyDown:n=>{t&&(n.key===`Enter`||n.key===` `)&&(n.preventDefault(),t(e))},className:`group bg-white dark:bg-gray-800 rounded-2xl shadow-md overflow-hidden border-l-4 transition-all ${t?`cursor-pointer hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-emerald-500/50`:``}`,style:{borderLeftColor:r.color},children:(0,h.jsxs)(`div`,{className:`p-4`,children:[(0,h.jsxs)(`div`,{className:`flex items-center gap-3 min-w-0`,children:[(0,h.jsx)(`div`,{className:`w-11 h-11 rounded-xl flex items-center justify-center text-xl flex-shrink-0`,style:{backgroundColor:`${r.color}18`},children:r.icon}),(0,h.jsx)(`h3`,{className:`font-semibold text-gray-900 dark:text-gray-100 truncate min-w-0 flex-1`,title:e.description,children:e.description}),(0,h.jsx)(`span`,{className:`text-lg font-bold tabular-nums flex-shrink-0 text-emerald-700 dark:text-emerald-300`,children:c(e.amount)})]}),(0,h.jsxs)(`div`,{className:`pt-3 border-gray-100 dark:border-gray-700 flex items-center gap-2 text-sm text-gray-500 dark:text-gray-400`,children:[(0,h.jsx)(o,{className:`w-4 h-4 text-gray-400 flex-shrink-0`}),(0,h.jsx)(`span`,{children:s(e.date)})]})]})})}function _({budget:e,isOpen:t,onClose:o,onEdit:s,onDelete:l}){let u=d(t);if((0,m.useEffect)(()=>{if(!t)return;function e(e){e.key===`Escape`&&o()}return document.addEventListener(`keydown`,e),()=>document.removeEventListener(`keydown`,e)},[t,o]),!t||!e)return null;let f=n[e.origin],p=()=>{o(),s(e)},g=()=>{o(),l(e)};return(0,h.jsxs)(`div`,{className:`fixed inset-0 z-[600] flex justify-center items-end md:items-center`,role:`dialog`,"aria-modal":`true`,"aria-labelledby":`budget-actions-title`,children:[(0,h.jsx)(`div`,{className:`absolute inset-0 bg-black/40 backdrop-blur-sm`,onClick:o,"aria-hidden":`true`}),(0,h.jsxs)(`div`,{ref:u,className:`relative w-full max-w-sm bg-white dark:bg-gray-800 rounded-t-2xl md:rounded-2xl shadow-2xl flex flex-col`,children:[(0,h.jsxs)(`div`,{className:`flex items-center justify-between px-4 py-3 border-b border-gray-200 dark:border-gray-700`,children:[(0,h.jsx)(`h2`,{id:`budget-actions-title`,className:`text-lg font-semibold text-gray-900 dark:text-gray-100 truncate pr-2`,children:e.description}),(0,h.jsx)(`button`,{type:`button`,onClick:o,"aria-label":`Fechar`,className:`p-2 rounded-lg text-gray-500 hover:text-gray-700 dark:hover:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700`,children:(0,h.jsx)(r,{className:`w-5 h-5`})})]}),(0,h.jsxs)(`div`,{className:`px-4 py-3 flex items-center justify-center gap-4 text-sm text-gray-500 dark:text-gray-400 flex-wrap`,children:[f&&(0,h.jsxs)(`span`,{className:`flex items-center gap-2`,children:[(0,h.jsx)(`span`,{children:f.icon}),(0,h.jsx)(`span`,{children:f.label})]}),(0,h.jsx)(`span`,{className:`font-semibold text-gray-700 dark:text-gray-300`,children:c(e.amount)})]}),(0,h.jsxs)(`div`,{className:`flex gap-3 px-4 py-4 border-t border-gray-200 dark:border-gray-700`,children:[(0,h.jsxs)(`button`,{type:`button`,onClick:p,className:`flex-1 flex items-center justify-center gap-2 px-4 py-2.5 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none`,children:[(0,h.jsx)(i,{className:`w-4 h-4`}),`Editar`]}),(0,h.jsxs)(`button`,{type:`button`,onClick:g,className:`flex-1 flex items-center justify-center gap-2 px-4 py-2.5 text-sm font-medium text-white bg-red-600 hover:bg-red-700 rounded-lg focus:ring-2 focus:ring-red-500 focus:outline-none`,children:[(0,h.jsx)(a,{className:`w-4 h-4`}),`Excluir`]})]})]})]})}function v({budgets:e,isLoading:t,onUpdate:r,onCreate:i,onDelete:a}){let[o,s]=(0,m.useState)(!1),[c,d]=(0,m.useState)(),[v,y]=(0,m.useState)(null),[b,x]=(0,m.useState)(null),S=l(),C=e.reduce((e,t)=>(e[t.origin]||(e[t.origin]=[]),e[t.origin].push(t),e),{});Object.keys(C).forEach(e=>{C[e].sort((e,t)=>new Date(t.date).getTime()-new Date(e.date).getTime())});let w=Object.keys(C).sort((e,t)=>{let r=n[e]?.label??e,i=n[t]?.label??t;return r.localeCompare(i,`pt-BR`)}),T=()=>{d(void 0),s(!1)},E=async e=>{try{c?await r({id:c.id,...e}):await i(e),T()}catch(e){console.error(`Error saving budget:`,e),S.error(`Erro ao salvar or√ßamento`)}},D=async()=>{v&&(await a(v.id),y(null))},O=e=>{x(e)};return t?null:(0,h.jsxs)(`div`,{children:[(0,h.jsx)(`div`,{className:`space-y-8`,children:w.length===0?(0,h.jsx)(u,{icon:`üíµ`,title:`Nenhum or√ßamento encontrado`,description:`Comece adicionando seu primeiro or√ßamento!`}):w.map(e=>{let t=C[e],r=n[e];return(0,h.jsxs)(`section`,{className:`space-y-4`,children:[(0,h.jsxs)(`div`,{className:`flex items-center gap-2 px-4 py-2.5 rounded-xl bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 shadow-sm w-fit`,children:[(0,h.jsx)(`span`,{className:`text-xl`,children:r.icon}),(0,h.jsx)(`h2`,{className:`text-base font-semibold text-gray-900 dark:text-gray-100`,children:r.label}),(0,h.jsxs)(`span`,{className:`text-sm text-gray-500 dark:text-gray-400`,children:[t.length,` `,t.length===1?`item`:`itens`]})]}),(0,h.jsx)(`div`,{className:`grid grid-cols-1 md:grid-cols-2 gap-4`,children:t.map(e=>(0,h.jsx)(g,{budget:e,onClick:O},e.id))})]},e)})}),(0,h.jsx)(p,{budget:c,isOpen:o,onClose:T,onSave:E}),(0,h.jsx)(_,{budget:b,isOpen:!!b,onClose:()=>x(null),onEdit:e=>{x(null),d(e),s(!0)},onDelete:e=>{x(null),y(e)}}),(0,h.jsx)(f,{isOpen:!!v,onClose:()=>y(null),title:`Excluir or√ßamento`,message:v?(0,h.jsxs)(h.Fragment,{children:[`Tem certeza que deseja excluir "`,v.description,`"?`]}):null,onConfirm:D})]})}export{v as default};