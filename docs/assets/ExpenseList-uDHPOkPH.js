import{_ as e,b as t,c as n,l as r,o as i,v as a,y as o}from"./google-login-button-BZ5FbxrR.js";import"./react-vendor-EEmDTsrY.js";import"./react-query-D7qSFt80.js";import{C as s,H as c,_ as l,q as u,x as d}from"./ui-icons-Co5DzGlV.js";import"./zod-BU_exWGf.js";import{C as f,E as p,s as m,x as h}from"./index-BTe7U0A9.js";import{t as g}from"./EmptyState-Bk31O1a1.js";import{t as _}from"./useFocusTrap-BmfH02Pg.js";import{t as v}from"./ConfirmModal-BfGJ3oLR.js";import"./validateWithToast-CE0b6KyH.js";import"./DateField-wLBBZmga.js";import"./date-fns-B4vuNjeo.js";import{t as y}from"./ModalExpense-it817ppx.js";var b=t(),x=o(),S={food:`bg-amber-500`,attraction:`bg-violet-500`,shopping:`bg-emerald-500`,cosmetics:`bg-pink-500`,electronics:`bg-blue-500`,accommodation:`bg-indigo-500`,transport:`bg-cyan-500`,other:`bg-slate-500`},C={food:`bg-amber-100`,attraction:`bg-violet-100`,shopping:`bg-emerald-100`,cosmetics:`bg-pink-100`,electronics:`bg-blue-100`,accommodation:`bg-indigo-100`,transport:`bg-cyan-100`,other:`bg-slate-100`},w={Diego:`bg-blue-100 dark:bg-blue-900/50 text-blue-800 dark:text-blue-300`,Pamela:`bg-pink-100 dark:bg-pink-900/50 text-pink-800 dark:text-pink-300`,Casal:`bg-violet-100 dark:bg-violet-900/50 text-violet-800 dark:text-violet-300`,AlimentaÃ§Ã£o:`bg-red-100 dark:bg-red-900/50 text-red-800 dark:text-red-300`,AtraÃ§Ãµes:`bg-cyan-100 dark:bg-cyan-900/50 text-cyan-800 dark:text-cyan-300`,Transporte:`bg-green-100 dark:bg-green-900/50 text-green-800 dark:text-green-300`};function T({expense:t,onClick:n}){let o=r[t.category]?t.category:a(t.category),s=i[t.budgetOrigin]?t.budgetOrigin:e(t.budgetOrigin),l=r[o],u=i[s],d=S[o]??S.other,h=C[o]??C.other;return(0,x.jsxs)(`div`,{role:n?`button`:void 0,tabIndex:n?0:void 0,onClick:()=>n?.(t),onKeyDown:e=>{n&&(e.key===`Enter`||e.key===` `)&&(e.preventDefault(),n(t))},className:`bg-white dark:bg-gray-800 rounded-2xl shadow-md overflow-hidden transition-shadow ${n?`cursor-pointer hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-rose-500/50`:``}`,children:[(0,x.jsx)(`div`,{className:`h-1 ${d}`}),(0,x.jsxs)(`div`,{className:`p-4`,children:[(0,x.jsxs)(`div`,{className:`flex items-start justify-between gap-3`,children:[(0,x.jsxs)(`div`,{className:`flex items-center gap-3 min-w-0 flex-1`,children:[(0,x.jsx)(`div`,{className:`w-11 h-11 rounded-xl flex items-center justify-center text-xl flex-shrink-0 ${h}`,children:l.icon}),(0,x.jsxs)(`div`,{className:`min-w-0`,children:[(0,x.jsx)(`h3`,{className:`font-semibold text-gray-900 dark:text-gray-100 truncate`,children:t.description}),(0,x.jsxs)(`div`,{className:`flex items-center gap-2 mt-1.5 flex-wrap`,children:[(0,x.jsxs)(`span`,{className:`text-xs px-2 py-0.5 rounded-md font-medium bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300`,children:[l.icon,` `,l.label]}),(0,x.jsx)(`span`,{className:m(`text-xs px-2 py-0.5 rounded-md font-medium`,w[s]??`bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300`),children:u.label})]})]})]}),(0,x.jsxs)(`div`,{className:`text-right flex-shrink-0`,children:[(0,x.jsx)(`p`,{className:`text-lg font-bold text-rose-800 dark:text-rose-300 tabular-nums`,children:f(t.amount,t.currency)}),t.currency!==`BRL`&&(0,x.jsx)(`p`,{className:`text-xs text-gray-500 dark:text-gray-400`,children:f(t.amountInBRL)})]})]}),t.notes&&(0,x.jsx)(`p`,{className:`text-sm text-gray-600 dark:text-gray-400 mt-2 line-clamp-2 pl-0`,children:t.notes}),(0,x.jsxs)(`div`,{className:`flex items-center gap-2 pt-3 border-gray-100 dark:border-gray-700 text-sm text-gray-500 dark:text-gray-400`,children:[(0,x.jsx)(c,{className:`w-4 h-4 text-gray-400`}),(0,x.jsx)(`span`,{children:p(t.date)})]})]})]})}function E({expense:t,isOpen:r,onClose:a,onEdit:o,onDelete:c}){let l=_(r);if((0,b.useEffect)(()=>{if(!r)return;function e(e){e.key===`Escape`&&a()}return document.addEventListener(`keydown`,e),()=>document.removeEventListener(`keydown`,e)},[r,a]),!r||!t)return null;let p=i[i[t.budgetOrigin]?t.budgetOrigin:e(t.budgetOrigin)],m=t.country&&n[t.country],h=()=>{a(),o(t)},g=()=>{a(),c(t)};return(0,x.jsxs)(`div`,{className:`fixed inset-0 z-[600] flex justify-center items-end md:items-center`,role:`dialog`,"aria-modal":`true`,"aria-labelledby":`expense-actions-title`,children:[(0,x.jsx)(`div`,{className:`absolute inset-0 bg-black/40 backdrop-blur-sm`,onClick:a,"aria-hidden":`true`}),(0,x.jsxs)(`div`,{ref:l,className:`relative w-full max-w-sm bg-white dark:bg-gray-800 rounded-t-2xl md:rounded-2xl shadow-2xl flex flex-col`,children:[(0,x.jsxs)(`div`,{className:`flex items-center justify-between px-4 py-3 border-b border-gray-200 dark:border-gray-700`,children:[(0,x.jsx)(`h2`,{id:`expense-actions-title`,className:`text-lg font-semibold text-gray-900 dark:text-gray-100 truncate pr-2`,children:t.description}),(0,x.jsx)(`button`,{type:`button`,onClick:a,"aria-label":`Fechar`,className:`p-2 rounded-lg text-gray-500 hover:text-gray-700 dark:hover:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700`,children:(0,x.jsx)(u,{className:`w-5 h-5`})})]}),(0,x.jsxs)(`div`,{className:`px-4 py-3 flex items-center justify-center gap-4 text-sm text-gray-500 dark:text-gray-400 flex-wrap`,children:[(0,x.jsx)(`span`,{className:`font-semibold text-gray-700 dark:text-gray-300`,children:f(t.amount,t.currency)}),p&&(0,x.jsxs)(`span`,{className:`flex items-center gap-1.5`,children:[(0,x.jsx)(`span`,{children:p.icon}),(0,x.jsx)(`span`,{children:p.label})]}),m&&(0,x.jsxs)(`span`,{className:`flex items-center gap-1.5`,children:[(0,x.jsx)(`span`,{children:m.flag}),(0,x.jsx)(`span`,{children:m.name})]})]}),(0,x.jsxs)(`div`,{className:`flex gap-3 px-4 py-4 border-t border-gray-200 dark:border-gray-700`,children:[(0,x.jsxs)(`button`,{type:`button`,onClick:h,className:`flex-1 flex items-center justify-center gap-2 px-4 py-2.5 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none`,children:[(0,x.jsx)(d,{className:`w-4 h-4`}),`Editar`]}),(0,x.jsxs)(`button`,{type:`button`,onClick:g,className:`flex-1 flex items-center justify-center gap-2 px-4 py-2.5 text-sm font-medium text-white bg-red-600 hover:bg-red-700 rounded-lg focus:ring-2 focus:ring-red-500 focus:outline-none`,children:[(0,x.jsx)(s,{className:`w-4 h-4`}),`Excluir`]})]})]})]})}var D=[`japan`,`south-korea`,`general`,`outros`];function O({expenses:e,onUpdate:t,onCreate:r,onDelete:i,isLoading:a=!1}){let[o,s]=(0,b.useState)(!1),[c,u]=(0,b.useState)(),[d,p]=(0,b.useState)(null),[m,_]=(0,b.useState)(null),{groupedByCountry:S,orderedCountryKeys:C}=(0,b.useMemo)(()=>{let t=e.reduce((e,t)=>{let n=t.country??`outros`;return e[n]||(e[n]=[]),e[n].push(t),e},{}),n=e=>{let t=h(e||``);return t?new Date(t).getTime():0};return Object.values(t).forEach(e=>{e.sort((e,t)=>n(e.date)-n(t.date))}),{groupedByCountry:t,orderedCountryKeys:[...D.filter(e=>t[e]),...Object.keys(t).filter(e=>!D.includes(e)).sort()]}},[e]),w=e=>{_(e)},O=e=>{_(null),u(e),s(!0)},k=e=>{_(null),p(e)},A=()=>{u(void 0),s(!1)},j=async()=>{d&&(await i(d.id),p(null))},M=async e=>{c?await Promise.resolve(t({...e,id:c.id})):await Promise.resolve(r(e))};if(a)return null;let N=e.reduce((e,t)=>e+(t.amountInBRL??0),0);return(0,x.jsxs)(`div`,{children:[e.length>0&&(0,x.jsx)(`div`,{className:`mb-6 p-4 rounded-2xl bg-gradient-to-r from-rose-50 to-orange-50 dark:from-rose-900/30 dark:to-orange-900/30 border border-rose-100 dark:border-rose-800`,children:(0,x.jsxs)(`div`,{className:`flex items-center gap-3`,children:[(0,x.jsx)(`div`,{className:`w-10 h-10 rounded-xl bg-rose-100 dark:bg-rose-900/50 flex items-center justify-center`,children:(0,x.jsx)(l,{className:`w-5 h-5 text-rose-700 dark:text-rose-300`})}),(0,x.jsxs)(`div`,{children:[(0,x.jsx)(`p`,{className:`text-sm font-medium text-gray-600 dark:text-gray-400`,children:`Total em gastos`}),(0,x.jsx)(`p`,{className:`text-xl font-bold text-rose-700 tabular-nums`,children:f(N)})]})]})}),(0,x.jsx)(`div`,{className:`space-y-8`,children:C.length===0?(0,x.jsx)(g,{icon:`ðŸ§¾`,title:`Nenhum gasto encontrado`,description:`Comece registrando seu primeiro gasto!`}):C.map(e=>{let t=S[e],r=n[e],i=r?.name??(e===`outros`?`Outros`:e),a=r?.flag??`ðŸŒ`,o=t.reduce((e,t)=>e+(t.amountInBRL??0),0);return t?.length?(0,x.jsxs)(`section`,{className:`space-y-4`,children:[(0,x.jsxs)(`div`,{className:`flex items-center justify-between gap-3 flex-wrap`,children:[(0,x.jsxs)(`div`,{className:`flex items-center gap-2 px-4 py-2 rounded-xl bg-white dark:bg-gray-800 shadow-sm border border-gray-200 dark:border-gray-700`,children:[(0,x.jsx)(`span`,{className:`text-xl`,"aria-hidden":!0,children:a}),(0,x.jsx)(`h2`,{className:`text-base font-semibold text-gray-900 dark:text-gray-100`,children:i}),(0,x.jsxs)(`span`,{className:`text-sm text-gray-500 dark:text-gray-400`,children:[t.length,` `,t.length===1?`gasto`:`gastos`]})]}),(0,x.jsx)(`span`,{className:`text-sm font-semibold text-rose-800 dark:text-rose-300 tabular-nums`,children:f(o)})]}),(0,x.jsx)(`div`,{className:`grid grid-cols-1 md:grid-cols-2 gap-3`,children:t.map(e=>(0,x.jsx)(T,{expense:e,onClick:w},e.id))})]},e):null})}),(0,x.jsx)(y,{expense:c,isOpen:o,onClose:A,onSave:M}),(0,x.jsx)(E,{expense:m,isOpen:!!m,onClose:()=>_(null),onEdit:O,onDelete:k}),(0,x.jsx)(v,{isOpen:!!d,onClose:()=>p(null),title:`Excluir gasto`,message:d?(0,x.jsxs)(x.Fragment,{children:[`Tem certeza que deseja excluir este gasto (`,f(d.amount,d.currency),`)?`]}):null,onConfirm:j})]})}export{O as default};