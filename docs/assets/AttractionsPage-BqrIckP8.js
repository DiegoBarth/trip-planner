const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ModalAttraction-jb-jRZCm.js","assets/index-BPtfAsU8.js","assets/router-BfVF4rnG.js","assets/dnd-kit-DVJe_fUm.js","assets/rolldown-runtime-CWU8vmCm.js","assets/recharts-CxBv7Za6.js","assets/react-query-DJIZh4EV.js","assets/react-ClFNaAWa.js","assets/lucide-CpCSl3L4.js","assets/index-C8kCo3zc.css","assets/DateField-y7EzWoEu.js","assets/DateField-Chw94eNX.css","assets/validateWithToast-D1ZzRu40.js","assets/useFocusTrap-C78uQpD6.js","assets/CustomSelect-DbIozZHw.js","assets/AttractionsGridWithDnD-CF16hilU.js","assets/AttractionCard-psodbVsT.js","assets/EmptyState-Dkkoz0jG.js","assets/useAttractionsGrouped-BDa2wtdO.js","assets/useMediaQuery-VaZrTpFH.js"])))=>i.map(i=>d[i]);
import{p as e}from"./dnd-kit-DVJe_fUm.js";import{t}from"./react-ClFNaAWa.js";import{s as n}from"./router-BfVF4rnG.js";import{A as r,g as i}from"./lucide-CpCSl3L4.js";import"./react-query-DJIZh4EV.js";import"./recharts-CxBv7Za6.js";import{P as a,_ as o,c as s,h as c,l,r as u,s as d}from"./index-BPtfAsU8.js";import{t as f}from"./EmptyState-Dkkoz0jG.js";import{t as p}from"./AttractionCard-psodbVsT.js";import"./useMediaQuery-VaZrTpFH.js";import{t as m}from"./useAttractionsGrouped-BDa2wtdO.js";import"./useFocusTrap-C78uQpD6.js";import"./CustomSelect-DbIozZHw.js";import"./FilterSheetContext-DAMoZ3Ks.js";import{t as h}from"./PageHeader-CWRoE_lf.js";import{t as g}from"./CountryFilter-Bn9GitYk.js";import{n as _,t as v}from"./ConfirmModal-9mXXaS5v.js";var y=e(),b=t();function x({attractions:e,emptyTitle:t,emptyDescription:n,onToggleVisited:r,onDelete:i,onEdit:a}){let{displayAttractions:o,isAllDaysView:s,isReadyForTotals:c,getCountryTotalCouplePrice:l,getCountryTotalPriceBrl:u,getDayTotalCouplePrice:d,getDayTotalPriceBrl:h,sortedCountryEntries:g,COUNTRIES:_,formatDate:v,formatCurrency:y}=m(e);if(o.length===0)return(0,b.jsx)(f,{icon:`ðŸ—ºï¸`,title:t,description:n});let x=0;return(0,b.jsx)(`div`,{className:`space-y-10`,children:g.map(([e,t])=>{let n=l(t),o=u(t);return(0,b.jsxs)(`section`,{className:`space-y-6`,children:[(0,b.jsxs)(`div`,{className:`flex items-center gap-3 flex-wrap`,children:[(0,b.jsxs)(`div`,{className:`flex items-center gap-2 px-4 py-2.5 rounded-xl bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 shadow-sm w-fit`,children:[(0,b.jsx)(`span`,{className:`text-xl`,"aria-hidden":!0,children:_[e]?.flag??`ðŸŒ`}),(0,b.jsx)(`h2`,{className:`text-base font-semibold text-gray-900 dark:text-gray-100`,children:_[e]?.name??e})]}),s&&c&&n&&(0,b.jsxs)(`div`,{className:`flex flex-col`,children:[(0,b.jsx)(`span`,{className:`text-md font-semibold text-emerald-600 dark:text-emerald-400`,children:n}),(0,b.jsxs)(`span`,{className:`text-sm font-medium text-gray-500 dark:text-gray-400`,children:[`(`,y(o),`)`]})]})]}),Object.entries(t).sort(([e],[t])=>Number(e)-Number(t)).map(([t,n])=>{let o=d(n),s=h(n);return(0,b.jsxs)(`section`,{children:[(0,b.jsxs)(`div`,{className:`flex items-center justify-between flex-wrap`,children:[(0,b.jsxs)(`div`,{className:`flex items-center gap-2 px-2 py-2 rounded-xl bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 shadow-sm mb-3 w-fit`,children:[(0,b.jsx)(`span`,{className:`text-lg`,"aria-hidden":!0,children:`ðŸ“…`}),(0,b.jsxs)(`h3`,{className:`text-base font-semibold text-gray-900 dark:text-gray-100`,children:[`Dia `,t]}),n[0]?.date&&(0,b.jsx)(`span`,{className:`text-sm text-gray-500 dark:text-gray-400`,children:v(n[0].date)}),(0,b.jsxs)(`span`,{className:`text-sm text-gray-400 dark:text-gray-500`,children:[`Â· `,n.length,` `,n.length===1?`atraÃ§Ã£o`:`atraÃ§Ãµes`]})]}),o&&(0,b.jsxs)(`div`,{className:`flex flex-col h-[58px]`,children:[(0,b.jsx)(`span`,{className:`text-md font-medium text-emerald-600 dark:text-emerald-400`,children:o}),(0,b.jsxs)(`span`,{className:`text-sm font-medium`,children:[`(`,y(s),`)`]})]})]}),(0,b.jsx)(`div`,{className:`grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3`,children:n.map(e=>{let t=x<6;return x++,(0,b.jsx)(p,{attraction:e,priority:t,onCheckVisited:r,onDelete:i,onClick:()=>a?.(e)},e.id)})})]},`${e}-${t}`)})]},e)})})}var S=(0,y.lazy)(()=>n(()=>import(`./ModalAttraction-jb-jRZCm.js`),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14])).then(e=>({default:e.ModalAttraction}))),C=(0,y.lazy)(()=>n(()=>import(`./AttractionsGridWithDnD-CF16hilU.js`),__vite__mapDeps([15,1,2,3,4,5,6,7,8,9,16,17,18,19])).then(e=>({default:e.AttractionsGridWithDnD})));function w({attractions:e,isLoading:t,onUpdate:n,onCreate:i,onDelete:a,onToggleVisited:u,onBulkUpdate:d,isDragEnabled:f,onToggleDragEnabled:p}){let[m,h]=(0,y.useState)(!1),[g,_]=(0,y.useState)(),[w,T]=(0,y.useState)(null),[E,D]=(0,y.useState)(!1),O=f??E,k=p??D,A=async t=>{let r=s(e,t.country,t.date,g?.id),a=g&&g.country===t.country&&c(g.date)===c(t.date)?g?.order??1:l(e,t.country,t.date,g?.id),o={...t,day:r,order:a};g?await n({...o,id:g.id}):await i(o),h(!1),_(void 0)},j=async t=>{if(!d)return;let n=t.filter(t=>{let n=e.find(e=>e.id===t.id);return n&&(n.day!==t.day||n.order!==t.order)});n.length>0&&await d(n)},M=t=>{let n=e.find(e=>e.id===t);n&&T(n)},N=async()=>{w&&(await a(w.id),T(null))},P=(0,y.useMemo)(()=>new Set(e.map(e=>e.country??`outros`)).size,[e])>1,F=(0,y.useMemo)(()=>{if(!e.length)return 0;let t=0;for(let n of e)t+=Number(n.priceInBRL)||0;return t},[e]);return(0,b.jsxs)(`div`,{children:[(0,b.jsxs)(`div`,{className:`flex items-center justify-between gap-4 mb-5 flex-wrap`,children:[(0,b.jsxs)(`div`,{className:`flex items-center justify-between gap-4 flex-wrap w-full`,children:[(0,b.jsxs)(`div`,{className:`flex items-center gap-2 flex-wrap`,children:[(0,b.jsx)(`h2`,{className:`text-lg font-semibold text-gray-900 dark:text-gray-100`,children:`Todas as AtraÃ§Ãµes`}),(0,b.jsxs)(`span`,{className:`text-sm text-gray-500 dark:text-gray-400 font-medium`,children:[e.length,` `,e.length===1?`item`:`itens`]})]}),P&&F&&(0,b.jsx)(`div`,{className:`flex flex-col text-right`,children:(0,b.jsx)(`span`,{className:`text-lg font-semibold text-emerald-600 dark:text-emerald-400`,children:o(F)})})]}),d&&p===void 0&&(0,b.jsxs)(`button`,{onClick:()=>k(!O),className:`flex items-center gap-2 px-4 py-2 rounded-xl text-sm font-medium transition-colors ${O?`bg-blue-600 text-white hover:bg-blue-700 shadow-sm`:`bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600`}`,title:O?`Desabilitar reordenaÃ§Ã£o`:`Habilitar reordenaÃ§Ã£o`,"aria-pressed":O,children:[(0,b.jsx)(r,{className:`w-4 h-4`}),O?`ReordenaÃ§Ã£o ativa`:`Reordenar`]})]}),t&&(0,b.jsxs)(`div`,{className:`space-y-6 animate-pulse`,"aria-hidden":!0,children:[(0,b.jsx)(`div`,{className:`h-8 bg-gray-200 dark:bg-gray-700 rounded-lg w-64`}),(0,b.jsx)(`div`,{className:`grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3`,children:[1,2,3,4,5,6].map(e=>(0,b.jsx)(`div`,{className:`aspect-[3/2] rounded-2xl bg-gray-200 dark:bg-gray-700 min-h-[120px]`},e))})]}),!t&&(O&&d?(0,b.jsx)(y.Suspense,{fallback:(0,b.jsxs)(`div`,{className:`space-y-6 animate-pulse`,children:[(0,b.jsx)(`div`,{className:`h-10 bg-gray-200 dark:bg-gray-700 rounded-xl w-48`}),(0,b.jsx)(`div`,{className:`grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3`,children:[1,2,3].map(e=>(0,b.jsx)(`div`,{className:`aspect-[3/2] rounded-2xl bg-gray-200 dark:bg-gray-700`},e))})]}),children:(0,b.jsx)(C,{attractions:e,onToggleVisited:u,onDelete:M,onEdit:e=>{_(e),h(!0)},emptyTitle:`Nenhuma atraÃ§Ã£o encontrada`,emptyDescription:`Comece adicionando sua primeira atraÃ§Ã£o!`,onReorder:j})}):(0,b.jsx)(x,{attractions:e,onToggleVisited:u,onDelete:M,onEdit:e=>{_(e),h(!0)},emptyTitle:`Nenhuma atraÃ§Ã£o encontrada`,emptyDescription:`Comece adicionando sua primeira atraÃ§Ã£o!`})),m&&(0,b.jsx)(y.Suspense,{fallback:null,children:(0,b.jsx)(S,{attraction:g,isOpen:m,onClose:()=>{h(!1),_(void 0)},onSave:A})}),(0,b.jsx)(v,{isOpen:!!w,onClose:()=>T(null),title:`Excluir atraÃ§Ã£o`,message:w?(0,b.jsxs)(b.Fragment,{children:[`Tem certeza que deseja excluir "`,w.name,`"?`]}):null,onConfirm:N})]})}var T=(0,y.lazy)(()=>n(()=>import(`./ModalAttraction-jb-jRZCm.js`),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14])).then(e=>({default:e.ModalAttraction})));function E(){let[e,t]=(0,y.useState)(!1),[n,o]=(0,y.useState)(!1),{country:s,day:c,attractions:l,isReady:f}=u(),p=(0,y.useMemo)(()=>c===`all`?l:l.filter(e=>e.day===c),[l,c]),{createAttraction:m,updateAttraction:v,deleteAttraction:x,toggleVisited:S,bulkUpdate:C}=d(s),{success:E,error:D}=a(),O=async e=>{try{await m(e),E(`AtraÃ§Ã£o criada com sucesso!`)}catch(e){D(`Erro ao criar atraÃ§Ã£o`),console.error(e)}},k=async e=>{try{await v(e),E(`AtraÃ§Ã£o atualizada com sucesso!`)}catch(e){D(`Erro ao atualizar atraÃ§Ã£o`),console.error(e)}},A=async e=>{try{await x(e),E(`AtraÃ§Ã£o excluÃ­da com sucesso!`)}catch(e){D(`Erro ao excluir atraÃ§Ã£o`),console.error(e)}},j=async e=>{try{await S(e),E(`Status da atraÃ§Ã£o atualizado`)}catch(e){D(`Erro ao atualizar atraÃ§Ã£o`),console.error(e)}},M=async e=>{try{await C(e),E(`AtraÃ§Ãµes reordenadas com sucesso!`)}catch(e){D(`Erro ao reordenar atraÃ§Ãµes`),console.error(e)}};return(0,b.jsxs)(`div`,{className:`min-h-screen bg-gray-50 dark:bg-gray-900 pb-20 md:pb-6`,children:[(0,b.jsx)(h,{title:`AtraÃ§Ãµes`,subtitle:`Planeje seus pontos turÃ­sticos`,filter:(0,b.jsx)(g,{hideGeneralOption:!0}),action:(0,b.jsxs)(`button`,{type:`button`,onClick:()=>o(e=>!e),className:`flex items-center gap-1.5 px-3 py-1.5 rounded-xl text-sm font-medium transition-colors ${n?`bg-white/25 text-white hover:bg-white/30`:`bg-white/15 text-white/95 hover:bg-white/20`}`,title:n?`Desabilitar reordenaÃ§Ã£o`:`Habilitar reordenaÃ§Ã£o`,"aria-pressed":n,children:[(0,b.jsx)(r,{className:`w-4 h-4`}),n?`ReordenaÃ§Ã£o ativa`:`Reordenar`]})}),(0,b.jsx)(`main`,{className:`max-w-6xl mx-auto px-4 md:px-6 py-6 mb-12`,children:(0,b.jsx)(w,{attractions:p,isLoading:!f,onCreate:O,onUpdate:k,onDelete:A,onToggleVisited:j,onBulkUpdate:M,isDragEnabled:n,onToggleDragEnabled:o})}),(0,b.jsx)(_,{onClick:()=>t(!0),icon:(0,b.jsx)(i,{className:`w-6 h-6`}),label:`Adicionar`}),e&&(0,b.jsx)(y.Suspense,{fallback:null,children:(0,b.jsx)(T,{isOpen:e,onClose:()=>t(!1),onSave:async e=>{await O(e),t(!1)}})})]})}export{E as default};