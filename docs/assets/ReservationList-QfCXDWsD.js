import{a as e,b as t,c as n,m as r,y as i}from"./google-login-button-BZ5FbxrR.js";import"./react-vendor-EEmDTsrY.js";import"./react-query-D7qSFt80.js";import{A as a,C as o,H as s,L as c,d as l,f as u,p as d,q as f,u as p,x as m}from"./ui-icons-Co5DzGlV.js";import"./zod-BU_exWGf.js";import{E as h,k as g,x as _}from"./index-CienHaZV.js";import{t as v}from"./EmptyState-Bk31O1a1.js";import{t as y}from"./useFocusTrap-BmfH02Pg.js";import{t as b}from"./ConfirmModal-DsLL62DU.js";import"./validateWithToast-2IIBjub3.js";import"./DateField-wLBBZmga.js";import"./date-fns-B4vuNjeo.js";import{t as x}from"./ModalReservation-DDfK82Li.js";var S=t(),C=i();function w({reservation:t,onClick:i}){let o=r[t.type],u=e[t.status];return(0,C.jsxs)(`div`,{role:i?`button`:void 0,tabIndex:i?0:void 0,onClick:()=>i?.(t),onKeyDown:e=>{i&&(e.key===`Enter`||e.key===` `)&&(e.preventDefault(),i(t))},className:`relative bg-white dark:bg-gray-800 rounded-2xl shadow-md overflow-hidden transition-all ${i?`cursor-pointer hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-indigo-500/50`:``}`,children:[(0,C.jsx)(`div`,{className:`h-1`,style:{backgroundColor:o.color}}),(0,C.jsxs)(`div`,{className:`p-4`,children:[(0,C.jsxs)(`div`,{className:`flex items-center justify-between gap-3 mb-1.5`,children:[(0,C.jsxs)(`div`,{className:`flex items-center gap-3 min-w-0`,children:[(0,C.jsx)(`div`,{className:`w-11 h-11 rounded-xl flex items-center justify-center text-xl flex-shrink-0`,style:{backgroundColor:`${o.color}20`},children:o.icon}),(0,C.jsx)(`span`,{className:`text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide`,children:o.label})]}),(0,C.jsx)(`span`,{className:`px-2 py-0.5 rounded-md text-xs font-semibold text-white flex-shrink-0`,style:{backgroundColor:u.color},children:u.label})]}),(0,C.jsx)(`h3`,{className:`font-bold text-gray-900 dark:text-gray-100 text-lg overflow-x-auto whitespace-nowrap mb-3 pr-1`,title:t.title,children:t.title}),t.description&&(0,C.jsx)(`p`,{className:`text-sm text-gray-600 mb-3 line-clamp-2`,children:t.description}),(0,C.jsxs)(`div`,{className:`space-y-1.5`,children:[t.date&&(0,C.jsxs)(`div`,{className:`flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400`,children:[(0,C.jsx)(s,{className:`w-3.5 h-3.5 text-gray-400 flex-shrink-0`}),(0,C.jsx)(`span`,{children:(()=>t.date?t.endDate?`${h(t.date)} â€“ ${h(t.endDate)}`:h(t.date):null)()})]}),t.time&&(0,C.jsxs)(`div`,{className:`flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400`,children:[(0,C.jsx)(a,{className:`w-3.5 h-3.5 text-gray-400 flex-shrink-0`}),(0,C.jsx)(`span`,{children:t.time})]}),(t.location||t.country&&t.country!==`general`)&&(0,C.jsxs)(`div`,{className:`flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400 flex-wrap`,children:[(0,C.jsx)(c,{className:`w-3.5 h-3.5 text-gray-400 flex-shrink-0`}),t.location&&(0,C.jsx)(`span`,{className:`line-clamp-1`,children:t.location}),t.location&&t.country&&t.country!==`general`&&` - `,t.country&&t.country!==`general`&&n[t.country]&&(0,C.jsx)(`span`,{className:`whitespace-nowrap`,children:n[t.country].name})]}),t.provider&&(0,C.jsxs)(`div`,{className:`flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400`,children:[(0,C.jsx)(`span`,{className:`font-medium`,children:`Provedor:`}),(0,C.jsx)(`span`,{children:t.provider})]}),t.confirmationCode&&(0,C.jsxs)(`div`,{className:`flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400`,children:[(0,C.jsx)(p,{className:`w-3.5 h-3.5 flex-shrink-0`}),(0,C.jsx)(`span`,{className:`font-medium`,children:`CÃ³digo:`}),(0,C.jsx)(`span`,{className:`font-mono`,children:t.confirmationCode})]})]}),(t.bookingUrl||t.documentUrl)&&(0,C.jsxs)(`div`,{className:`flex flex-wrap gap-2 mb-3`,children:[t.bookingUrl&&(0,C.jsxs)(`a`,{href:t.bookingUrl,target:`_blank`,rel:`noopener noreferrer`,onClick:e=>e.stopPropagation(),className:`inline-flex items-center gap-1.5 px-2.5 py-1.5 text-xs font-medium text-blue-600 bg-blue-50 rounded-lg hover:bg-blue-100 transition-colors`,children:[(0,C.jsx)(l,{className:`w-3 h-3`}),`Reserva`]}),t.documentUrl&&(0,C.jsxs)(`a`,{href:t.documentUrl,target:`_blank`,rel:`noopener noreferrer`,onClick:e=>e.stopPropagation(),className:`inline-flex items-center gap-1.5 px-2.5 py-1.5 text-xs font-medium text-indigo-600 bg-indigo-50 rounded-lg hover:bg-indigo-100 transition-colors`,children:[(0,C.jsx)(d,{className:`w-3 h-3`}),`Documento`]})]})]})]})}function T({reservation:t,isOpen:n,onClose:i,onEdit:a,onDelete:s}){let c=y(n);if((0,S.useEffect)(()=>{if(!n)return;function e(e){e.key===`Escape`&&i()}return document.addEventListener(`keydown`,e),()=>document.removeEventListener(`keydown`,e)},[n,i]),!n||!t)return null;let l=r[t.type],u=e[t.status],d=()=>{i(),a(t)},p=()=>{i(),s(t)};return(0,C.jsxs)(`div`,{className:`fixed inset-0 z-[600] flex justify-center items-end md:items-center`,role:`dialog`,"aria-modal":`true`,"aria-labelledby":`reservation-actions-title`,children:[(0,C.jsx)(`div`,{className:`absolute inset-0 bg-black/40 backdrop-blur-sm`,onClick:i,"aria-hidden":`true`}),(0,C.jsxs)(`div`,{ref:c,className:`relative w-full max-w-sm bg-white dark:bg-gray-800 rounded-t-2xl md:rounded-2xl shadow-2xl flex flex-col`,children:[(0,C.jsxs)(`div`,{className:`flex items-center justify-between px-4 py-3 border-b border-gray-200 dark:border-gray-700`,children:[(0,C.jsx)(`h2`,{id:`reservation-actions-title`,className:`text-lg font-semibold text-gray-900 dark:text-gray-100 truncate pr-2`,children:t.title}),(0,C.jsx)(`button`,{type:`button`,onClick:i,"aria-label":`Fechar`,className:`p-2 rounded-lg text-gray-500 hover:text-gray-700 dark:hover:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700`,children:(0,C.jsx)(f,{className:`w-5 h-5`})})]}),(0,C.jsxs)(`div`,{className:`px-4 py-3 flex items-center gap-2 text-sm text-gray-500 dark:text-gray-400`,children:[(0,C.jsx)(`span`,{style:{color:l.color},children:l.icon}),(0,C.jsx)(`span`,{children:l.label}),(0,C.jsx)(`span`,{className:`px-2 py-0.5 rounded-md text-xs font-semibold text-white`,style:{backgroundColor:u.color},children:u.label})]}),(0,C.jsxs)(`div`,{className:`flex gap-3 px-4 py-4 border-t border-gray-200 dark:border-gray-700`,children:[(0,C.jsxs)(`button`,{type:`button`,onClick:d,className:`flex-1 flex items-center justify-center gap-2 px-4 py-2.5 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none`,children:[(0,C.jsx)(m,{className:`w-4 h-4`}),`Editar`]}),(0,C.jsxs)(`button`,{type:`button`,onClick:p,className:`flex-1 flex items-center justify-center gap-2 px-4 py-2.5 text-sm font-medium text-white bg-red-600 hover:bg-red-700 rounded-lg focus:ring-2 focus:ring-red-500 focus:outline-none`,children:[(0,C.jsx)(o,{className:`w-4 h-4`}),`Excluir`]})]})]})]})}function E({reservations:e,onUpdate:t,onCreate:n,onDelete:r,isLoading:i=!1}){let[a,o]=(0,S.useState)(!1),[s,c]=(0,S.useState)(),[l,d]=(0,S.useState)(null),[f,p]=(0,S.useState)(null);function m(e){if(!e||!e.trim())return 1440;let t=e.trim().split(`:`).map(Number),n=t[0]??0,r=t[1]??0,i=t[2]??0;return n*60+r+i/60}let y=(0,S.useMemo)(()=>{let t=[],n={};e.forEach(e=>{if(!e.date)t.push(e);else{let t=_(e.date);n[t]||(n[t]=[]),n[t].push(e)}});let r=Object.keys(n).sort((e,t)=>g(e).getTime()-g(t).getTime());return r.forEach(e=>{n[e].sort((e,t)=>m(e.time)-m(t.time))}),{preTripItems:t,dateGrouped:n,orderedDateKeys:r}},[e]),E=(0,S.useMemo)(()=>({total:e.length,confirmed:e.filter(e=>e.status===`confirmed`).length,pending:e.filter(e=>e.status===`pending`).length,completed:e.filter(e=>e.status===`completed`).length}),[e]),D=()=>{c(void 0),o(!1)},O=async e=>{s?await Promise.resolve(t({...e,id:s.id})):await Promise.resolve(n(e))},k=async()=>{l&&(await r(l.id),d(null))},A=e=>{p(e)};return i?null:(0,C.jsxs)(`div`,{children:[E.total>0&&(0,C.jsxs)(`div`,{className:`mb-6 p-4 rounded-2xl bg-gradient-to-r from-indigo-50 to-purple-50 dark:from-indigo-900/30 dark:to-purple-900/30 border border-indigo-100 dark:border-indigo-800`,children:[(0,C.jsxs)(`div`,{className:`flex items-center gap-3 mb-3`,children:[(0,C.jsx)(`div`,{className:`w-10 h-10 rounded-xl bg-indigo-100 flex items-center justify-center`,children:(0,C.jsx)(u,{className:`w-5 h-5 text-indigo-600`})}),(0,C.jsxs)(`div`,{children:[(0,C.jsx)(`p`,{className:`text-sm font-medium text-gray-600 dark:text-gray-400`,children:`Status`}),(0,C.jsx)(`p`,{className:`text-xs text-gray-500 dark:text-gray-400`,children:`Resumo das reservas`})]})]}),(0,C.jsxs)(`div`,{className:`flex flex-wrap gap-2`,children:[(0,C.jsxs)(`span`,{className:`px-3 py-1.5 rounded-lg bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 text-sm font-medium text-gray-700 dark:text-gray-300 shadow-sm`,children:[`Total `,(0,C.jsx)(`span`,{className:`font-bold text-gray-900 dark:text-gray-100`,children:E.total})]}),(0,C.jsxs)(`span`,{className:`px-3 py-1.5 rounded-lg bg-green-100 text-green-800 text-sm font-medium`,children:[`Confirmado `,(0,C.jsx)(`span`,{className:`font-bold`,children:E.confirmed})]}),(0,C.jsxs)(`span`,{className:`px-3 py-1.5 rounded-lg bg-amber-100 text-amber-800 text-sm font-medium`,children:[`Pendente `,(0,C.jsx)(`span`,{className:`font-bold`,children:E.pending})]}),(0,C.jsxs)(`span`,{className:`px-3 py-1.5 rounded-lg bg-gray-100 text-gray-700 text-sm font-medium`,children:[`ConcluÃ­do `,(0,C.jsx)(`span`,{className:`font-bold`,children:E.completed})]})]})]}),(0,C.jsx)(`div`,{className:`space-y-6`,children:e.length===0?(0,C.jsx)(v,{icon:`ðŸŽ«`,title:`Nenhuma reserva encontrada`,description:`Comece adicionando suas reservas, documentos e ingressos!`}):(0,C.jsxs)(C.Fragment,{children:[y.preTripItems.length>0&&(0,C.jsxs)(`section`,{className:`space-y-3`,children:[(0,C.jsxs)(`div`,{className:`flex items-center gap-2 px-4 py-2 rounded-xl bg-white dark:bg-gray-800 border border-indigo-200 dark:border-indigo-800 shadow-sm w-fit`,children:[(0,C.jsx)(`div`,{className:`w-2 h-2 rounded-full bg-indigo-500`}),(0,C.jsx)(`h2`,{className:`text-base font-semibold text-gray-900 dark:text-gray-100`,children:`PrÃ©-Viagem`}),(0,C.jsxs)(`span`,{className:`text-sm text-gray-600 dark:text-gray-400`,children:[y.preTripItems.length,` `,y.preTripItems.length===1?`item`:`itens`]})]}),(0,C.jsx)(`div`,{className:`grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3`,children:y.preTripItems.map(e=>(0,C.jsx)(w,{reservation:e,onClick:A},e.id))})]}),y.orderedDateKeys.map(e=>{let t=y.dateGrouped[e];return(0,C.jsxs)(`section`,{className:`space-y-3`,children:[(0,C.jsxs)(`div`,{className:`flex items-center gap-2 px-4 py-2 rounded-xl bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 shadow-sm w-fit mb-3`,children:[(0,C.jsx)(`span`,{className:`text-lg`,"aria-hidden":!0,children:`ðŸ“…`}),(0,C.jsx)(`h2`,{className:`text-base font-semibold text-gray-900 dark:text-gray-100`,children:h(e)}),(0,C.jsxs)(`span`,{className:`text-sm text-gray-600 dark:text-gray-400`,children:[`Â· `,t.length,` `,t.length===1?`reserva`:`reservas`]})]}),(0,C.jsx)(`div`,{className:`grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3`,children:t.map(e=>(0,C.jsx)(w,{reservation:e,onClick:A},e.id))})]},e)})]})}),(0,C.jsx)(x,{reservation:s,isOpen:a,onClose:D,onSave:O}),(0,C.jsx)(T,{reservation:f,isOpen:!!f,onClose:()=>p(null),onEdit:e=>{p(null),c(e),o(!0)},onDelete:e=>{p(null),d(e)}}),(0,C.jsx)(b,{isOpen:!!l,onClose:()=>d(null),title:`Excluir reserva`,message:l?(0,C.jsxs)(C.Fragment,{children:[`Tem certeza que deseja excluir "`,l.title,`"?`]}):null,onConfirm:k})]})}export{E as default};