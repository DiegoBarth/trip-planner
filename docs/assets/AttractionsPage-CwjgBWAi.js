const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ModalAttraction-rGoagDYT.js","assets/index-BkxVq0Ic.js","assets/router-CBHNA5n3.js","assets/google-login-button-DyA0rimH.js","assets/rolldown-runtime-CWU8vmCm.js","assets/ui-icons-B3vgkW9X.js","assets/index-6_ZVcZ4f.css","assets/DateField-C4bgm9P7.js","assets/CountryContext-nFpLVFvs.js","assets/react-query-DywLgQAp.js","assets/formatters-BV6Uspa7.js","assets/DateField-Chw94eNX.css","assets/clsx-CVVEMLal.js","assets/validateWithToast-ChD3ujdw.js","assets/utils-BsSA53OC.js","assets/useFocusTrap-BJKI3tkf.js","assets/CustomSelect-B5ckRW33.js","assets/toast-D9R8ILnq.js","assets/AttractionsGridWithDnD-Dhwj1bAS.js","assets/AttractionCard-Dhum9FP0.js","assets/EmptyState-CIl8gzwZ.js","assets/useAttractionsGrouped-C7CvTUs5.js","assets/useMediaQuery-C3fFZaRf.js"])))=>i.map(i=>d[i]);
import{S as e,x as t}from"./google-login-button-DyA0rimH.js";import{s as n}from"./router-CBHNA5n3.js";import{B as r,T as i}from"./ui-icons-B3vgkW9X.js";import"./clsx-CVVEMLal.js";import"./utils-BsSA53OC.js";import"./react-query-DywLgQAp.js";import"./ThemeContext-BBJxRaNV.js";import{c as a,n as o,o as s,s as c}from"./CountryContext-nFpLVFvs.js";import{i as l,o as u}from"./formatters-BV6Uspa7.js";import{n as d}from"./toast-D9R8ILnq.js";import{t as f}from"./EmptyState-CIl8gzwZ.js";import{t as p}from"./AttractionCard-Dhum9FP0.js";import"./useMediaQuery-C3fFZaRf.js";import{t as m}from"./useAttractionsGrouped-C7CvTUs5.js";import"./useFocusTrap-BJKI3tkf.js";import"./CustomSelect-B5ckRW33.js";import"./FilterSheetContext-Dzz7lH-L.js";import{t as h}from"./PageHeader-CChIYzNA.js";import{t as g}from"./CountryFilter-McC9Q5p9.js";import{n as _,t as v}from"./ConfirmModal-CpsJNzW3.js";var y=e(),b=t();function x({attractions:e,emptyTitle:t,emptyDescription:n,onToggleVisited:r,onDelete:i,onEdit:a}){let{displayAttractions:o,isAllDaysView:s,isReadyForTotals:c,getCountryTotalCouplePrice:l,getCountryTotalPriceBrl:u,getDayTotalCouplePrice:d,getDayTotalPriceBrl:h,sortedCountryEntries:g,COUNTRIES:_,formatDate:v,formatCurrency:y}=m(e);if(o.length===0)return(0,b.jsx)(f,{icon:`ðŸ—ºï¸`,title:t,description:n});let x=0;return(0,b.jsx)(`div`,{className:`space-y-10`,children:g.map(([e,t])=>{let n=l(t),o=u(t);return(0,b.jsxs)(`section`,{className:`space-y-6`,children:[(0,b.jsxs)(`div`,{className:`flex items-center gap-3 flex-wrap`,children:[(0,b.jsxs)(`div`,{className:`flex items-center gap-2 px-4 py-2.5 rounded-xl bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 shadow-sm w-fit`,children:[(0,b.jsx)(`span`,{className:`text-xl`,"aria-hidden":!0,children:_[e]?.flag??`ðŸŒ`}),(0,b.jsx)(`h2`,{className:`text-base font-semibold text-gray-900 dark:text-gray-100`,children:_[e]?.name??e})]}),s&&c&&n&&(0,b.jsxs)(`div`,{className:`flex flex-col`,children:[(0,b.jsx)(`span`,{className:`text-md font-semibold text-emerald-600 dark:text-emerald-400`,children:n}),(0,b.jsxs)(`span`,{className:`text-sm font-medium text-gray-500 dark:text-gray-400`,children:[`(`,y(o),`)`]})]})]}),Object.entries(t).sort(([e],[t])=>Number(e)-Number(t)).map(([t,n])=>{let o=d(n),s=h(n);return(0,b.jsxs)(`section`,{children:[(0,b.jsxs)(`div`,{className:`flex items-center justify-between flex-wrap`,children:[(0,b.jsxs)(`div`,{className:`flex items-center gap-2 px-2 py-2 rounded-xl bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 shadow-sm mb-3 w-fit`,children:[(0,b.jsx)(`span`,{className:`text-lg`,"aria-hidden":!0,children:`ðŸ“…`}),(0,b.jsxs)(`h3`,{className:`text-base font-semibold text-gray-900 dark:text-gray-100`,children:[`Dia `,t]}),n[0]?.date&&(0,b.jsx)(`span`,{className:`text-sm text-gray-500 dark:text-gray-400`,children:v(n[0].date)}),(0,b.jsxs)(`span`,{className:`text-sm text-gray-400 dark:text-gray-500`,children:[`Â· `,n.length,` `,n.length===1?`atraÃ§Ã£o`:`atraÃ§Ãµes`]})]}),o&&(0,b.jsxs)(`div`,{className:`flex flex-col h-[58px]`,children:[(0,b.jsx)(`span`,{className:`text-md font-medium text-emerald-600 dark:text-emerald-400`,children:o}),(0,b.jsxs)(`span`,{className:`text-sm font-medium`,children:[`(`,y(s),`)`]})]})]}),(0,b.jsx)(`div`,{className:`grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3`,children:n.map(e=>{let t=x<6;return x++,(0,b.jsx)(p,{attraction:e,priority:t,onCheckVisited:r,onDelete:i,onClick:()=>a?.(e)},e.id)})})]},`${e}-${t}`)})]},e)})})}var S=(0,y.lazy)(()=>n(()=>import(`./ModalAttraction-rGoagDYT.js`),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17])).then(e=>({default:e.ModalAttraction}))),C=(0,y.lazy)(()=>n(()=>import(`./AttractionsGridWithDnD-Dhwj1bAS.js`),__vite__mapDeps([18,1,2,3,4,5,6,9,8,10,19,20,21,22])).then(e=>({default:e.AttractionsGridWithDnD})));function w({attractions:e,isLoading:t,onUpdate:n,onCreate:i,onDelete:o,onToggleVisited:s,onBulkUpdate:d,isDragEnabled:f,onToggleDragEnabled:p}){let[m,h]=(0,y.useState)(!1),[g,_]=(0,y.useState)(),[w,T]=(0,y.useState)(null),[E,D]=(0,y.useState)(!1),O=f??E,k=p??D,A=async t=>{let r=c(e,t.country,t.date,g?.id),o=g&&g.country===t.country&&l(g.date)===l(t.date)?g?.order??1:a(e,t.country,t.date,g?.id),s={...t,day:r,order:o};g?await n({...s,id:g.id}):await i(s),h(!1),_(void 0)},j=async t=>{if(!d)return;let n=t.filter(t=>{let n=e.find(e=>e.id===t.id);return n&&(n.day!==t.day||n.order!==t.order)});n.length>0&&await d(n)},M=t=>{let n=e.find(e=>e.id===t);n&&T(n)},N=async()=>{w&&(await o(w.id),T(null))},P=(0,y.useMemo)(()=>new Set(e.map(e=>e.country??`outros`)).size,[e])>1,F=(0,y.useMemo)(()=>{if(!e.length)return 0;let t=0;for(let n of e)t+=Number(n.priceInBRL)||0;return t},[e]);return(0,b.jsxs)(`div`,{children:[(0,b.jsxs)(`div`,{className:`flex items-center justify-between gap-4 mb-5 flex-wrap`,children:[(0,b.jsxs)(`div`,{className:`flex items-center justify-between gap-4 flex-wrap w-full`,children:[(0,b.jsxs)(`div`,{className:`flex items-center gap-2 flex-wrap`,children:[(0,b.jsx)(`h2`,{className:`text-lg font-semibold text-gray-900 dark:text-gray-100`,children:`Todas as AtraÃ§Ãµes`}),(0,b.jsxs)(`span`,{className:`text-sm text-gray-500 dark:text-gray-400 font-medium`,children:[e.length,` `,e.length===1?`item`:`itens`]})]}),P&&F&&(0,b.jsx)(`div`,{className:`flex flex-col text-right`,children:(0,b.jsx)(`span`,{className:`text-lg font-semibold text-emerald-600 dark:text-emerald-400`,children:u(F)})})]}),d&&p===void 0&&(0,b.jsxs)(`button`,{onClick:()=>k(!O),className:`flex items-center gap-2 px-4 py-2 rounded-xl text-sm font-medium transition-colors ${O?`bg-blue-600 text-white hover:bg-blue-700 shadow-sm`:`bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600`}`,title:O?`Desabilitar reordenaÃ§Ã£o`:`Habilitar reordenaÃ§Ã£o`,"aria-pressed":O,children:[(0,b.jsx)(r,{className:`w-4 h-4`}),O?`ReordenaÃ§Ã£o ativa`:`Reordenar`]})]}),t&&(0,b.jsxs)(`div`,{className:`space-y-6 animate-pulse`,"aria-hidden":!0,children:[(0,b.jsx)(`div`,{className:`h-8 bg-gray-200 dark:bg-gray-700 rounded-lg w-64`}),(0,b.jsx)(`div`,{className:`grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3`,children:[1,2,3,4,5,6].map(e=>(0,b.jsx)(`div`,{className:`aspect-[3/2] rounded-2xl bg-gray-200 dark:bg-gray-700 min-h-[120px]`},e))})]}),!t&&(O&&d?(0,b.jsx)(y.Suspense,{fallback:(0,b.jsxs)(`div`,{className:`space-y-6 animate-pulse`,children:[(0,b.jsx)(`div`,{className:`h-10 bg-gray-200 dark:bg-gray-700 rounded-xl w-48`}),(0,b.jsx)(`div`,{className:`grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3`,children:[1,2,3].map(e=>(0,b.jsx)(`div`,{className:`aspect-[3/2] rounded-2xl bg-gray-200 dark:bg-gray-700`},e))})]}),children:(0,b.jsx)(C,{attractions:e,onToggleVisited:s,onDelete:M,onEdit:e=>{_(e),h(!0)},emptyTitle:`Nenhuma atraÃ§Ã£o encontrada`,emptyDescription:`Comece adicionando sua primeira atraÃ§Ã£o!`,onReorder:j})}):(0,b.jsx)(x,{attractions:e,onToggleVisited:s,onDelete:M,onEdit:e=>{_(e),h(!0)},emptyTitle:`Nenhuma atraÃ§Ã£o encontrada`,emptyDescription:`Comece adicionando sua primeira atraÃ§Ã£o!`})),m&&(0,b.jsx)(y.Suspense,{fallback:null,children:(0,b.jsx)(S,{attraction:g,isOpen:m,onClose:()=>{h(!1),_(void 0)},onSave:A})}),(0,b.jsx)(v,{isOpen:!!w,onClose:()=>T(null),title:`Excluir atraÃ§Ã£o`,message:w?(0,b.jsxs)(b.Fragment,{children:[`Tem certeza que deseja excluir "`,w.name,`"?`]}):null,onConfirm:N})]})}var T=(0,y.lazy)(()=>n(()=>import(`./ModalAttraction-rGoagDYT.js`),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17])).then(e=>({default:e.ModalAttraction})));function E(){let[e,t]=(0,y.useState)(!1),[n,a]=(0,y.useState)(!1),{country:c,day:l,attractions:u,isReady:f}=o(),p=(0,y.useMemo)(()=>l===`all`?u:u.filter(e=>e.day===l),[u,l]),{createAttraction:m,updateAttraction:v,deleteAttraction:x,toggleVisited:S,bulkUpdate:C}=s(c),{success:E,error:D}=d(),O=async e=>{try{await m(e),E(`AtraÃ§Ã£o criada com sucesso!`)}catch(e){D(`Erro ao criar atraÃ§Ã£o`),console.error(e)}},k=async e=>{try{await v(e),E(`AtraÃ§Ã£o atualizada com sucesso!`)}catch(e){D(`Erro ao atualizar atraÃ§Ã£o`),console.error(e)}},A=async e=>{try{await x(e),E(`AtraÃ§Ã£o excluÃ­da com sucesso!`)}catch(e){D(`Erro ao excluir atraÃ§Ã£o`),console.error(e)}},j=async e=>{try{await S(e),E(`Status da atraÃ§Ã£o atualizado`)}catch(e){D(`Erro ao atualizar atraÃ§Ã£o`),console.error(e)}},M=async e=>{try{await C(e),E(`AtraÃ§Ãµes reordenadas com sucesso!`)}catch(e){D(`Erro ao reordenar atraÃ§Ãµes`),console.error(e)}};return(0,b.jsxs)(`div`,{className:`min-h-screen bg-gray-50 dark:bg-gray-900 pb-20 md:pb-6`,children:[(0,b.jsx)(h,{title:`AtraÃ§Ãµes`,subtitle:`Planeje seus pontos turÃ­sticos`,filter:(0,b.jsx)(g,{hideGeneralOption:!0}),action:(0,b.jsxs)(`button`,{type:`button`,onClick:()=>a(e=>!e),className:`flex items-center gap-1.5 px-3 py-1.5 rounded-xl text-sm font-medium transition-colors ${n?`bg-white/25 text-white hover:bg-white/30`:`bg-white/15 text-white/95 hover:bg-white/20`}`,title:n?`Desabilitar reordenaÃ§Ã£o`:`Habilitar reordenaÃ§Ã£o`,"aria-pressed":n,children:[(0,b.jsx)(r,{className:`w-4 h-4`}),n?`ReordenaÃ§Ã£o ativa`:`Reordenar`]})}),(0,b.jsx)(`main`,{className:`max-w-6xl mx-auto px-4 md:px-6 py-6 mb-12`,children:(0,b.jsx)(w,{attractions:p,isLoading:!f,onCreate:O,onUpdate:k,onDelete:A,onToggleVisited:j,onBulkUpdate:M,isDragEnabled:n,onToggleDragEnabled:a})}),(0,b.jsx)(_,{onClick:()=>t(!0),icon:(0,b.jsx)(i,{className:`w-6 h-6`}),label:`Adicionar`}),e&&(0,b.jsx)(y.Suspense,{fallback:null,children:(0,b.jsx)(T,{isOpen:e,onClose:()=>t(!1),onSave:async e=>{await O(e),t(!1)}})})]})}export{E as default};