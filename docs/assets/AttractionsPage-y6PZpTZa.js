const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ModalAttraction-B2AZ6o4a.js","assets/index-Db3zFqb9.js","assets/router-Dllp1smy.js","assets/react-query-1UW459iL.js","assets/rolldown-runtime-CWU8vmCm.js","assets/ui-icons-B7xQRs0n.js","assets/react-vendor-iqnoxFRk.js","assets/zod-BaMrefI8.js","assets/index-BO75Sm3B.css","assets/DateField-Do-LZxBD.js","assets/date-fns-Cu4Tfe88.js","assets/DateField-Chw94eNX.css","assets/validateWithToast-BuMNQbHC.js","assets/useFocusTrap-Dw5eHFws.js","assets/AttractionsGridWithDnD-CgYr1S-E.js","assets/AttractionCard-Dc2uqXKN.js","assets/EmptyState-BBBEkS_Z.js","assets/useAttractionsGrouped-am-tbhwG.js","assets/useMediaQuery-cYvVjdwD.js"])))=>i.map(i=>d[i]);
import{D as e,E as t}from"./react-query-1UW459iL.js";import"./react-vendor-iqnoxFRk.js";import{s as n}from"./router-Dllp1smy.js";import{P as r,T as i}from"./ui-icons-B7xQRs0n.js";import"./zod-BaMrefI8.js";import{S as a,g as o,h as s,l as c,m as l,n as u,u as d,w as f}from"./index-Db3zFqb9.js";import{t as p}from"./EmptyState-BBBEkS_Z.js";import{t as m}from"./AttractionCard-Dc2uqXKN.js";import"./useMediaQuery-cYvVjdwD.js";import{t as h}from"./useAttractionsGrouped-am-tbhwG.js";import"./useFocusTrap-Dw5eHFws.js";import{t as g}from"./PageHeader-Cqi2yAcU.js";import{n as _,t as v}from"./ConfirmModal-Cb8hHpt_.js";var y=e(),b=t();function x({attractions:e,emptyTitle:t,emptyDescription:n,onToggleVisited:r,onDelete:i,onEdit:a}){let{displayAttractions:o,isAllDaysView:s,isReadyForTotals:c,getCountryTotalCouplePrice:l,getCountryTotalPriceBrl:u,getDayTotalCouplePrice:d,getDayTotalPriceBrl:f,sortedCountryEntries:g,COUNTRIES:_,formatDate:v,formatCurrency:y}=h(e);if(o.length===0)return(0,b.jsx)(p,{icon:`ðŸ—ºï¸`,title:t,description:n});let x=0;return(0,b.jsx)(`div`,{className:`space-y-10`,children:g.map(([e,t])=>{let n=l(t),o=u(t);return(0,b.jsxs)(`section`,{className:`space-y-6`,children:[(0,b.jsxs)(`div`,{className:`flex items-center gap-3 flex-wrap`,children:[(0,b.jsxs)(`div`,{className:`flex items-center gap-2 px-4 py-2.5 rounded-xl bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 shadow-sm w-fit`,children:[(0,b.jsx)(`span`,{className:`text-xl`,"aria-hidden":!0,children:_[e]?.flag??`ðŸŒ`}),(0,b.jsx)(`h2`,{className:`text-base font-semibold text-gray-900 dark:text-gray-100`,children:_[e]?.name??e})]}),s&&c&&n&&(0,b.jsxs)(`div`,{className:`flex flex-col`,children:[(0,b.jsx)(`span`,{className:`text-md font-semibold text-emerald-600 dark:text-emerald-400`,children:n}),(0,b.jsxs)(`span`,{className:`text-sm font-medium text-gray-500 dark:text-gray-400`,children:[`(`,y(o),`)`]})]})]}),Object.entries(t).sort(([e],[t])=>Number(e)-Number(t)).map(([t,n])=>{let o=d(n),s=f(n);return(0,b.jsxs)(`section`,{children:[(0,b.jsxs)(`div`,{className:`flex items-center justify-between flex-wrap`,children:[(0,b.jsxs)(`div`,{className:`flex items-center gap-2 px-2 py-2 rounded-xl bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 shadow-sm mb-3 w-fit`,children:[(0,b.jsx)(`span`,{className:`text-lg`,"aria-hidden":!0,children:`ðŸ“…`}),(0,b.jsxs)(`h3`,{className:`text-base font-semibold text-gray-900 dark:text-gray-100`,children:[`Dia `,t]}),n[0]?.date&&(0,b.jsx)(`span`,{className:`text-sm text-gray-500 dark:text-gray-400`,children:v(n[0].date)}),(0,b.jsxs)(`span`,{className:`text-sm text-gray-400 dark:text-gray-500`,children:[`Â· `,n.length,` `,n.length===1?`atraÃ§Ã£o`:`atraÃ§Ãµes`]})]}),o&&(0,b.jsxs)(`div`,{className:`flex flex-col h-[58px]`,children:[(0,b.jsx)(`span`,{className:`text-md font-medium text-emerald-600 dark:text-emerald-400`,children:o}),(0,b.jsxs)(`span`,{className:`text-sm font-medium`,children:[`(`,y(s),`)`]})]})]}),(0,b.jsx)(`div`,{className:`grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3`,children:n.map(e=>{let t=x<6;return x++,(0,b.jsx)(m,{attraction:e,priority:t,onCheckVisited:r,onDelete:i,onClick:()=>a?.(e)},e.id)})})]},`${e}-${t}`)})]},e)})})}var S=(0,y.lazy)(()=>n(()=>import(`./ModalAttraction-B2AZ6o4a.js`),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13])).then(e=>({default:e.ModalAttraction}))),C=(0,y.lazy)(()=>n(()=>import(`./AttractionsGridWithDnD-CgYr1S-E.js`),__vite__mapDeps([14,1,2,3,4,5,6,7,8,15,16,17,18])).then(e=>({default:e.AttractionsGridWithDnD})));function w({attractions:e,isLoading:t,onUpdate:n,onCreate:r,onDelete:c,onToggleVisited:l,onBulkUpdate:u,isDragEnabled:d,onToggleDragEnabled:p}){let[m,h]=(0,y.useState)(!1),[g,_]=(0,y.useState)(),[w,T]=(0,y.useState)(null),[E,D]=(0,y.useState)(!1),O=d??E,k=p??D,A=async t=>{let i=s(e,t.country,t.date,g?.id),c=g&&g.country===t.country&&a(g.date)===a(t.date)?g?.order??1:o(e,t.country,t.date,g?.id),l={...t,day:i,order:c};g?await n({...l,id:g.id}):await r(l),h(!1),_(void 0)},j=async t=>{if(!u)return;let n=t.filter(t=>{let n=e.find(e=>e.id===t.id);return n&&(n.day!==t.day||n.order!==t.order)});n.length>0&&await u(n)},M=t=>{let n=e.find(e=>e.id===t);n&&T(n)},N=async()=>{w&&(await c(w.id),T(null))},P=(0,y.useMemo)(()=>new Set(e.map(e=>e.country??`outros`)).size,[e])>1,F=(0,y.useMemo)(()=>{if(!e.length)return 0;let t=0;for(let n of e)t+=Number(n.priceInBRL)||0;return t},[e]);return(0,b.jsxs)(`div`,{children:[(0,b.jsxs)(`div`,{className:`flex items-center justify-between gap-4 mb-5 flex-wrap`,children:[(0,b.jsxs)(`div`,{className:`flex items-center justify-between gap-4 flex-wrap w-full`,children:[(0,b.jsxs)(`div`,{className:`flex items-center gap-2 flex-wrap`,children:[(0,b.jsx)(`h2`,{className:`text-lg font-semibold text-gray-900 dark:text-gray-100`,children:`Todas as AtraÃ§Ãµes`}),(0,b.jsxs)(`span`,{className:`text-sm text-gray-500 dark:text-gray-400 font-medium`,children:[e.length,` `,e.length===1?`item`:`itens`]})]}),P&&F&&(0,b.jsx)(`div`,{className:`flex flex-col text-right`,children:(0,b.jsx)(`span`,{className:`text-lg font-semibold text-emerald-600 dark:text-emerald-400`,children:f(F)})})]}),u&&p===void 0&&(0,b.jsxs)(`button`,{onClick:()=>k(!O),className:`flex items-center gap-2 px-4 py-2 rounded-xl text-sm font-medium transition-colors ${O?`bg-blue-600 text-white hover:bg-blue-700 shadow-sm`:`bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600`}`,title:O?`Desabilitar reordenaÃ§Ã£o`:`Habilitar reordenaÃ§Ã£o`,"aria-pressed":O,children:[(0,b.jsx)(i,{className:`w-4 h-4`}),O?`ReordenaÃ§Ã£o ativa`:`Reordenar`]})]}),t&&(0,b.jsxs)(`div`,{className:`space-y-6 animate-pulse`,"aria-hidden":!0,children:[(0,b.jsx)(`div`,{className:`h-8 bg-gray-200 dark:bg-gray-700 rounded-lg w-64`}),(0,b.jsx)(`div`,{className:`grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3`,children:[1,2,3,4,5,6].map(e=>(0,b.jsx)(`div`,{className:`aspect-[3/2] rounded-2xl bg-gray-200 dark:bg-gray-700 min-h-[120px]`},e))})]}),!t&&(O&&u?(0,b.jsx)(y.Suspense,{fallback:(0,b.jsxs)(`div`,{className:`space-y-6 animate-pulse`,children:[(0,b.jsx)(`div`,{className:`h-10 bg-gray-200 dark:bg-gray-700 rounded-xl w-48`}),(0,b.jsx)(`div`,{className:`grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3`,children:[1,2,3].map(e=>(0,b.jsx)(`div`,{className:`aspect-[3/2] rounded-2xl bg-gray-200 dark:bg-gray-700`},e))})]}),children:(0,b.jsx)(C,{attractions:e,onToggleVisited:l,onDelete:M,onEdit:e=>{_(e),h(!0)},emptyTitle:`Nenhuma atraÃ§Ã£o encontrada`,emptyDescription:`Comece adicionando sua primeira atraÃ§Ã£o!`,onReorder:j})}):(0,b.jsx)(x,{attractions:e,onToggleVisited:l,onDelete:M,onEdit:e=>{_(e),h(!0)},emptyTitle:`Nenhuma atraÃ§Ã£o encontrada`,emptyDescription:`Comece adicionando sua primeira atraÃ§Ã£o!`})),m&&(0,b.jsx)(y.Suspense,{fallback:null,children:(0,b.jsx)(S,{attraction:g,isOpen:m,onClose:()=>{h(!1),_(void 0)},onSave:A})}),(0,b.jsx)(v,{isOpen:!!w,onClose:()=>T(null),title:`Excluir atraÃ§Ã£o`,message:w?(0,b.jsxs)(b.Fragment,{children:[`Tem certeza que deseja excluir "`,w.name,`"?`]}):null,onConfirm:N})]})}var T=(0,y.lazy)(()=>n(()=>import(`./ModalAttraction-B2AZ6o4a.js`),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13])).then(e=>({default:e.ModalAttraction})));function E(){let[e,t]=(0,y.useState)(!1),[n,a]=(0,y.useState)(!1),{country:o,day:s,attractions:f,isReady:p}=d(),m=(0,y.useMemo)(()=>s===`all`?f:f.filter(e=>e.day===s),[f,s]),{createAttraction:h,updateAttraction:v,deleteAttraction:x,toggleVisited:S,bulkUpdate:C}=l(o),{success:E,error:D}=c(),O=async e=>{try{await h(e),E(`AtraÃ§Ã£o criada com sucesso!`)}catch(e){D(`Erro ao criar atraÃ§Ã£o`),console.error(e)}},k=async e=>{try{await v(e),E(`AtraÃ§Ã£o atualizada com sucesso!`)}catch(e){D(`Erro ao atualizar atraÃ§Ã£o`),console.error(e)}},A=async e=>{try{await x(e),E(`AtraÃ§Ã£o excluÃ­da com sucesso!`)}catch(e){D(`Erro ao excluir atraÃ§Ã£o`),console.error(e)}},j=async e=>{try{await S(e),E(`Status da atraÃ§Ã£o atualizado`)}catch(e){D(`Erro ao atualizar atraÃ§Ã£o`),console.error(e)}},M=async e=>{try{await C(e),E(`AtraÃ§Ãµes reordenadas com sucesso!`)}catch(e){D(`Erro ao reordenar atraÃ§Ãµes`),console.error(e)}};return(0,b.jsxs)(`div`,{className:`min-h-screen bg-gray-50 dark:bg-gray-900 pb-20 md:pb-6`,children:[(0,b.jsx)(g,{title:`AtraÃ§Ãµes`,subtitle:`Planeje seus pontos turÃ­sticos`,filter:(0,b.jsx)(u,{hideGeneralOption:!0}),action:(0,b.jsxs)(`button`,{type:`button`,onClick:()=>a(e=>!e),className:`flex items-center gap-1.5 px-3 py-1.5 rounded-xl text-sm font-medium transition-colors ${n?`bg-white/25 text-white hover:bg-white/30`:`bg-white/15 text-white/95 hover:bg-white/20`}`,title:n?`Desabilitar reordenaÃ§Ã£o`:`Habilitar reordenaÃ§Ã£o`,"aria-pressed":n,children:[(0,b.jsx)(i,{className:`w-4 h-4`}),n?`ReordenaÃ§Ã£o ativa`:`Reordenar`]})}),(0,b.jsx)(`main`,{className:`max-w-6xl mx-auto px-4 md:px-6 py-6 mb-12`,children:(0,b.jsx)(w,{attractions:m,isLoading:!p,onCreate:O,onUpdate:k,onDelete:A,onToggleVisited:j,onBulkUpdate:M,isDragEnabled:n,onToggleDragEnabled:a})}),(0,b.jsx)(_,{onClick:()=>t(!0),icon:(0,b.jsx)(r,{className:`w-6 h-6`}),label:`Adicionar`}),e&&(0,b.jsx)(y.Suspense,{fallback:null,children:(0,b.jsx)(T,{isOpen:e,onClose:()=>t(!1),onSave:async e=>{await O(e),t(!1)}})})]})}export{E as default};