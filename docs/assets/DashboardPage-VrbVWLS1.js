const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ExpensesByCategoryChart-D9HIN_w4.js","assets/index-Drpv3la2.js","assets/router-DLfkpT9n.js","assets/google-login-button-CK2bO50y.js","assets/rolldown-runtime-CWU8vmCm.js","assets/react-query-BB-sDLdC.js","assets/ui-icons-29ZOIELC.js","assets/react-vendor-B0_zmQzX.js","assets/zod-BU_exWGf.js","assets/index-Csiy6FS7.css","assets/BudgetByOriginChart-CxhyitT-.js"])))=>i.map(i=>d[i]);
import{C as e,S as t}from"./google-login-button-CK2bO50y.js";import{c as n}from"./router-DLfkpT9n.js";import"./react-query-BB-sDLdC.js";import"./ui-icons-29ZOIELC.js";import"./zod-BU_exWGf.js";import{C as r,l as i,t as a,x as o}from"./index-Drpv3la2.js";import"./useMediaQuery-CwI1DZ8K.js";import{t as s}from"./PageHeader-CKKT6JPp.js";var c=t();function l({label:e,value:t,subValue:n,icon:r,iconClass:i}){return(0,c.jsxs)(`div`,{className:`bg-white dark:bg-gray-800 p-5 rounded-2xl shadow-sm border border-gray-100 dark:border-gray-700 flex items-center gap-4 min-h-[100px]`,children:[(0,c.jsx)(`div`,{className:`flex-shrink-0 w-14 h-14 rounded-xl flex items-center justify-center text-2xl ${i}`,children:r}),(0,c.jsxs)(`div`,{className:`min-w-0 flex-1`,children:[(0,c.jsx)(`p`,{className:`text-gray-500 dark:text-gray-400 text-sm font-medium`,children:e}),(0,c.jsx)(`p`,{className:`text-xl md:text-2xl font-bold text-gray-800 dark:text-gray-100 truncate`,children:t}),n&&(0,c.jsx)(`p`,{className:`text-xs text-gray-600 dark:text-gray-400 mt-0.5`,children:n})]})]})}function u({status:e}){let t=e.visitedPercentage;return(0,c.jsxs)(`div`,{className:`bg-white dark:bg-gray-800 p-6 rounded-2xl shadow-sm border border-gray-100 dark:border-gray-700`,children:[(0,c.jsxs)(`div`,{className:`flex justify-between mb-4`,children:[(0,c.jsx)(`h2`,{className:`font-bold text-gray-700 dark:text-gray-200 text-lg`,children:`üé¢ Progresso da Viagem`}),(0,c.jsxs)(`span`,{className:`text-purple-600 dark:text-purple-400 font-semibold`,children:[Math.round(t),`%`]})]}),(0,c.jsx)(`div`,{className:`w-full bg-gray-100 dark:bg-gray-700 rounded-full h-4 mb-6`,children:(0,c.jsx)(`div`,{className:`bg-gradient-to-r from-purple-500 to-indigo-500 h-4 rounded-full transition-all`,style:{width:`${t}%`}})}),(0,c.jsxs)(`div`,{className:`grid grid-cols-3 text-center gap-4`,children:[(0,c.jsxs)(`div`,{children:[(0,c.jsx)(`p`,{className:`text-xs text-gray-600 dark:text-gray-400`,children:`Total`}),(0,c.jsx)(`p`,{className:`font-bold text-gray-900 dark:text-gray-100`,children:e.total})]}),(0,c.jsxs)(`div`,{children:[(0,c.jsx)(`p`,{className:`text-xs text-emerald-700 dark:text-emerald-300`,children:`Visitados`}),(0,c.jsx)(`p`,{className:`font-bold text-gray-900 dark:text-gray-100`,children:e.visited})]}),(0,c.jsxs)(`div`,{children:[(0,c.jsx)(`p`,{className:`text-xs text-amber-700 dark:text-amber-300`,children:`Pendentes`}),(0,c.jsx)(`p`,{className:`font-bold text-gray-900 dark:text-gray-100`,children:e.total-e.visited})]})]})]})}function d(e){return e.reduce((e,t)=>e+t.amountInBRL,0)}function f(e){let t=new Map;return e.forEach(e=>{t.set(e.category,(t.get(e.category)||0)+e.amountInBRL)}),Array.from(t).map(([e,t])=>({category:e,total:t}))}function p(e,t){let n=new Map,r=new Map;return e.forEach(e=>{n.set(e.origin,(n.get(e.origin)||0)+e.amount)}),t.forEach(e=>{r.set(e.budgetOrigin,(r.get(e.budgetOrigin)||0)+e.amountInBRL)}),Array.from(n).map(([e,t])=>{let n=r.get(e)||0;return{origin:e,totalBudget:t,spent:n,remaining:t-n}})}function m(e){return{total:e.length,visited:e.filter(e=>e.visited).length,pendingReservation:e.filter(e=>e.needsReservation&&e.reservationStatus!==`confirmed`).length}}function h(e){let t=e.map(e=>e.date).filter(Boolean).map(e=>{let t=new Date(o(e));return new Date(t.getFullYear(),t.getMonth(),t.getDate())});if(t.length===0)return 0;let n=new Date(Math.min(...t.map(e=>e.getTime()))),r=new Date(Math.max(...t.map(e=>e.getTime()))).getTime()-n.getTime();return Math.floor(r/(1e3*60*60*24))+1}function g({budgets:e,expenses:t,attractions:n}){let r=h(n),i=m(n),a=i.total>0?i.visited/i.total*100:0,o=e.reduce((e,t)=>e+t.amount,0),s=d(t);return{stats:{totalSpent:d(t),expensesByCategory:f(t),budgetByOrigin:p(e,t),attractionStatus:{...i,visitedPercentage:a},totalBudget:o,remaining:o-s,daysOfTrip:r}}}var _=e(),v=(0,_.lazy)(()=>n(()=>import(`./ExpensesByCategoryChart-D9HIN_w4.js`),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]))),y=(0,_.lazy)(()=>n(()=>import(`./BudgetByOriginChart-CxhyitT-.js`),__vite__mapDeps([10,1,2,3,4,5,6,7,8,9])));function b(){let{budgets:e,expenses:t,attractions:n,isReady:o}=i(),d=g({budgets:e,expenses:t,attractions:n});if(!o||!d)return(0,c.jsxs)(`div`,{className:`min-h-screen bg-gray-50 dark:bg-gray-900 pb-20 md:pb-6`,children:[(0,c.jsx)(s,{title:`Dashboard`,subtitle:`Resumo da sua viagem`}),(0,c.jsxs)(`div`,{className:`flex flex-col items-center justify-center h-[60vh] space-y-4`,children:[(0,c.jsx)(`div`,{className:`animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600`}),(0,c.jsx)(`p`,{className:`text-gray-500 font-medium animate-pulse`,children:`Carregando dados da viagem...`})]})]});let f=d.stats;if(f)return(0,c.jsxs)(`div`,{className:`min-h-screen bg-gray-50 dark:bg-gray-900 pb-20 md:pb-6`,children:[(0,c.jsx)(s,{title:`Dashboard`,subtitle:`Resumo completo da sua viagem`}),(0,c.jsxs)(`main`,{className:`max-w-7xl mx-auto px-4 md:px-6 py-6 space-y-6`,children:[(0,c.jsxs)(`div`,{className:`grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4`,children:[(0,c.jsx)(l,{label:`Total Gasto`,value:r(f.totalSpent),subValue:`de ${r(f.totalBudget)} or√ßados`,icon:`üí∏`,iconClass:`bg-rose-100 text-rose-600 dark:bg-rose-950/50 dark:text-rose-400`}),(0,c.jsx)(l,{label:`Saldo Restante`,value:r(f.remaining),icon:`üí∞`,iconClass:`bg-emerald-100 text-emerald-600 dark:bg-emerald-950/50 dark:text-emerald-400`}),(0,c.jsx)(l,{label:`Dura√ß√£o da Viagem`,value:`${f.daysOfTrip} Dias`,icon:`üóìÔ∏è`,iconClass:`bg-blue-100 text-blue-600 dark:bg-blue-950/50 dark:text-blue-400`}),(0,c.jsx)(l,{label:`Atra√ß√µes Pendentes`,value:f.attractionStatus.pendingReservation.toString(),subValue:`Necessitam reserva`,icon:`‚ö†Ô∏è`,iconClass:`bg-amber-100 text-amber-600 dark:bg-amber-950/50 dark:text-amber-400`})]}),(0,c.jsxs)(`div`,{className:`grid grid-cols-1 lg:grid-cols-2 gap-4`,children:[(0,c.jsx)(a,{height:320,children:(0,c.jsx)(v,{data:f.expensesByCategory})}),(0,c.jsx)(a,{height:320,children:(0,c.jsx)(y,{data:f.budgetByOrigin})})]}),(0,c.jsxs)(`div`,{className:`grid grid-cols-1 lg:grid-cols-3 gap-4`,children:[(0,c.jsx)(`div`,{className:`lg:col-span-2`,children:(0,c.jsx)(u,{status:f.attractionStatus})}),(0,c.jsx)(`div`,{className:`bg-gradient-to-br from-blue-600 to-purple-600 rounded-2xl p-6 text-white shadow-lg flex flex-col justify-between`,children:(0,c.jsxs)(`div`,{children:[(0,c.jsx)(`h2`,{className:`font-bold text-lg mb-2`,children:`Pr√≥xima Parada?`}),(0,c.jsxs)(`p`,{className:`text-white/90 text-sm`,children:[`Voc√™ tem`,` `,f.attractionStatus.total-f.attractionStatus.visited,` `,`atra√ß√µes restantes no seu roteiro.`]})]})})]})]})]})}export{b as default};