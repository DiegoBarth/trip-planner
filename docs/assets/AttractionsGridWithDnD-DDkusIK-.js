import{a as e,c as t,d as n,i as r,l as i,n as a,o,p as s,r as c,s as l,t as u,u as d}from"./dnd-kit-DVJe_fUm.js";import{t as f}from"./react-ClFNaAWa.js";import{A as p}from"./lucide-CpCSl3L4.js";import"./react-query-DJIZh4EV.js";import{h as m}from"./index-C3tjx2jd.js";import{t as h}from"./EmptyState-BcNFboQM.js";import{t as g}from"./AttractionCard-C9q-Q8tQ.js";import{t as _}from"./useMediaQuery-CIqjhOYk.js";import{t as v}from"./useAttractionsGrouped-uul1ELKS.js";var y=s(),b=f();function x({attraction:e,priority:t=!1,onCheckVisited:r,onDelete:i,onClick:a}){let o=_(`(max-width: 768px)`),[s,l]=(0,y.useState)(!1),{attributes:u,listeners:d,setNodeRef:f,transform:m,transition:h,isDragging:v}=c({id:e.id}),x={transform:n.Transform.toString(m),transition:h,opacity:v?.6:1,zIndex:v?1e3:`auto`},S=o?{...u,...d,onTouchStart:e=>{l(!0),d?.onTouchStart?.(e)},onTouchEnd:e=>{l(!1),d?.onTouchEnd?.(e)},onTouchCancel:e=>{l(!1),d?.onTouchCancel?.(e)}}:u,C=o?{}:d;return(0,b.jsxs)(`div`,{ref:f,style:x,className:`
        relative group
        focus:outline-none [-webkit-tap-highlight-color:transparent]
        ${o&&s?`scale-[0.98] transition-transform`:``}
      `,...S,children:[!o&&(0,b.jsxs)(`div`,{...C,className:`
            absolute top-0 left-0 right-0 h-14 z-20 flex items-center gap-2 px-3
            bg-gradient-to-b from-gray-900 to-gray-800 bg-opacity-60
            hover:bg-opacity-90 group-hover:bg-opacity-80
            rounded-t-lg transition-all
            cursor-grab active:cursor-grabbing
            focus:outline-none [-webkit-tap-highlight-color:transparent]
            ${v?`bg-opacity-90 ring-2 ring-blue-500`:``}
          `,title:`Clique e arraste para reordenar esta atraÃ§Ã£o`,children:[(0,b.jsx)(`div`,{className:`flex flex-col gap-0.5`,children:(0,b.jsx)(p,{className:`w-5 h-5 text-white`})}),(0,b.jsx)(`span`,{className:`text-white text-sm font-medium`,children:`Reordenar`})]}),(0,b.jsx)(`div`,{className:o?``:`pt-12`,children:(0,b.jsx)(g,{attraction:e,priority:t,onCheckVisited:r,onDelete:i,onClick:a})})]})}function S({day:e,attractions:t,onToggleVisited:n,onDelete:i,onEdit:a}){return(0,b.jsx)(`div`,{className:`space-y-3`,children:(0,b.jsx)(u,{items:t.map(e=>e.id),strategy:r,children:(0,b.jsx)(`div`,{className:`grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4`,children:t.map((e,t)=>(0,b.jsx)(x,{attraction:e,priority:t===0,onCheckVisited:n,onDelete:i,onClick:()=>a?.(e)},e.id))})})})}function C({attractions:n,emptyTitle:r,emptyDescription:s,onToggleVisited:c,onDelete:u,onEdit:f,onReorder:p}){let{displayAttractions:g,setDisplayAttractions:_,isAllDaysView:y,isReadyForTotals:x,getCountryTotalCouplePrice:C,getCountryTotalPriceBrl:w,getDayTotalCouplePrice:T,getDayTotalPriceBrl:E,sortedCountryEntries:D,COUNTRIES:O,formatDate:k,formatCurrency:A}=v(n),j=d(i(l,{activationConstraint:{delay:1e3,tolerance:5}}),i(o,{activationConstraint:{distance:10}}));return g.length===0?(0,b.jsx)(h,{icon:`ðŸ—ºï¸`,title:r,description:s}):(0,b.jsx)(e,{sensors:j,collisionDetection:t,onDragEnd:e=>{let{active:t,over:n}=e;if(!n)return;let r=t.id,i=n.id;if(r===i)return;let o=g.find(e=>e.id===r),s=g.find(e=>e.id===i);if(!o||!s)return;let c=m(o.date),l=m(s.date);if(o.country!==s.country||!c||c!==l)return;let u=g.filter(e=>e.country===o.country&&m(e.date)===c).sort((e,t)=>e.order-t.order),d=a(u,u.findIndex(e=>e.id===r),u.findIndex(e=>e.id===i)),f=g.map(e=>{if(e.country!==o.country||m(e.date)!==c)return e;let t=d.findIndex(t=>t.id===e.id);return{...e,order:t+1}});_(f),p(f)},children:(0,b.jsx)(`div`,{className:`space-y-10`,children:D.map(([e,t])=>{let n=C(t),r=w(t);return(0,b.jsxs)(`section`,{className:`space-y-6`,children:[(0,b.jsxs)(`div`,{className:`flex items-center gap-3 flex-wrap`,children:[(0,b.jsxs)(`div`,{className:`flex items-center gap-2 px-4 py-2.5 rounded-xl bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 shadow-sm w-fit`,children:[(0,b.jsx)(`span`,{className:`text-xl`,"aria-hidden":!0,children:O[e]?.flag??`ðŸŒ`}),(0,b.jsx)(`h2`,{className:`text-base font-semibold text-gray-900 dark:text-gray-100`,children:O[e]?.name??e})]}),y&&x&&n&&(0,b.jsxs)(`div`,{className:`flex flex-col`,children:[(0,b.jsx)(`span`,{className:`text-md font-semibold text-emerald-600 dark:text-emerald-400`,children:n}),(0,b.jsxs)(`span`,{className:`text-sm font-medium text-gray-500 dark:text-gray-400`,children:[`(`,A(r),`)`]})]})]}),Object.entries(t).sort(([e],[t])=>Number(e)-Number(t)).map(([t,n])=>{let r=T(n),i=E(n);return(0,b.jsxs)(`section`,{children:[(0,b.jsxs)(`div`,{className:`flex items-center justify-between gap-3 flex-wrap`,children:[(0,b.jsxs)(`div`,{className:`flex items-center gap-2 px-4 py-2 rounded-xl bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 shadow-sm mb-3 w-fit`,children:[(0,b.jsx)(`span`,{className:`text-lg`,"aria-hidden":!0,children:`ðŸ“…`}),(0,b.jsxs)(`h3`,{className:`text-base font-semibold text-gray-900 dark:text-gray-100`,children:[`Dia `,t]}),n[0]?.date&&(0,b.jsx)(`span`,{className:`text-sm text-gray-500 dark:text-gray-400`,children:k(n[0].date)}),(0,b.jsxs)(`span`,{className:`text-sm text-gray-400 dark:text-gray-500`,children:[`Â· `,n.length,` `,n.length===1?`atraÃ§Ã£o`:`atraÃ§Ãµes`]})]}),r&&(0,b.jsxs)(`div`,{className:`flex flex-col h-[58px]`,children:[(0,b.jsx)(`span`,{className:`text-md font-medium text-emerald-600 dark:text-emerald-400`,children:r}),(0,b.jsxs)(`span`,{className:`text-sm font-medium`,children:[`(`,A(i),`)`]})]})]}),(0,b.jsx)(S,{day:Number(t),attractions:n,onToggleVisited:c,onDelete:u,onEdit:f})]},`${e}-${t}`)})]},e)})})})}export{C as AttractionsGridWithDnD};