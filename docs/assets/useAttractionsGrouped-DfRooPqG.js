import{p as e}from"./dnd-kit-DVJe_fUm.js";import{M as t,_ as n,b as r,h as i,r as a}from"./index-BvS3ZUq7.js";var o=e();function s(e){let[s,c]=(0,o.useState)(e),{day:l}=a(),u=l===`all`,d=u&&e.length===s.length;(0,o.useEffect)(()=>{c(e)},[e]);let f=(0,o.useCallback)(e=>{let t=Object.values(e).flat();if(!t.length)return null;let r=t.reduce((e,t)=>e+(Number(t.couplePrice)||0),0);return r?n(r,t.find(e=>e.currency)?.currency||`BRL`):null},[]),p=(0,o.useCallback)(e=>Object.values(e).flat().reduce((e,t)=>e+(Number(t.priceInBRL)||0),0),[]),m=(0,o.useCallback)(e=>{if(!e.length)return null;let t=e.reduce((e,t)=>e+(Number(t.couplePrice)||0),0);return t?n(t,e.find(e=>e.currency)?.currency||`BRL`):null},[]),h=(0,o.useCallback)(e=>e.reduce((e,t)=>e+(Number(t.priceInBRL)||0),0),[]),g=(0,o.useMemo)(()=>{let e={};for(let t of s){let n=t.country??`outros`,r=t.day;e[n]||(e[n]={}),e[n][r]||(e[n][r]=[]),e[n][r].push(t)}return Object.values(e).forEach(e=>{Object.keys(e).forEach(t=>{e[Number(t)].sort((e,t)=>e.order-t.order)})}),e},[s]),_=(0,o.useCallback)(e=>{let t=g[e];if(!t)return 1/0;let n=[];return Object.values(t).forEach(e=>{e.forEach(e=>{e.date&&n.push(i(e.date))})}),n.length===0?1/0:new Date(`${n.sort()[0]}T12:00:00`).getTime()},[g]);return{displayAttractions:s,setDisplayAttractions:c,isAllDaysView:u,isReadyForTotals:d,getCountryTotalCouplePrice:f,getCountryTotalPriceBrl:p,getDayTotalCouplePrice:m,getDayTotalPriceBrl:h,sortedCountryEntries:(0,o.useMemo)(()=>Object.entries(g).sort(([e],[t])=>{let n=_(e),r=_(t);return n===r?e.localeCompare(t):n-r}),[g,_]),groupedByCountry:g,COUNTRIES:t,formatDate:r,formatCurrency:n}}export{s as t};