const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/exportChecklistToPDF-BKXmpGlt.js","assets/router-DLfkpT9n.js","assets/google-login-button-CK2bO50y.js","assets/rolldown-runtime-CWU8vmCm.js","assets/jspdf.es.min-ByXr749M.js","assets/typeof-_tCs8JoZ.js"])))=>i.map(i=>d[i]);
import{C as e,S as t,s as n}from"./google-login-button-CK2bO50y.js";import{c as r}from"./router-DLfkpT9n.js";import{$ as i,C as a,U as o,Y as s,g as c,h as l,s as u,v as d}from"./ui-icons-ZvUVfxiW.js";import"./zod-BU_exWGf.js";import{K as f}from"./index-DpljZKJp.js";import{t as p}from"./EmptyState-TiN00nqa.js";import{t as m}from"./useFocusTrap-C4PmKqSe.js";import{t as h}from"./ConfirmModal-BXbTnVXY.js";import"./validateWithToast-CwomA5yc.js";import{t as g}from"./ModalChecklistItem-DLG73WGs.js";var _=e(),v=t(),y={documents:`bg-blue-100 dark:bg-blue-900/50 text-blue-800 dark:text-blue-300`,clothes:`bg-pink-100 dark:bg-pink-900/50 text-pink-800 dark:text-pink-300`,electronics:`bg-indigo-100 dark:bg-indigo-900/50 text-indigo-800 dark:text-indigo-300`,hygiene:`bg-teal-100 dark:bg-teal-900/50 text-teal-800 dark:text-teal-300`,medicines:`bg-red-100 dark:bg-red-900/50 text-red-800 dark:text-red-300`,accessories:`bg-amber-100 dark:bg-amber-900/50 text-amber-800 dark:text-amber-300`,entertainment:`bg-violet-100 dark:bg-violet-900/50 text-violet-800 dark:text-violet-300`,other:`bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300`},b={documents:`bg-blue-100 dark:bg-blue-900/50`,clothes:`bg-pink-100 dark:bg-pink-900/50`,electronics:`bg-indigo-100 dark:bg-indigo-900/50`,hygiene:`bg-teal-100 dark:bg-teal-900/50`,medicines:`bg-red-100 dark:bg-red-900/50`,accessories:`bg-amber-100 dark:bg-amber-900/50`,entertainment:`bg-violet-100 dark:bg-violet-900/50`,other:`bg-gray-100 dark:bg-gray-700`};function x({item:e,onClick:t,onTogglePacked:r}){let i=n[e.category],a=i?.color??`#6b7280`;return(0,v.jsx)(`div`,{role:t?`button`:void 0,tabIndex:t?0:void 0,onClick:()=>t?.(e),onKeyDown:n=>{t&&(n.key===`Enter`||n.key===` `)&&(n.preventDefault(),t(e))},className:`group bg-white dark:bg-gray-800 rounded-2xl shadow-md overflow-hidden border-l-4 transition-all ${t?`cursor-pointer hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-emerald-500/50`:``} ${e.isPacked?`bg-emerald-50/50 dark:bg-emerald-900/30 border-emerald-400`:``}`,style:e.isPacked?void 0:{borderLeftColor:a},children:(0,v.jsxs)(`div`,{className:`p-4`,children:[(0,v.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,v.jsx)(`button`,{onClick:t=>{t.stopPropagation();try{r(e.id,!e.isPacked)}catch(e){console.error(`Error toggling item:`,e)}},type:`button`,className:`flex-shrink-0 w-6 h-6 rounded-md border-2 flex items-center justify-center transition-all focus:ring-2 focus:ring-gray-300 dark:focus:ring-gray-500 focus:outline-none ${e.isPacked?`bg-emerald-700 border-emerald-700`:`border-gray-300 hover:border-emerald-400`}`,"aria-label":e.isPacked?`Desmarcar empacotado`:`Marcar como empacotado`,children:e.isPacked&&(0,v.jsx)(`svg`,{className:`w-3.5 h-3.5 text-white`,fill:`none`,strokeLinecap:`round`,strokeLinejoin:`round`,strokeWidth:`2`,viewBox:`0 0 24 24`,stroke:`currentColor`,children:(0,v.jsx)(`path`,{d:`M5 13l4 4L19 7`})})}),(0,v.jsx)(`div`,{className:f(`w-10 h-10 rounded-xl flex items-center justify-center text-lg flex-shrink-0`,b[e.category]??b.other),children:i?.icon??`ðŸ“¦`}),(0,v.jsx)(`span`,{className:f(`text-xs font-medium px-2 py-0.5 rounded-md flex-shrink-0`,y[e.category]??y.other),children:i?.label??e.category}),(0,v.jsx)(`div`,{className:`flex-1 min-w-0`,"aria-hidden":!0}),e.isPacked&&(0,v.jsx)(`span`,{className:`px-2 py-0.5 rounded-md text-xs font-semibold text-white bg-emerald-700 flex-shrink-0`,children:`âœ“ Empacotado`})]}),(0,v.jsx)(`div`,{className:`flex items-center gap-2 mt-2 min-w-0`,children:(0,v.jsx)(`h3`,{className:`font-semibold text-gray-900 dark:text-gray-100 truncate min-w-0 flex-1 ${e.isPacked?`text-gray-500 dark:text-gray-400 line-through`:``}`,title:e.description,children:e.description})}),e.quantity&&e.quantity>1||e.notes?(0,v.jsxs)(`div`,{className:`flex flex-wrap items-center gap-x-4 gap-y-1 mt-2 pt-2 border-t border-gray-100 dark:border-gray-700 text-sm text-gray-600 dark:text-gray-400`,children:[e.quantity&&e.quantity>1&&(0,v.jsxs)(`div`,{className:`flex items-center gap-1.5`,children:[(0,v.jsx)(c,{className:`w-3.5 h-3.5 text-gray-400`}),(0,v.jsxs)(`span`,{children:[`Quantidade: `,e.quantity]})]}),e.notes&&(0,v.jsx)(`p`,{className:`line-clamp-2 min-w-0`,children:e.notes})]}):null]})})}function S({item:e,isOpen:t,onClose:r,onEdit:i,onDelete:a}){let o=m(t);if((0,_.useEffect)(()=>{if(!t)return;function e(e){e.key===`Escape`&&r()}return document.addEventListener(`keydown`,e),()=>document.removeEventListener(`keydown`,e)},[t,r]),!t||!e)return null;let c=n[e.category],d=()=>{r(),i(e)},f=()=>{r(),a(e)};return(0,v.jsxs)(`div`,{className:`fixed inset-0 z-[600] flex justify-center items-end md:items-center`,role:`dialog`,"aria-modal":`true`,"aria-labelledby":`checklist-actions-title`,children:[(0,v.jsx)(`div`,{className:`absolute inset-0 bg-black/40 backdrop-blur-sm`,onClick:r,"aria-hidden":`true`}),(0,v.jsxs)(`div`,{ref:o,className:`relative w-full max-w-sm bg-white dark:bg-gray-800 rounded-t-2xl md:rounded-2xl shadow-2xl flex flex-col`,children:[(0,v.jsxs)(`div`,{className:`flex items-center justify-between px-4 py-3 border-b border-gray-200 dark:border-gray-700`,children:[(0,v.jsx)(`h2`,{id:`checklist-actions-title`,className:`text-lg font-semibold text-gray-900 dark:text-gray-100 truncate pr-2`,children:e.description}),(0,v.jsx)(`button`,{type:`button`,onClick:r,"aria-label":`Fechar`,className:`p-2 rounded-lg text-gray-500 hover:text-gray-700 dark:hover:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700`,children:(0,v.jsx)(s,{className:`w-5 h-5`})})]}),c&&(0,v.jsxs)(`div`,{className:`px-4 py-3 text-sm text-gray-500 dark:text-gray-400 flex items-center gap-2`,children:[(0,v.jsx)(`span`,{children:c.icon}),(0,v.jsx)(`span`,{children:c.label})]}),(0,v.jsxs)(`div`,{className:`flex gap-3 px-4 py-4 border-t border-gray-200 dark:border-gray-700`,children:[(0,v.jsxs)(`button`,{type:`button`,onClick:d,className:`flex-1 flex items-center justify-center gap-2 px-4 py-2.5 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none`,children:[(0,v.jsx)(l,{className:`w-4 h-4`}),`Editar`]}),(0,v.jsxs)(`button`,{type:`button`,onClick:f,className:`flex-1 flex items-center justify-center gap-2 px-4 py-2.5 text-sm font-medium text-white bg-red-600 hover:bg-red-700 rounded-lg focus:ring-2 focus:ring-red-500 focus:outline-none`,children:[(0,v.jsx)(u,{className:`w-4 h-4`}),`Excluir`]})]})]})]})}function C({items:e,onUpdate:t,onCreate:s,onDelete:c,onTogglePacked:l,isLoading:u=!1}){let[f,m]=(0,_.useState)(!1),[y,b]=(0,_.useState)(),[C,w]=(0,_.useState)(null),[T,E]=(0,_.useState)(null),[D,O]=(0,_.useState)(!1),k=(0,_.useMemo)(()=>{let t=e.reduce((e,t)=>{let n=t.category;return e[n]||(e[n]=[]),e[n].push(t),e},{});return Object.values(t).forEach(e=>{e.sort((e,t)=>e.description.localeCompare(t.description,`pt-BR`))}),t},[e]),A=(0,_.useMemo)(()=>{let t=e.length,n=e.filter(e=>e.isPacked).length,r=t>0?Math.round(n/t*100):0;return{total:t,packed:n,unpacked:t-n,percentage:r}},[e]),j=()=>{b(void 0),m(!1)},M=async e=>{y?await Promise.resolve(t({...e,id:y.id})):await Promise.resolve(s(e))},N=async()=>{O(!0);try{let{exportChecklistToPDF:t}=await r(async()=>{let{exportChecklistToPDF:e}=await import(`./exportChecklistToPDF-BKXmpGlt.js`);return{exportChecklistToPDF:e}},__vite__mapDeps([0,1,2,3,4,5]));t({items:e})}finally{O(!1)}},P=async()=>{C&&(await c(C.id),w(null))},F=e=>{E(e)};return u?null:(0,v.jsxs)(`div`,{children:[(0,v.jsx)(`div`,{className:`mb-8`,children:(0,v.jsx)(`div`,{className:`rounded-2xl shadow-lg overflow-hidden bg-gradient-to-br from-emerald-500 to-teal-600 text-white mb-4`,children:(0,v.jsxs)(`div`,{className:`p-5 md:p-6`,children:[(0,v.jsxs)(`div`,{className:`flex items-center justify-between gap-4 flex-wrap`,children:[(0,v.jsxs)(`div`,{className:`flex items-center gap-3`,children:[(0,v.jsx)(`div`,{className:`w-12 h-12 rounded-xl bg-white/20 flex items-center justify-center`,children:(0,v.jsx)(o,{className:`w-7 h-7`})}),(0,v.jsxs)(`div`,{children:[(0,v.jsx)(`h2`,{className:`text-xl font-bold tracking-tight`,children:`Checklist de Viagem`}),(0,v.jsxs)(`p`,{className:`text-sm opacity-90 mt-0.5`,children:[A.total,` `,A.total===1?`item`:`itens`,` no total`]})]})]}),A.total>0&&(0,v.jsxs)(`button`,{type:`button`,onClick:N,disabled:D,className:`flex items-center gap-2 px-4 py-2.5 bg-white text-emerald-700 rounded-xl font-semibold hover:bg-white/90 transition-colors shadow-md focus:ring-2 focus:ring-gray-300 dark:focus:ring-gray-500 focus:outline-none disabled:opacity-70 disabled:cursor-wait`,title:`Exportar para PDF`,children:[(0,v.jsx)(a,{className:`w-5 h-5`}),D?`Preparandoâ€¦`:`Exportar PDF`]})]}),A.total>0&&(0,v.jsxs)(`div`,{className:`mt-5 pt-5 border-t border-white/25`,children:[(0,v.jsxs)(`div`,{className:`flex items-center justify-between mb-2`,children:[(0,v.jsx)(`span`,{className:`text-sm font-medium opacity-90`,children:`Progresso da mala`}),(0,v.jsxs)(`span`,{className:`text-sm font-bold`,children:[A.packed,` de `,A.total,` (`,A.percentage,`%)`]})]}),(0,v.jsx)(`div`,{className:`h-2.5 bg-white/25 rounded-full overflow-hidden`,children:(0,v.jsx)(`div`,{className:`h-full bg-white rounded-full transition-all duration-500`,style:{width:`${A.percentage}%`}})}),(0,v.jsxs)(`div`,{className:`flex items-center justify-between mt-2.5 text-xs opacity-90`,children:[(0,v.jsxs)(`span`,{className:`flex items-center gap-1.5`,children:[(0,v.jsx)(d,{className:`w-4 h-4`}),A.unpacked,` faltando`]}),(0,v.jsxs)(`span`,{className:`flex items-center gap-1.5`,children:[(0,v.jsx)(i,{className:`w-4 h-4`}),A.packed,` empacotado`,A.packed===1?``:`s`]})]})]})]})})}),(0,v.jsx)(`div`,{className:`space-y-8`,children:Object.keys(k).length===0?(0,v.jsx)(p,{icon:`ðŸ“‹`,title:`Nenhum item no checklist`,description:`Comece adicionando itens que vocÃª precisa levar na viagem!`}):Object.entries(k).sort(([e],[t])=>{let r=n[e]?.label||e,i=n[t]?.label||t;return r.localeCompare(i,`pt-BR`)}).map(([e,t])=>{let r=n[e],a=t.filter(e=>e.isPacked).length,o=t.length;return(0,v.jsxs)(`section`,{className:`space-y-4`,children:[(0,v.jsxs)(`div`,{className:`flex items-center gap-2 px-4 py-2.5 rounded-xl bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 shadow-sm w-fit`,children:[(0,v.jsx)(`span`,{className:`text-xl`,children:r?.icon??`ðŸ“¦`}),(0,v.jsx)(`h3`,{className:`text-base font-semibold text-gray-900 dark:text-gray-100`,children:r?.label??e}),(0,v.jsxs)(`span`,{className:`text-sm text-gray-500 dark:text-gray-400`,children:[a,`/`,o]}),a===o&&o>0&&(0,v.jsxs)(`span`,{className:`text-xs font-semibold text-emerald-600 flex items-center gap-1`,children:[(0,v.jsx)(i,{className:`w-3.5 h-3.5`}),`Completo`]})]}),(0,v.jsx)(`div`,{className:`grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4`,children:t.map(e=>(0,v.jsx)(x,{item:e,onClick:F,onTogglePacked:l},e.id))})]},e)})}),(0,v.jsx)(g,{item:y,isOpen:f,onClose:j,onSave:M}),(0,v.jsx)(S,{item:T,isOpen:!!T,onClose:()=>E(null),onEdit:e=>{E(null),b(e),m(!0)},onDelete:e=>{E(null),w(e)}}),(0,v.jsx)(h,{isOpen:!!C,onClose:()=>w(null),title:`Excluir item`,message:C?(0,v.jsxs)(v.Fragment,{children:[`Tem certeza que deseja excluir "`,C.description,`"?`]}):null,onConfirm:P})]})}export{C as default};