import{S as e,x as t}from"./google-login-button-DyA0rimH.js";import{N as n,P as r}from"./ui-icons-B3vgkW9X.js";import{r as i}from"./index-BkxVq0Ic.js";import{t as a}from"./utils-BsSA53OC.js";var o=e(),s=i(),c=t();function l({value:e,onChange:t,options:i,label:l,id:u,placeholder:d=`Selecione`,variant:f=`default`,leftIcon:p,disabled:m=!1,dropdownPosition:h=`above`}){let[g,_]=(0,o.useState)(!1),[v,y]=(0,o.useState)({top:0,left:0,width:0,height:0}),[b,x]=(0,o.useState)(-1),S=(0,o.useRef)(null),C=(0,o.useRef)(null),w=(0,o.useRef)(null),T=u?`${u}-listbox`:`select-listbox`;(0,o.useEffect)(()=>{if(g&&S.current){let t=S.current.getBoundingClientRect();y({top:t.top,left:t.left,width:t.width,height:t.height}),x(i.indexOf(e))}else x(-1)},[g,e,i]),(0,o.useEffect)(()=>{if(g&&w.current){let e=setTimeout(()=>{w.current?.scrollIntoView({block:`center`,behavior:`auto`})},10);return()=>clearTimeout(e)}},[g]),(0,o.useEffect)(()=>{if(!g)return;let e=e=>{C.current?.contains(e.target)||_(!1)};return window.addEventListener(`scroll`,e,!0),()=>window.removeEventListener(`scroll`,e,!0)},[g]),(0,o.useEffect)(()=>{function e(e){S.current&&!S.current.contains(e.target)&&_(!1)}return g&&document.addEventListener(`mousedown`,e),()=>document.removeEventListener(`mousedown`,e)},[g]);let E=e=>{t(e),_(!1)};return(0,c.jsxs)(`div`,{className:`relative w-full`,ref:S,children:[(0,c.jsxs)(`button`,{type:`button`,id:u,disabled:m,onClick:()=>!m&&_(!g),onKeyDown:e=>{if(!g){[`Enter`,` `,`ArrowDown`,`ArrowUp`].includes(e.key)&&(e.preventDefault(),_(!0));return}switch(e.key){case`ArrowDown`:e.preventDefault(),x(e=>e<i.length-1?e+1:0);break;case`ArrowUp`:e.preventDefault(),x(e=>e>0?e-1:i.length-1);break;case`Home`:e.preventDefault(),x(0);break;case`End`:e.preventDefault(),x(i.length-1);break;case`Enter`:e.preventDefault(),b>=0&&b<i.length&&E(i[b]);break;case`Escape`:e.preventDefault(),_(!1);break}},"aria-haspopup":`listbox`,"aria-expanded":g,"aria-labelledby":l?`${u}-label`:void 0,"aria-controls":g?T:void 0,"aria-activedescendant":g&&b>=0?`${T}-option-${b}`:void 0,className:a(`flex h-10 w-full items-center justify-between rounded-xl border text-sm font-medium transition-all outline-none`,f===`glass`&&`relative`,f===`default`&&[`bg-white dark:bg-gray-700 px-3 py-2`,`border-gray-300 dark:border-gray-600 hover:border-gray-400 dark:hover:border-gray-500 focus:border-blue-500 focus:ring-2 focus:ring-gray-300 dark:focus:ring-gray-500 focus:outline-none`,m&&`opacity-50 cursor-not-allowed`],f===`glass`&&[`bg-white/15 backdrop-blur-sm border-white/20 pl-10 pr-4 py-2.5`,`hover:bg-white/20 focus:ring-2 focus:ring-gray-300 dark:focus:ring-gray-500 focus:outline-none focus:bg-white/20`,m&&`opacity-50 cursor-not-allowed`]),children:[f===`glass`&&p&&(0,c.jsx)(`span`,{className:`absolute left-3 top-1/2 -translate-y-1/2 text-white/70 [&>svg]:w-4 [&>svg]:h-4 pointer-events-none`,"aria-hidden":`true`,children:p}),(0,c.jsx)(`span`,{className:a(`truncate`,f===`default`&&(e?`text-gray-900 dark:text-gray-100`:`text-gray-500 dark:text-gray-400`),f===`glass`&&`text-white`),children:e||d}),(0,c.jsx)(r,{className:a(`h-4 w-4 transition-transform flex-shrink-0 ml-2`,f===`default`&&`text-gray-400 dark:text-gray-500`,f===`glass`&&`text-white/70`,g&&`rotate-180`),"aria-hidden":`true`})]}),g&&(0,s.createPortal)((0,c.jsx)(`div`,{ref:C,style:{position:`fixed`,top:h===`below`?v.top+v.height+4:v.top,left:v.left,width:v.width,transform:h===`above`?`translateY(-100%) translateY(-4px)`:void 0,zIndex:1e4},className:a(`overflow-hidden rounded-xl shadow-xl`,`border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800`),children:(0,c.jsx)(`div`,{id:T,role:`listbox`,"aria-label":l||`Opções`,className:`max-h-60 overflow-y-auto p-1 scroll-smooth`,children:i.map((t,r)=>{let i=e===t,o=b===r;return(0,c.jsxs)(`div`,{id:`${T}-option-${r}`,role:`option`,"aria-selected":i,ref:i?w:null,onMouseDown:e=>{e.preventDefault(),e.stopPropagation(),E(t)},onMouseEnter:()=>x(r),className:a(`flex cursor-pointer items-center justify-between rounded-lg px-3 py-2 text-sm transition-colors`,(o||i)&&`bg-gray-100 dark:bg-gray-700`,!o&&!i&&`hover:bg-gray-50 dark:hover:bg-gray-700`,i?`font-semibold text-gray-900 dark:text-gray-100`:`text-gray-700 dark:text-gray-300`),children:[(0,c.jsx)(`span`,{className:`truncate`,children:t}),i&&(0,c.jsx)(n,{className:`h-4 w-4 flex-shrink-0 ml-2 text-blue-600 dark:text-blue-400`,"aria-hidden":`true`})]},t)})})}),document.body)]})}export{l as t};